{
  "version": 3,
  "sources": ["global-preact:global-preact:react", "../../../app/domains/storefront/popups-new/utils.ts", "global-preact:global-preact:preact/jsx-runtime", "../../../app/domains/storefront/popups-new/FreeShippingPopup.tsx", "../../storefront-src/bundles/free-shipping.ts"],
  "sourcesContent": ["\n                if (typeof window === \"undefined\" || !window.RevenueBoostPreact) {\n                  throw new Error(\"RevenueBoostPreact not found. Make sure main bundle is loaded first.\");\n                }\n                const { h, Component, Fragment, render, createPortal, createContext } = window.RevenueBoostPreact;\n                const { useState, useEffect, useCallback, useRef, useMemo, useContext, useDebugValue } = window.RevenueBoostPreact.hooks;\n                const createElement = h;\n                export {\n                  h,\n                  createElement,\n                  Component,\n                  Fragment,\n                  render,\n                  createPortal,\n                  createContext,\n                  useState,\n                  useEffect,\n                  useCallback,\n                  useRef,\n                  useMemo,\n                  useContext,\n                  useDebugValue,\n                };\n                export default {\n                  h,\n                  createElement,\n                  Component,\n                  Fragment,\n                  render,\n                  createPortal,\n                  createContext,\n                  useState,\n                  useEffect,\n                  useCallback,\n                  useRef,\n                  useMemo,\n                  useContext,\n                  useDebugValue,\n                };\n              ", "/**\n * Utility Functions for Storefront Popup Components\n * \n * Shared helper functions used across popup components\n */\n\nimport type { PopupSize, PopupPosition, PopupAnimation } from './types';\n\n/**\n * Get size dimensions based on size prop\n * In preview mode, use smaller percentages to show relative size on screen\n */\nexport function getSizeDimensions(size: PopupSize, previewMode?: boolean): { width: string; maxWidth: string } {\n  if (previewMode) {\n    // In preview mode, use percentages to show relative screen coverage\n    switch (size) {\n      case 'small':\n        return { width: '50%', maxWidth: '400px' };\n      case 'medium':\n        return { width: '65%', maxWidth: '600px' };\n      case 'large':\n        return { width: '80%', maxWidth: '900px' };\n      default:\n        return { width: '65%', maxWidth: '600px' };\n    }\n  }\n\n  // Production mode - use full responsive widths\n  switch (size) {\n    case 'small':\n      return { width: '90%', maxWidth: '400px' };\n    case 'medium':\n      return { width: '90%', maxWidth: '600px' };\n    case 'large':\n      return { width: '90%', maxWidth: '900px' };\n    default:\n      return { width: '90%', maxWidth: '600px' };\n  }\n}\n\n/**\n * Get position styles based on position prop\n */\nexport function getPositionStyles(position: PopupPosition): React.CSSProperties {\n  const baseStyles: React.CSSProperties = {\n    position: 'fixed',\n    zIndex: 10000,\n  };\n\n  switch (position) {\n    case 'center':\n      return {\n        ...baseStyles,\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n      };\n    case 'top':\n      return {\n        ...baseStyles,\n        top: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n      };\n    case 'bottom':\n      return {\n        ...baseStyles,\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n      };\n    case 'left':\n      return {\n        ...baseStyles,\n        top: '50%',\n        left: '20px',\n        transform: 'translateY(-50%)',\n      };\n    case 'right':\n      return {\n        ...baseStyles,\n        top: '50%',\n        right: '20px',\n        transform: 'translateY(-50%)',\n      };\n    default:\n      return {\n        ...baseStyles,\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n      };\n  }\n}\n\n/**\n * Get animation class name based on animation type\n */\nexport function getAnimationClass(animation: PopupAnimation, isExiting: boolean = false): string {\n  if (animation === 'none') return '';\n  \n  const prefix = isExiting ? 'popup-exit' : 'popup-enter';\n  return `${prefix}-${animation}`;\n}\n\n/**\n * Get animation keyframes CSS\n */\nexport function getAnimationKeyframes(): string {\n  return `\n    @keyframes popup-enter-fade {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n    \n    @keyframes popup-exit-fade {\n      from { opacity: 1; }\n      to { opacity: 0; }\n    }\n    \n    @keyframes popup-enter-slide {\n      from { \n        opacity: 0;\n        transform: translate(-50%, -60%);\n      }\n      to { \n        opacity: 1;\n        transform: translate(-50%, -50%);\n      }\n    }\n    \n    @keyframes popup-exit-slide {\n      from { \n        opacity: 1;\n        transform: translate(-50%, -50%);\n      }\n      to { \n        opacity: 0;\n        transform: translate(-50%, -60%);\n      }\n    }\n    \n    @keyframes popup-enter-bounce {\n      0% { \n        opacity: 0;\n        transform: translate(-50%, -50%) scale(0.3);\n      }\n      50% { \n        transform: translate(-50%, -50%) scale(1.05);\n      }\n      70% { \n        transform: translate(-50%, -50%) scale(0.9);\n      }\n      100% { \n        opacity: 1;\n        transform: translate(-50%, -50%) scale(1);\n      }\n    }\n    \n    @keyframes popup-exit-bounce {\n      from { \n        opacity: 1;\n        transform: translate(-50%, -50%) scale(1);\n      }\n      to { \n        opacity: 0;\n        transform: translate(-50%, -50%) scale(0.3);\n      }\n    }\n    \n    .popup-enter-fade { animation: popup-enter-fade 0.3s ease-out; }\n    .popup-exit-fade { animation: popup-exit-fade 0.3s ease-in; }\n    .popup-enter-slide { animation: popup-enter-slide 0.3s ease-out; }\n    .popup-exit-slide { animation: popup-exit-slide 0.3s ease-in; }\n    .popup-enter-bounce { animation: popup-enter-bounce 0.5s ease-out; }\n    .popup-exit-bounce { animation: popup-exit-bounce 0.3s ease-in; }\n    \n    @media (prefers-reduced-motion: reduce) {\n      .popup-enter-fade,\n      .popup-enter-slide,\n      .popup-enter-bounce,\n      .popup-exit-fade,\n      .popup-exit-slide,\n      .popup-exit-bounce {\n        animation: none !important;\n      }\n    }\n  `;\n}\n\n/**\n * Validate email address\n */\nexport function validateEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Format currency\n *\n * Accepts either an ISO 4217 currency code (\"USD\", \"EUR\") or a common\n * currency symbol (\"$\", \"\u20AC\", \"\u00A3\"). Falls back gracefully if an invalid\n * value is provided so we never throw RangeError from Intl.NumberFormat.\n */\nexport function formatCurrency(amount: number | string, currency: string = 'USD'): string {\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\n\n  // Normalize currency input\n  const raw = (currency || '').trim();\n  const upper = raw.toUpperCase();\n\n  // Map common symbols to ISO codes\n  const symbolToCode: Record<string, string> = {\n    '$': 'USD',\n    '\u20AC': 'EUR',\n    '\u00A3': 'GBP',\n    '\u00A5': 'JPY',\n    'C$': 'CAD',\n    'A$': 'AUD',\n  };\n\n  let code: string = 'USD';\n\n  if (/^[A-Z]{3}$/.test(upper)) {\n    // Looks like a valid 3-letter code; use as-is\n    code = upper;\n  } else if (raw in symbolToCode) {\n    // Map known symbols to codes\n    code = symbolToCode[raw];\n  }\n\n  try {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: code,\n    }).format(numAmount);\n  } catch {\n    // Final fallback: simple prefix formatting that will never throw\n    const sign = numAmount < 0 ? '-' : '';\n    const absAmount = Math.abs(numAmount || 0);\n    const symbol = raw || '$';\n    return `${sign}${symbol}${absAmount.toFixed(2)}`;\n  }\n}\n\n/**\n * Copy text to clipboard\n */\nexport async function copyToClipboard(text: string): Promise<boolean> {\n  try {\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      await navigator.clipboard.writeText(text);\n      return true;\n    } else {\n      // Fallback for older browsers\n      const textArea = document.createElement('textarea');\n      textArea.value = text;\n      textArea.style.position = 'fixed';\n      textArea.style.left = '-999999px';\n      document.body.appendChild(textArea);\n      textArea.select();\n      const success = document.execCommand('copy');\n      document.body.removeChild(textArea);\n      return success;\n    }\n  } catch (error) {\n    console.error('Failed to copy to clipboard:', error);\n    return false;\n  }\n}\n\n/**\n * Calculate time remaining from a date\n */\nexport function calculateTimeRemaining(endDate: Date | string): {\n  total: number;\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n} {\n  const end = typeof endDate === 'string' ? new Date(endDate) : endDate;\n  const now = new Date();\n  const total = end.getTime() - now.getTime();\n\n  if (total <= 0) {\n    return { total: 0, days: 0, hours: 0, minutes: 0, seconds: 0 };\n  }\n\n  return {\n    total,\n    days: Math.floor(total / (1000 * 60 * 60 * 24)),\n    hours: Math.floor((total / (1000 * 60 * 60)) % 24),\n    minutes: Math.floor((total / (1000 * 60)) % 60),\n    seconds: Math.floor((total / 1000) % 60),\n  };\n}\n\n/**\n * Format time remaining as string\n */\nexport function formatTimeRemaining(time: ReturnType<typeof calculateTimeRemaining>): string {\n  if (time.total <= 0) return '00:00:00';\n  \n  if (time.days > 0) {\n    return `${time.days}d ${time.hours}h ${time.minutes}m`;\n  }\n  \n  const hours = String(time.hours).padStart(2, '0');\n  const minutes = String(time.minutes).padStart(2, '0');\n  const seconds = String(time.seconds).padStart(2, '0');\n  \n  return `${hours}:${minutes}:${seconds}`;\n}\n\n/**\n * Check if device prefers reduced motion\n */\nexport function prefersReducedMotion(): boolean {\n  if (typeof window === 'undefined') return false;\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n\n/**\n * Debounce function\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout | null = null;\n  \n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      timeout = null;\n      func(...args);\n    };\n    \n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n", "\n                if (typeof window === \"undefined\" || !window.RevenueBoostPreact) {\n                  throw new Error(\"RevenueBoostPreact not found. Make sure main bundle is loaded first.\");\n                }\n                const options = window.RevenueBoostPreact.options || {};\n                const h = window.RevenueBoostPreact.h;\n\n                // JSX runtime factory function\n                let vnodeId = 0;\n                export function jsx(type, props, key, isStaticChildren, __source, __self) {\n                  if (!props) props = {};\n                  let normalizedProps = props;\n                  let ref;\n\n                  if ('ref' in props) {\n                    normalizedProps = {};\n                    for (let i in props) {\n                      if (i === 'ref') ref = props[i];\n                      else normalizedProps[i] = props[i];\n                    }\n                  }\n\n                  const vnode = {\n                    type,\n                    props: normalizedProps,\n                    key: key !== undefined ? key : null,\n                    ref: ref !== undefined ? ref : null,\n                    __k: null,\n                    __: null,\n                    __b: 0,\n                    __e: null,\n                    __c: null,\n                    constructor: undefined,\n                    __v: --vnodeId,\n                    __i: -1,\n                    __u: 0,\n                    __source,\n                    __self\n                  };\n\n                  if (typeof type === 'function' && (ref = type.defaultProps)) {\n                    for (let i in ref) {\n                      if (normalizedProps[i] === undefined) {\n                        normalizedProps[i] = ref[i];\n                      }\n                    }\n                  }\n\n                  if (options.vnode) options.vnode(vnode);\n                  return vnode;\n                }\n\n                export const jsxs = jsx;\n                export const jsxDEV = jsx;\n                export const createElement = h;\n                export const Fragment = window.RevenueBoostPreact.Fragment;\n              ", "/**\n * FreeShippingPopup Component\n *\n * Free shipping progress bar featuring:\n * - 4 states: empty, progress, near-miss, unlocked\n * - Dynamic icons and messaging per state\n * - Progress bar with state-based styling\n * - Celebration animation when unlocked\n * - Top/bottom positioning\n * - Dismissible with close button\n */\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport type { PopupDesignConfig, DiscountConfig as StorefrontDiscountConfig } from './types';\nimport type { FreeShippingContent } from '~/domains/campaigns/types/campaign';\nimport { debounce } from './utils';\n\nexport type ShippingBarState = \"empty\" | \"progress\" | \"near-miss\" | \"unlocked\";\n\n/**\n * FreeShippingConfig - Extends both design config AND campaign content type\n * All content fields come from FreeShippingContent\n * All design fields come from PopupDesignConfig\n */\nexport interface FreeShippingConfig extends PopupDesignConfig, FreeShippingContent {\n  // Storefront-specific fields only\n  currentCartTotal?: number;\n  discount?: StorefrontDiscountConfig;\n}\n\nexport interface FreeShippingPopupProps {\n  config: FreeShippingConfig;\n  isVisible: boolean;\n  onClose: () => void;\n  cartTotal?: number;\n  onSubmit?: (data: { email: string }) => Promise<string | undefined>;\n  issueDiscount?: (options?: { cartSubtotalCents?: number }) => Promise<{ code?: string; autoApplyMode?: string } | null>;\n}\n\nexport const FreeShippingPopup: React.FC<FreeShippingPopupProps> = ({\n  config,\n  isVisible,\n  onClose,\n  cartTotal: propCartTotal,\n  onSubmit,\n  issueDiscount,\n}) => {\n  const [cartTotal, setCartTotal] = useState<number>(propCartTotal ?? config.currentCartTotal ?? 0);\n  const threshold = config.threshold;\n  const barPosition = config.barPosition || 'top'; // Use barPosition instead of position\n  const nearMissThreshold = config.nearMissThreshold ?? 10;\n  const currency = config.currency || '$';\n  const dismissible = config.dismissible ?? true;\n  const celebrateOnUnlock = config.celebrateOnUnlock ?? true;\n  const showIcon = config.showIcon ?? true;\n  const animationDuration = config.animationDuration ?? 500;\n  const discount = config.discount as StorefrontDiscountConfig | undefined;\n  const requireEmailToClaim = (config as any).requireEmailToClaim ?? false;\n  const claimButtonLabel = (config as any).claimButtonLabel || 'Claim discount';\n  const claimEmailPlaceholder = (config as any).claimEmailPlaceholder || 'Enter your email';\n  const claimSuccessMessage = (config as any).claimSuccessMessage as string | undefined;\n  const claimErrorMessage = (config as any).claimErrorMessage as string | undefined;\n\n  const [internalDismissed, setInternalDismissed] = useState(false);\n  const [celebrating, setCelebrating] = useState(false);\n  const [isEntering, setIsEntering] = useState(false);\n  const [isExiting, setIsExiting] = useState(false);\n  const [showClaimForm, setShowClaimForm] = useState(false);\n  const [claimEmail, setClaimEmail] = useState('');\n  const [claimError, setClaimError] = useState<string | null>(null);\n  const [isClaiming, setIsClaiming] = useState(false);\n  const [hasClaimed, setHasClaimed] = useState(false);\n  const [claimedDiscountCode, setClaimedDiscountCode] = useState<string | undefined>(undefined);\n  const prevUnlockedRef = useRef(false);\n  const hasIssuedDiscountRef = useRef(false);\n  const currencyCodeRef = useRef<string | undefined>(undefined);\n  const bannerRef = useRef<HTMLDivElement>(null);\n\n  const remaining = Math.max(0, threshold - cartTotal);\n  const progress = Math.min(1, Math.max(0, cartTotal / threshold));\n\n  const state: ShippingBarState =\n    cartTotal === 0\n      ? \"empty\"\n      : remaining === 0\n        ? \"unlocked\"\n        : remaining <= nearMissThreshold\n          ? \"near-miss\"\n          : \"progress\";\n\n  const barSize = config.size || 'medium';\n\n  const barPadding =\n    barSize === 'small'\n      ? '0.75rem 1.25rem'\n      : barSize === 'large'\n      ? '1rem 2rem'\n      : '0.875rem 1.5rem';\n\n  const messageFontSize =\n    barSize === 'small'\n      ? '0.875rem'\n      : barSize === 'large'\n      ? '1rem'\n      : '0.9375rem';\n\n  const iconFontSize =\n    barSize === 'small'\n      ? '1.125rem'\n      : barSize === 'large'\n      ? '1.375rem'\n      : '1.25rem';\n\n\n  // Handle close with exit animation\n  const handleClose = () => {\n    if (!dismissible) return;\n\n    setIsExiting(true);\n    setTimeout(() => {\n      setInternalDismissed(true);\n      onClose();\n      setIsExiting(false);\n    }, 300); // Match animation duration\n  };\n\n  const formatCurrency = (value: number) => {\n    const code = currencyCodeRef.current;\n    if (code && /^[A-Z]{3}$/.test(code)) {\n      try {\n        return new Intl.NumberFormat('en-US', { style: 'currency', currency: code }).format(value);\n      } catch {\n        // Fallback below\n      }\n    }\n    return `${currency}${value.toFixed(2)}`;\n  };\n\n  // Handle enter animation on mount\n  useEffect(() => {\n    if (isVisible && !internalDismissed) {\n      setIsEntering(true);\n      const timer = setTimeout(() => setIsEntering(false), 300);\n      return () => clearTimeout(timer);\n    }\n  }, [isVisible, internalDismissed]);\n\n  // Add body padding to prevent content overlap\n  useEffect(() => {\n    if (!isVisible || internalDismissed || config.previewMode) return;\n\n    const updateBodyPadding = () => {\n      if (!bannerRef.current) return;\n\n      const height = bannerRef.current.offsetHeight;\n      if (barPosition === 'top') {\n        document.body.style.paddingTop = `${height}px`;\n      } else {\n        document.body.style.paddingBottom = `${height}px`;\n      }\n    };\n\n    // Update padding after animation completes\n    const timer = setTimeout(updateBodyPadding, 350);\n\n    return () => {\n      clearTimeout(timer);\n      document.body.style.paddingTop = '';\n      document.body.style.paddingBottom = '';\n    };\n  }, [isVisible, internalDismissed, barPosition, config.previewMode]);\n\n  // Read currency ISO from app embed if available\n  useEffect(() => {\n    try {\n      const w: any = window as any;\n      const iso = w?.REVENUE_BOOST_CONFIG?.currency;\n      if (typeof iso === 'string') {\n        currencyCodeRef.current = iso;\n      }\n    } catch {\n      // noop\n    }\n  }, []);\n\n  // Live cart updates: refresh cart total after theme cart events or cart mutations\n  useEffect(() => {\n    if (!isVisible) return;\n\n    const refresh = async () => {\n      try {\n        const res = await fetch('/cart.js', { credentials: 'same-origin' });\n        const cart = await res.json();\n        const cents = (typeof cart?.subtotal_price === 'number')\n          ? cart.subtotal_price\n          : (Number(cart?.items_subtotal_price || 0) - Number(cart?.total_discount || 0));\n        const value = Number.isFinite(cents) ? Math.max(0, cents / 100) : 0;\n        setCartTotal(value);\n      } catch {\n        // ignore network errors\n      }\n    };\n\n    const debouncedRefresh = debounce(refresh, 300);\n    const eventNames = ['cart:update','cart:change','cart:updated','theme:cart:update','cart:item-added','cart:add'];\n    eventNames.forEach((name) => document.addEventListener(name, debouncedRefresh as any));\n\n    // Always perform an initial sync from /cart.js so we include any existing cart items\n    if (!(config as any)?.previewMode) {\n      void refresh();\n    }\n\n    // Optional: intercept cart mutations via fetch (guard for double-wrapping)\n    const w: any = window as any;\n    let originalFetch: typeof window.fetch | null = null;\n    if (!w.__RB_FETCH_INTERCEPTED) {\n      try {\n        originalFetch = window.fetch.bind(window);\n        window.fetch = (async (...args: Parameters<typeof fetch>) => {\n          const [url, opts] = args;\n          const urlStr = typeof url === 'string' ? url : url?.toString?.();\n          const method = (opts as any)?.method ? String((opts as any).method).toUpperCase() : 'GET';\n          const isCartMutation = !!urlStr && urlStr.includes('/cart') && method !== 'GET';\n          const response = await (originalFetch as any)(...args);\n          if (isCartMutation) debouncedRefresh();\n          return response;\n        }) as any;\n        w.__RB_FETCH_INTERCEPTED = true;\n      } catch {\n        // ignore\n      }\n    }\n\n    return () => {\n      eventNames.forEach((name) => document.removeEventListener(name, debouncedRefresh as any));\n      try {\n        if (originalFetch) {\n          window.fetch = originalFetch;\n          w.__RB_FETCH_INTERCEPTED = false;\n        }\n      } catch (error) {\n        console.error('[FreeShippingPopup] Failed to restore fetch:', error);\n      }\n    };\n  }, [isVisible]);\n\n  // In preview mode (admin), allow external control of cart total via prop or config\n  useEffect(() => {\n    if ((config as any)?.previewMode) {\n      const next = typeof propCartTotal === 'number'\n        ? propCartTotal\n        : (typeof config.currentCartTotal === 'number' ? config.currentCartTotal : undefined);\n      if (typeof next === 'number') setCartTotal(next);\n    }\n  }, [propCartTotal, config.currentCartTotal, config]);\n\n\n  const getMessage = () => {\n    const remainingFormatted = formatCurrency(remaining);\n\n    switch (state) {\n      case \"empty\":\n        return config.emptyMessage || \"Add items to unlock free shipping\";\n      case \"unlocked\":\n        return config.unlockedMessage || \"You've unlocked free shipping! \uD83C\uDF89\";\n      case \"near-miss\":\n        return (config.nearMissMessage || \"Only {remaining} to go!\").replace(\"{remaining}\", remainingFormatted);\n      case \"progress\":\n      default:\n        return (config.progressMessage || \"You're {remaining} away from free shipping\").replace(\"{remaining}\", remainingFormatted);\n    }\n  };\n\n  const handleClaimSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    const email = claimEmail.trim();\n    if (!email) {\n      setClaimError('Please enter your email');\n      return;\n    }\n\n    setIsClaiming(true);\n    setClaimError(null);\n\n    try {\n      if (onSubmit) {\n        const code = await onSubmit({ email });\n        if (code) setClaimedDiscountCode(code);\n        setHasClaimed(true);\n        console.log('[FreeShippingPopup] Discount claim successful', {\n          email,\n          hasCode: Boolean(code),\n        });\n      } else {\n        setHasClaimed(true);\n        console.log('[FreeShippingPopup] Claim completed without onSubmit handler');\n      }\n    } catch (error) {\n      console.error('[FreeShippingPopup] Claim submission error:', error);\n      setClaimError(claimErrorMessage || 'Something went wrong. Please try again.');\n    } finally {\n      setIsClaiming(false);\n    }\n  };\n\n  // Trigger celebration animation, logging, and discount issuance when unlocking\n  useEffect(() => {\n    const isUnlocked = state === \"unlocked\";\n    const wasLocked = prevUnlockedRef.current === false;\n\n    if (isUnlocked && wasLocked) {\n      console.log('[FreeShippingPopup] Free shipping unlocked', {\n        threshold,\n        cartTotal,\n        deliveryMode: discount?.deliveryMode,\n      });\n\n      if (discount?.deliveryMode === 'auto_apply_only') {\n        console.log('[FreeShippingPopup] Auto-apply mode active for free shipping', {\n          threshold,\n          cartTotal,\n        });\n      }\n\n      // For non-email-gated flows, issue a discount code when the bar first unlocks\n      if (!requireEmailToClaim && discount && typeof issueDiscount === 'function' && !hasIssuedDiscountRef.current) {\n        hasIssuedDiscountRef.current = true;\n        const cartSubtotalCents = Math.round(cartTotal * 100);\n\n        (async () => {\n          try {\n            const result = await issueDiscount({ cartSubtotalCents });\n            if (result?.code) {\n              setClaimedDiscountCode(result.code);\n              console.log('[FreeShippingPopup] Discount code issued for free shipping', {\n                code: result.code,\n              });\n            } else if (result && !result.code) {\n              console.log('[FreeShippingPopup] Discount issued without code (possible auto-apply only mode)');\n            }\n          } catch (err) {\n            console.error('[FreeShippingPopup] Failed to issue discount code:', err);\n          }\n        })();\n      }\n    }\n\n    if (isUnlocked && wasLocked && celebrateOnUnlock) {\n      setCelebrating(true);\n      const timer = setTimeout(() => setCelebrating(false), 1000);\n      return () => clearTimeout(timer);\n    }\n\n    prevUnlockedRef.current = isUnlocked;\n  }, [state, celebrateOnUnlock, threshold, cartTotal, discount, issueDiscount, requireEmailToClaim]);\n\n  // Don't render if not visible and not animating out\n  if ((!isVisible || internalDismissed) && !isExiting) {\n    return null;\n  }\n\n  // Get progress bar color based on state\n  const getProgressColor = () => {\n    if (state === \"unlocked\") return config.accentColor || '#10B981';\n    if (state === \"near-miss\") return '#F59E0B'; // Warning color\n    return config.accentColor || '#3B82F6'; // Primary color\n  };\n\n  // Get icon based on state\n  const getIcon = () => {\n    if (!showIcon) return null;\n    switch (state) {\n      case \"unlocked\":\n        return \"\u2713\";\n      case \"near-miss\":\n        return \"\u26A1\";\n      default:\n        return \"\uD83D\uDE9A\";\n    }\n  };\n\n  return (\n    <>\n      <style>{`\n        .free-shipping-bar {\n          position: fixed;\n          left: 0;\n          right: 0;\n          width: 100%;\n          z-index: 9999;\n          font-family: ${config.fontFamily || '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif'};\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n          container-type: inline-size;\n          container-name: free-shipping;\n        }\n\n        /* Rotating celebratory border shown only while celebrating */\n        @property --rb-border-angle {\n          syntax: \"<angle>\";\n          inherits: false;\n          initial-value: 0deg;\n        }\n\n        .free-shipping-bar::before {\n          content: \"\";\n          position: absolute;\n          inset: -2px;\n          border-radius: inherit;\n          border: 2px solid transparent;\n          background:\n            linear-gradient(${config.backgroundColor || '#ffffff'}, ${config.backgroundColor || '#ffffff'}) padding-box,\n            conic-gradient(\n              from var(--rb-border-angle),\n              ${config.accentColor || '#3B82F6'},\n              #22c55e,\n              #facc15,\n              ${config.accentColor || '#3B82F6'}\n            ) border-box;\n          opacity: 0;\n          pointer-events: none;\n        }\n\n        .free-shipping-bar.celebrating::before {\n          opacity: 1;\n          animation: rotating-border 0.7s linear forwards;\n        }\n\n        @keyframes rotating-border {\n          to {\n            --rb-border-angle: 360deg;\n            opacity: 0;\n          }\n        }\n\n\n        .free-shipping-bar[data-position=\"top\"] {\n          top: 0;\n        }\n\n        .free-shipping-bar[data-position=\"bottom\"] {\n          bottom: 0;\n        }\n\n        /* Only animate slide-in on initial mount */\n        .free-shipping-bar.entering[data-position=\"top\"] {\n          animation: slideInFromTop 0.3s ease-out forwards;\n        }\n\n        .free-shipping-bar.entering[data-position=\"bottom\"] {\n          animation: slideInFromBottom 0.3s ease-out forwards;\n        }\n\n        .free-shipping-bar.exiting[data-position=\"top\"] {\n          animation: slideOutToTop 0.3s ease-in forwards;\n        }\n\n        .free-shipping-bar.exiting[data-position=\"bottom\"] {\n          animation: slideOutToBottom 0.3s ease-in forwards;\n        }\n\n        @keyframes slideInFromTop {\n          from {\n            transform: translateY(-100%);\n          }\n          to {\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes slideOutToTop {\n          from {\n            transform: translateY(0);\n          }\n          to {\n            transform: translateY(-100%);\n          }\n        }\n\n        @keyframes slideInFromBottom {\n          from {\n            transform: translateY(100%);\n          }\n          to {\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes slideOutToBottom {\n          from {\n            transform: translateY(0);\n          }\n          to {\n            transform: translateY(100%);\n          }\n        }\n\n        .free-shipping-bar-content {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          gap: 1rem;\n          padding: ${barPadding};\n          position: relative;\n          overflow: hidden;\n        }\n\n        .free-shipping-bar.celebrating {\n          /* Start bounce shortly after the rotating border animation */\n          animation: celebrate-bar 0.6s ease-in-out 0.35s;\n        }\n\n        @keyframes celebrate-bar {\n          0% {\n            transform: translateY(0) scale(1);\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n          }\n          40% {\n            transform: translateY(-3px) scale(1.02);\n            box-shadow: 0 6px 18px rgba(16, 185, 129, 0.4);\n          }\n          100% {\n            transform: translateY(0) scale(1);\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n          }\n        }\n\n        .free-shipping-bar-message {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          flex: 1;\n          z-index: 1;\n        }\n\n        .free-shipping-bar-icon {\n          font-size: ${iconFontSize};\n          line-height: 1;\n          flex-shrink: 0;\n        }\n\n        .free-shipping-bar-text {\n          font-size: ${messageFontSize};\n          font-weight: 500;\n          line-height: 1.4;\n          margin: 0;\n        }\n\n        .free-shipping-bar-discount-text {\n          font-size: 0.875rem;\n          font-weight: 500;\n          margin: 0.25rem 0 0;\n        }\n\n        .free-shipping-bar-discount-code {\n          font-weight: 600;\n        }\n\n        .free-shipping-bar-claim-container {\n          margin-top: 0.25rem;\n          display: flex;\n          flex-wrap: wrap;\n          gap: 0.5rem;\n          align-items: center;\n          justify-content: flex-end;\n        }\n\n        .free-shipping-bar-claim-input {\n          min-width: 160px;\n          padding: 0.35rem 0.5rem;\n          border-radius: 4px;\n          border: 1px solid rgba(0, 0, 0, 0.15);\n          font-size: 0.875rem;\n        }\n\n        .free-shipping-bar-claim-button {\n          padding: 0.35rem 0.75rem;\n          border-radius: 9999px;\n          border: none;\n          cursor: pointer;\n          font-size: 0.875rem;\n          font-weight: 500;\n        }\n\n        .free-shipping-bar-claim-error {\n          margin: 0.25rem 0 0;\n          font-size: 0.75rem;\n          color: #b91c1c;\n        }\n\n        .free-shipping-bar-close {\n          background: transparent;\n          border: none;\n          cursor: pointer;\n          padding: 0.25rem;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          opacity: 0.6;\n          transition: opacity 0.2s;\n          z-index: 1;\n          flex-shrink: 0;\n        }\n\n        .free-shipping-bar-close:hover {\n          opacity: 1;\n        }\n\n        .free-shipping-bar-close:focus {\n          outline: 2px solid currentColor;\n          outline-offset: 2px;\n          opacity: 1;\n        }\n\n        .free-shipping-bar-dismiss {\n          margin-left: 0.75rem;\n          padding: 0;\n          border: none;\n          background: transparent;\n          color: inherit;\n          cursor: pointer;\n          text-decoration: underline;\n          font-size: 0.8125rem;\n          white-space: nowrap;\n          opacity: 0.9;\n          transition: opacity 0.15s ease-out;\n        }\n\n        .free-shipping-bar-dismiss:hover {\n          opacity: 1;\n        }\n\n        .free-shipping-bar-dismiss:focus {\n          outline: 2px solid currentColor;\n          outline-offset: 2px;\n        }\n\n        .free-shipping-bar-progress {\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: 0;\n          background: var(--shipping-bar-progress-bg);\n          transition: width ${animationDuration}ms ease-out;\n          z-index: 0;\n          transform-origin: left center;\n        }\n\n        /* When unlocked, play a subtle progress \"finish\" animation before the bar bounces */\n        .free-shipping-bar[data-state=\"unlocked\"] .free-shipping-bar-progress {\n          animation: ${celebrating ? \"celebrate-progress 0.45s ease-out forwards\" : \"none\"};\n        }\n\n        @keyframes celebrate-progress {\n          0% {\n            transform: scaleX(0.96);\n            opacity: 0.18;\n          }\n          70% {\n            transform: scaleX(1.03);\n            opacity: 0.22;\n          }\n          100% {\n            transform: scaleX(1);\n            opacity: 0.2;\n          }\n        }\n\n        @media (prefers-reduced-motion: reduce) {\n          .free-shipping-bar,\n          .free-shipping-bar-progress {\n            transition: none;\n          }\n\n          .free-shipping-bar.celebrating,\n          .free-shipping-bar.celebrating::before {\n            animation: none !important;\n            opacity: 0;\n          }\n\n          .free-shipping-bar.entering[data-position=\"top\"],\n          .free-shipping-bar.entering[data-position=\"bottom\"],\n          .free-shipping-bar.celebrating {\n            animation: none !important;\n          }\n\n          .free-shipping-bar[data-state=\"unlocked\"] .free-shipping-bar-progress {\n            animation: none;\n          }\n        }\n\n        /* Container query for preview/device-based responsiveness */\n        @container free-shipping (max-width: 640px) {\n          .free-shipping-bar-content {\n            padding: 0.75rem 1rem;\n            gap: 0.75rem;\n          }\n\n          .free-shipping-bar-text {\n            font-size: 0.875rem;\n          }\n\n          .free-shipping-bar-icon {\n            font-size: 1.125rem;\n          }\n        }\n\n        @media (max-width: 640px) {\n          .free-shipping-bar-content {\n            padding: 0.75rem 1rem;\n            gap: 0.75rem;\n          }\n\n          .free-shipping-bar-text {\n            font-size: 0.875rem;\n          }\n\n          .free-shipping-bar-icon {\n            font-size: 1.125rem;\n          }\n        }\n      `}</style>\n\n      <div\n        ref={bannerRef}\n        className={`free-shipping-bar ${isEntering ? 'entering' : ''} ${isExiting ? 'exiting' : ''} ${celebrating ? 'celebrating' : ''}`}\n        data-position={barPosition}\n        data-state={state}\n        role=\"region\"\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n        style={{\n          position: (config as any)?.previewMode ? 'absolute' : undefined,\n          background: config.backgroundColor || '#ffffff',\n          color: config.textColor || '#111827',\n          ['--shipping-bar-progress-bg' as any]: getProgressColor(),\n        }}\n      >\n        <div\n          className=\"free-shipping-bar-progress\"\n          style={{\n            width: `${progress * 100}%`,\n            opacity: state === \"empty\" ? 0 : state === \"unlocked\" ? 0.2 : 0.15,\n          }}\n        />\n\n        <div className=\"free-shipping-bar-content\">\n          <div className=\"free-shipping-bar-message\">\n            {showIcon && (\n              <span className=\"free-shipping-bar-icon\" aria-hidden=\"true\">\n                {getIcon()}\n              </span>\n            )}\n            <p className=\"free-shipping-bar-text\">{getMessage()}</p>\n\n            {state === \"unlocked\" && requireEmailToClaim && !hasClaimed && (\n              <div className=\"free-shipping-bar-claim-container\">\n                {!showClaimForm && (\n                  <button\n                    type=\"button\"\n                    className=\"free-shipping-bar-claim-button\"\n                    onClick={() => setShowClaimForm(true)}\n                    style={{ background: config.buttonColor || '#111827', color: config.buttonTextColor || '#ffffff' }}\n                  >\n                    {claimButtonLabel}\n                  </button>\n                )}\n\n                {showClaimForm && (\n                  <form className=\"free-shipping-bar-claim-container\" onSubmit={handleClaimSubmit}>\n                    <input\n                      type=\"email\"\n                      className=\"free-shipping-bar-claim-input\"\n                      value={claimEmail}\n                      onChange={(e) => setClaimEmail(e.target.value)}\n                      placeholder={claimEmailPlaceholder}\n                    />\n                    <button\n                      type=\"submit\"\n                      className=\"free-shipping-bar-claim-button\"\n                      disabled={isClaiming}\n                      style={{ background: config.buttonColor || '#111827', color: config.buttonTextColor || '#ffffff' }}\n                    >\n                      {isClaiming ? 'Claiming...' : claimButtonLabel}\n                    </button>\n                  </form>\n                )}\n\n                {claimError && (\n                  <p className=\"free-shipping-bar-claim-error\">{claimError}</p>\n                )}\n              </div>\n            )}\n\n            {state === \"unlocked\" && discount && (!requireEmailToClaim || hasClaimed) && (\n              discount.deliveryMode === 'auto_apply_only' ? (\n                <p className=\"free-shipping-bar-discount-text\">\n                  Free shipping will be applied automatically at checkout.\n                </p>\n              ) : (claimedDiscountCode || discount.code) ? (\n                <p className=\"free-shipping-bar-discount-text\">\n                  <>Use code <span className=\"free-shipping-bar-discount-code\">{claimedDiscountCode || discount.code}</span> at checkout.</>\n                </p>\n              ) : null\n            )}\n\n            {state === \"unlocked\" && hasClaimed && claimSuccessMessage && (\n              <p className=\"free-shipping-bar-discount-text\">{claimSuccessMessage}</p>\n            )}\n\n            {dismissible && (\n              <button\n                type=\"button\"\n                className=\"free-shipping-bar-dismiss\"\n                onClick={handleClose}\n              >\n                {config.dismissLabel || 'No thanks'}\n              </button>\n            )}\n          </div>\n\n          {dismissible && (\n            <button\n              className=\"free-shipping-bar-close\"\n              onClick={handleClose}\n              aria-label=\"Dismiss shipping bar\"\n              style={{ color: config.textColor || '#111827' }}\n            >\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M15 5L5 15M5 5L15 15\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n              </svg>\n            </button>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\n", "/**\n * Free Shipping Popup Bundle\n */\n\nimport { FreeShippingPopup } from \"../../../app/domains/storefront/popups-new/FreeShippingPopup\";\n\n(function register() {\n  const g = window as unknown as { RevenueBoostComponents?: Record<string, unknown>; console?: Console };\n  g.RevenueBoostComponents = g.RevenueBoostComponents || {};\n  g.RevenueBoostComponents[\"FREE_SHIPPING\"] = FreeShippingPopup;\n\n  if (typeof g.console?.debug === \"function\") {\n    console.debug(\"[Revenue Boost] Free Shipping popup registered\");\n  }\n})();\n\n"],
  "mappings": "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",
  "names": ["h", "Fragment", "Fragment"]
}

{
  "version": 3,
  "sources": ["global-preact:global-preact:react", "../../../app/domains/storefront/popups-new/utils.ts", "global-preact:global-preact:preact/jsx-runtime", "../../../app/domains/storefront/popups-new/BasePopup.tsx", "../../../app/domains/storefront/popups-new/ScratchCardPopup.tsx", "../../storefront-src/bundles/scratch-card.ts"],
  "sourcesContent": ["\n                if (typeof window === \"undefined\" || !window.RevenueBoostPreact) {\n                  throw new Error(\"RevenueBoostPreact not found. Make sure main bundle is loaded first.\");\n                }\n                const { h, Component, Fragment, render, createPortal } = window.RevenueBoostPreact;\n                const { useState, useEffect, useCallback, useRef, useMemo } = window.RevenueBoostPreact.hooks;\n                export { h, Component, Fragment, render, createPortal, useState, useEffect, useCallback, useRef, useMemo };\n                export default { h, Component, Fragment, render, createPortal, useState, useEffect, useCallback, useRef, useMemo };\n              ", "/**\n * Utility Functions for Storefront Popup Components\n * \n * Shared helper functions used across popup components\n */\n\nimport type { PopupSize, PopupPosition, PopupAnimation } from './types';\n\n/**\n * Get size dimensions based on size prop\n * In preview mode, use smaller percentages to show relative size on screen\n */\nexport function getSizeDimensions(size: PopupSize, previewMode?: boolean): { width: string; maxWidth: string } {\n  if (previewMode) {\n    // In preview mode, use percentages to show relative screen coverage\n    switch (size) {\n      case 'small':\n        return { width: '50%', maxWidth: '400px' };\n      case 'medium':\n        return { width: '65%', maxWidth: '600px' };\n      case 'large':\n        return { width: '80%', maxWidth: '900px' };\n      default:\n        return { width: '65%', maxWidth: '600px' };\n    }\n  }\n\n  // Production mode - use full responsive widths\n  switch (size) {\n    case 'small':\n      return { width: '90%', maxWidth: '400px' };\n    case 'medium':\n      return { width: '90%', maxWidth: '600px' };\n    case 'large':\n      return { width: '90%', maxWidth: '900px' };\n    default:\n      return { width: '90%', maxWidth: '600px' };\n  }\n}\n\n/**\n * Get position styles based on position prop\n */\nexport function getPositionStyles(position: PopupPosition): React.CSSProperties {\n  const baseStyles: React.CSSProperties = {\n    position: 'fixed',\n    zIndex: 10000,\n  };\n\n  switch (position) {\n    case 'center':\n      return {\n        ...baseStyles,\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n      };\n    case 'top':\n      return {\n        ...baseStyles,\n        top: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n      };\n    case 'bottom':\n      return {\n        ...baseStyles,\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n      };\n    case 'left':\n      return {\n        ...baseStyles,\n        top: '50%',\n        left: '20px',\n        transform: 'translateY(-50%)',\n      };\n    case 'right':\n      return {\n        ...baseStyles,\n        top: '50%',\n        right: '20px',\n        transform: 'translateY(-50%)',\n      };\n    default:\n      return {\n        ...baseStyles,\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n      };\n  }\n}\n\n/**\n * Get animation class name based on animation type\n */\nexport function getAnimationClass(animation: PopupAnimation, isExiting: boolean = false): string {\n  if (animation === 'none') return '';\n  \n  const prefix = isExiting ? 'popup-exit' : 'popup-enter';\n  return `${prefix}-${animation}`;\n}\n\n/**\n * Get animation keyframes CSS\n */\nexport function getAnimationKeyframes(): string {\n  return `\n    @keyframes popup-enter-fade {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n    \n    @keyframes popup-exit-fade {\n      from { opacity: 1; }\n      to { opacity: 0; }\n    }\n    \n    @keyframes popup-enter-slide {\n      from { \n        opacity: 0;\n        transform: translate(-50%, -60%);\n      }\n      to { \n        opacity: 1;\n        transform: translate(-50%, -50%);\n      }\n    }\n    \n    @keyframes popup-exit-slide {\n      from { \n        opacity: 1;\n        transform: translate(-50%, -50%);\n      }\n      to { \n        opacity: 0;\n        transform: translate(-50%, -60%);\n      }\n    }\n    \n    @keyframes popup-enter-bounce {\n      0% { \n        opacity: 0;\n        transform: translate(-50%, -50%) scale(0.3);\n      }\n      50% { \n        transform: translate(-50%, -50%) scale(1.05);\n      }\n      70% { \n        transform: translate(-50%, -50%) scale(0.9);\n      }\n      100% { \n        opacity: 1;\n        transform: translate(-50%, -50%) scale(1);\n      }\n    }\n    \n    @keyframes popup-exit-bounce {\n      from { \n        opacity: 1;\n        transform: translate(-50%, -50%) scale(1);\n      }\n      to { \n        opacity: 0;\n        transform: translate(-50%, -50%) scale(0.3);\n      }\n    }\n    \n    .popup-enter-fade { animation: popup-enter-fade 0.3s ease-out; }\n    .popup-exit-fade { animation: popup-exit-fade 0.3s ease-in; }\n    .popup-enter-slide { animation: popup-enter-slide 0.3s ease-out; }\n    .popup-exit-slide { animation: popup-exit-slide 0.3s ease-in; }\n    .popup-enter-bounce { animation: popup-enter-bounce 0.5s ease-out; }\n    .popup-exit-bounce { animation: popup-exit-bounce 0.3s ease-in; }\n    \n    @media (prefers-reduced-motion: reduce) {\n      .popup-enter-fade,\n      .popup-enter-slide,\n      .popup-enter-bounce,\n      .popup-exit-fade,\n      .popup-exit-slide,\n      .popup-exit-bounce {\n        animation: none !important;\n      }\n    }\n  `;\n}\n\n/**\n * Validate email address\n */\nexport function validateEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Format currency\n */\nexport function formatCurrency(amount: number | string, currency: string = 'USD'): string {\n  const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount;\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n  }).format(numAmount);\n}\n\n/**\n * Copy text to clipboard\n */\nexport async function copyToClipboard(text: string): Promise<boolean> {\n  try {\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      await navigator.clipboard.writeText(text);\n      return true;\n    } else {\n      // Fallback for older browsers\n      const textArea = document.createElement('textarea');\n      textArea.value = text;\n      textArea.style.position = 'fixed';\n      textArea.style.left = '-999999px';\n      document.body.appendChild(textArea);\n      textArea.select();\n      const success = document.execCommand('copy');\n      document.body.removeChild(textArea);\n      return success;\n    }\n  } catch (error) {\n    console.error('Failed to copy to clipboard:', error);\n    return false;\n  }\n}\n\n/**\n * Calculate time remaining from a date\n */\nexport function calculateTimeRemaining(endDate: Date | string): {\n  total: number;\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n} {\n  const end = typeof endDate === 'string' ? new Date(endDate) : endDate;\n  const now = new Date();\n  const total = end.getTime() - now.getTime();\n\n  if (total <= 0) {\n    return { total: 0, days: 0, hours: 0, minutes: 0, seconds: 0 };\n  }\n\n  return {\n    total,\n    days: Math.floor(total / (1000 * 60 * 60 * 24)),\n    hours: Math.floor((total / (1000 * 60 * 60)) % 24),\n    minutes: Math.floor((total / (1000 * 60)) % 60),\n    seconds: Math.floor((total / 1000) % 60),\n  };\n}\n\n/**\n * Format time remaining as string\n */\nexport function formatTimeRemaining(time: ReturnType<typeof calculateTimeRemaining>): string {\n  if (time.total <= 0) return '00:00:00';\n  \n  if (time.days > 0) {\n    return `${time.days}d ${time.hours}h ${time.minutes}m`;\n  }\n  \n  const hours = String(time.hours).padStart(2, '0');\n  const minutes = String(time.minutes).padStart(2, '0');\n  const seconds = String(time.seconds).padStart(2, '0');\n  \n  return `${hours}:${minutes}:${seconds}`;\n}\n\n/**\n * Check if device prefers reduced motion\n */\nexport function prefersReducedMotion(): boolean {\n  if (typeof window === 'undefined') return false;\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n\n/**\n * Debounce function\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout | null = null;\n  \n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      timeout = null;\n      func(...args);\n    };\n    \n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n", "\n                if (typeof window === \"undefined\" || !window.RevenueBoostPreact) {\n                  throw new Error(\"RevenueBoostPreact not found. Make sure main bundle is loaded first.\");\n                }\n                const options = window.RevenueBoostPreact.options || {};\n                const h = window.RevenueBoostPreact.h;\n\n                // JSX runtime factory function\n                let vnodeId = 0;\n                export function jsx(type, props, key, isStaticChildren, __source, __self) {\n                  if (!props) props = {};\n                  let normalizedProps = props;\n                  let ref;\n\n                  if ('ref' in props) {\n                    normalizedProps = {};\n                    for (let i in props) {\n                      if (i === 'ref') ref = props[i];\n                      else normalizedProps[i] = props[i];\n                    }\n                  }\n\n                  const vnode = {\n                    type,\n                    props: normalizedProps,\n                    key: key !== undefined ? key : null,\n                    ref: ref !== undefined ? ref : null,\n                    __k: null,\n                    __: null,\n                    __b: 0,\n                    __e: null,\n                    __c: null,\n                    constructor: undefined,\n                    __v: --vnodeId,\n                    __i: -1,\n                    __u: 0,\n                    __source,\n                    __self\n                  };\n\n                  if (typeof type === 'function' && (ref = type.defaultProps)) {\n                    for (let i in ref) {\n                      if (normalizedProps[i] === undefined) {\n                        normalizedProps[i] = ref[i];\n                      }\n                    }\n                  }\n\n                  if (options.vnode) options.vnode(vnode);\n                  return vnode;\n                }\n\n                export const jsxs = jsx;\n                export const jsxDEV = jsx;\n                export const createElement = h;\n                export const Fragment = window.RevenueBoostPreact.Fragment;\n              ", "/**\n * BasePopup Component\n *\n * Provides common functionality for all popup components including:\n * - Overlay display and portal rendering\n * - Close button and keyboard navigation\n * - Position and size logic\n * - Animation wrapper\n * - Focus management and accessibility\n */\n\nimport React, { useEffect, useCallback, useRef, useState } from 'react';\nimport type { BasePopupProps } from './types';\nimport {\n  getPositionStyles,\n  getSizeDimensions,\n  getAnimationClass,\n  getAnimationKeyframes,\n  prefersReducedMotion\n} from './utils';\n\nexport const BasePopup: React.FC<BasePopupProps> = ({\n  config,\n  isVisible,\n  onClose,\n  children,\n  className = '',\n}) => {\n  const [isExiting, setIsExiting] = useState(false);\n  const popupRef = useRef<HTMLDivElement>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  // Handle close with animation\n  const handleClose = useCallback(() => {\n    if (config.animation && config.animation !== 'none' && !prefersReducedMotion()) {\n      setIsExiting(true);\n      setTimeout(() => {\n        onClose();\n        setIsExiting(false);\n      }, 300);\n    } else {\n      onClose();\n    }\n  }, [config.animation, onClose]);\n\n  // Handle ESC key press\n  const handleEscapeKey = useCallback((event: KeyboardEvent) => {\n    if (event.key === 'Escape' && config.closeOnEscape !== false) {\n      handleClose();\n    }\n  }, [config.closeOnEscape, handleClose]);\n\n  // Handle overlay click\n  const handleOverlayClick = useCallback((event: React.MouseEvent<HTMLDivElement>) => {\n    if (event.target === event.currentTarget && config.closeOnOverlayClick !== false) {\n      handleClose();\n    }\n  }, [config.closeOnOverlayClick, handleClose]);\n\n  // Setup keyboard listener\n  useEffect(() => {\n    if (isVisible) {\n      document.addEventListener('keydown', handleEscapeKey);\n      return () => document.removeEventListener('keydown', handleEscapeKey);\n    }\n  }, [isVisible, handleEscapeKey]);\n\n  // Focus management\n  useEffect(() => {\n    if (isVisible) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      setTimeout(() => popupRef.current?.focus(), 100);\n    } else if (previousFocusRef.current) {\n      previousFocusRef.current.focus();\n    }\n  }, [isVisible]);\n\n  // Auto-close timer\n  useEffect(() => {\n    if (isVisible && config.autoCloseDelay && config.autoCloseDelay > 0) {\n      const timer = setTimeout(handleClose, config.autoCloseDelay * 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [isVisible, config.autoCloseDelay, handleClose]);\n\n  if (!isVisible && !isExiting) return null;\n\n  const sizeDimensions = getSizeDimensions(config.size, config.previewMode);\n  const positionStyles = getPositionStyles(config.position);\n  const animationClass = getAnimationClass(config.animation || 'fade', isExiting);\n\n  const overlayStyles: React.CSSProperties = {\n    position: config.previewMode ? 'absolute' : 'fixed', // Use absolute in preview to stay within container\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: config.overlayColor || 'rgba(0, 0, 0, 0.5)',\n    opacity: config.overlayOpacity ?? 1,\n    zIndex: config.previewMode ? 1 : 9999, // Lower z-index in preview mode\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  };\n\n  const popupStyles: React.CSSProperties = {\n    ...positionStyles,\n    width: config.maxWidth || sizeDimensions.width,\n    maxWidth: config.maxWidth || sizeDimensions.maxWidth,\n    backgroundColor: config.backgroundColor,\n    color: config.textColor,\n    borderRadius: `${config.borderRadius ?? 8}px`,\n    padding: config.padding ?? '24px',\n    boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n    outline: 'none',\n    maxHeight: config.previewMode ? '85%' : '90vh', // Use percentage in preview mode\n    overflowY: 'auto',\n  };\n\n  const closeButtonStyles: React.CSSProperties = {\n    position: 'absolute',\n    top: '12px',\n    right: '12px',\n    background: 'transparent',\n    border: 'none',\n    fontSize: '24px',\n    cursor: 'pointer',\n    color: config.textColor,\n    opacity: 0.6,\n    transition: 'opacity 0.2s',\n    padding: '4px 8px',\n    lineHeight: 1,\n  };\n\n  return (\n    <>\n      <style>{getAnimationKeyframes()}</style>\n      <div style={overlayStyles} onClick={handleOverlayClick} role=\"presentation\" data-testid=\"popup-overlay\">\n        <div\n          ref={popupRef}\n          className={`${className} ${animationClass}`.trim()}\n          style={popupStyles}\n          role=\"dialog\"\n          data-testid=\"popup-container\"\n          aria-modal=\"true\"\n          aria-label={config.ariaLabel || config.headline}\n          aria-describedby={config.ariaDescribedBy}\n          tabIndex={-1}\n        >\n          {config.showCloseButton !== false && (\n            <button\n              onClick={handleClose}\n              style={closeButtonStyles}\n              aria-label=\"Close popup\"\n              data-testid=\"popup-close\"\n              onMouseEnter={(e) => e.currentTarget.style.opacity = '1'}\n              onMouseLeave={(e) => e.currentTarget.style.opacity = '0.6'}\n            >\n              \u00D7\n            </button>\n          )}\n          {children}\n        </div>\n      </div>\n    </>\n  );\n};\n\n", "/**\n * ScratchCardPopup Component\n *\n * Interactive scratch card popup featuring:\n * - HTML5 Canvas-based scratch interaction\n * - Touch and mouse support\n * - Scratch percentage tracking\n * - Email capture (before or after scratching)\n * - Prize reveal with confetti effect\n * - Configurable scratch threshold and brush radius\n * - Copy discount code functionality\n */\n\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { BasePopup } from './BasePopup';\nimport type { PopupDesignConfig, Prize } from './types';\nimport type { ScratchCardContent } from '~/domains/campaigns/types/campaign';\nimport { validateEmail, copyToClipboard } from './utils';\n\n/**\n * ScratchCardConfig - Extends both design config AND campaign content type\n * All content fields come from ScratchCardContent\n * All design fields come from PopupDesignConfig\n */\nexport interface ScratchCardConfig extends PopupDesignConfig, ScratchCardContent {\n  // Storefront-specific fields only\n  scratchCardWidth?: number;\n  scratchCardHeight?: number;\n  scratchCardBackgroundColor?: string;\n  scratchCardTextColor?: string;\n  scratchOverlayColor?: string;\n  scratchOverlayImage?: string;\n  loadingText?: string;\n\n  // Note: prizes, emailRequired, emailPlaceholder, scratchThreshold, etc.\n  // all come from ScratchCardContent\n}\n\nexport interface ScratchCardPopupProps {\n  config: ScratchCardConfig;\n  isVisible: boolean;\n  onClose: () => void;\n  onSubmit?: (email: string) => Promise<void>;\n  onReveal?: (prize: Prize) => void;\n}\n\nexport const ScratchCardPopup: React.FC<ScratchCardPopupProps> = ({\n  config,\n  isVisible,\n  onClose,\n  onSubmit,\n  onReveal,\n}) => {\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [emailSubmitted, setEmailSubmitted] = useState(false);\n  const [isScratching, setIsScratching] = useState(false);\n  const [scratchPercentage, setScratchPercentage] = useState(0);\n  const [isRevealed, setIsRevealed] = useState(false);\n  const [wonPrize, setWonPrize] = useState<Prize | null>(null);\n  const [copiedCode, setCopiedCode] = useState(false);\n\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const prizeCanvasRef = useRef<HTMLCanvasElement>(null);\n  const isDrawingRef = useRef(false);\n\n  const cardWidth = config.scratchCardWidth || 300;\n  const cardHeight = config.scratchCardHeight || 200;\n  const threshold = config.scratchThreshold || 50;\n  const brushRadius = config.scratchRadius || 20;\n\n  // Select prize based on weighted probability\n  const selectPrize = useCallback((): Prize => {\n    const prizes = config.prizes || [];\n    const totalProbability = prizes.reduce((sum, p) => sum + p.probability, 0);\n    let random = Math.random() * totalProbability;\n\n    for (const prize of prizes) {\n      random -= prize.probability;\n      if (random <= 0) {\n        return prize;\n      }\n    }\n\n    return prizes[0];\n  }, [config.prizes]);\n\n  // Initialize canvases\n  useEffect(() => {\n    if (!canvasRef.current || !prizeCanvasRef.current) return;\n    if (!emailSubmitted && config.emailBeforeScratching) return;\n\n    const canvas = canvasRef.current;\n    const prizeCanvas = prizeCanvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const prizeCtx = prizeCanvas.getContext('2d');\n\n    if (!ctx || !prizeCtx) return;\n\n    // Draw prize on hidden canvas\n    const prize = selectPrize();\n    setWonPrize(prize);\n\n    prizeCtx.fillStyle = config.scratchCardBackgroundColor || '#FFFFFF';\n    prizeCtx.fillRect(0, 0, cardWidth, cardHeight);\n    prizeCtx.fillStyle = config.scratchCardTextColor || '#000000';\n    prizeCtx.font = 'bold 32px Arial';\n    prizeCtx.textAlign = 'center';\n    prizeCtx.textBaseline = 'middle';\n    prizeCtx.fillText(prize.label, cardWidth / 2, cardHeight / 2);\n\n    // Draw scratch overlay\n    ctx.fillStyle = config.scratchOverlayColor || '#C0C0C0';\n    ctx.fillRect(0, 0, cardWidth, cardHeight);\n\n    // Add text to overlay\n    ctx.fillStyle = '#FFFFFF';\n    ctx.font = 'bold 18px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(config.scratchInstruction || 'Scratch to reveal!', cardWidth / 2, cardHeight / 2);\n\n    // Set composite operation for erasing\n    ctx.globalCompositeOperation = 'destination-out';\n  }, [emailSubmitted, config, cardWidth, cardHeight, selectPrize]);\n\n  // Calculate scratch percentage\n  const calculateScratchPercentage = useCallback(() => {\n    if (!canvasRef.current) return 0;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return 0;\n\n    const imageData = ctx.getImageData(0, 0, cardWidth, cardHeight);\n    const pixels = imageData.data;\n    let transparentPixels = 0;\n\n    for (let i = 3; i < pixels.length; i += 4) {\n      if (pixels[i] < 128) {\n        transparentPixels++;\n      }\n    }\n\n    return (transparentPixels / (cardWidth * cardHeight)) * 100;\n  }, [cardWidth, cardHeight]);\n\n  // Scratch function\n  const scratch = useCallback((x: number, y: number) => {\n    if (!canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    ctx.beginPath();\n    ctx.arc(x, y, brushRadius, 0, 2 * Math.PI);\n    ctx.fill();\n\n    // Check scratch percentage\n    const percentage = calculateScratchPercentage();\n    setScratchPercentage(percentage);\n\n    if (percentage >= threshold && !isRevealed) {\n      setIsRevealed(true);\n      if (wonPrize && onReveal) {\n        onReveal(wonPrize);\n      }\n    }\n  }, [brushRadius, calculateScratchPercentage, threshold, isRevealed, wonPrize, onReveal]);\n\n  // Mouse/touch event handlers\n  const getCoordinates = (e: React.MouseEvent | React.TouchEvent): { x: number; y: number } | null => {\n    if (!canvasRef.current) return null;\n\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n\n    let clientX: number, clientY: number;\n\n    if ('touches' in e) {\n      if (e.touches.length === 0) return null;\n      clientX = e.touches[0].clientX;\n      clientY = e.touches[0].clientY;\n    } else {\n      clientX = e.clientX;\n      clientY = e.clientY;\n    }\n\n    return {\n      x: clientX - rect.left,\n      y: clientY - rect.top,\n    };\n  };\n\n  const handleStart = (e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    isDrawingRef.current = true;\n    setIsScratching(true);\n\n    const coords = getCoordinates(e);\n    if (coords) {\n      scratch(coords.x, coords.y);\n    }\n  };\n\n  const handleMove = (e: React.MouseEvent | React.TouchEvent) => {\n    if (!isDrawingRef.current) return;\n    e.preventDefault();\n\n    const coords = getCoordinates(e);\n    if (coords) {\n      scratch(coords.x, coords.y);\n    }\n  };\n\n  const handleEnd = () => {\n    isDrawingRef.current = false;\n    setIsScratching(false);\n  };\n\n  // Typed event wrappers for canvas to satisfy React's specific handler types\n  const handleMouseStart = (e: React.MouseEvent<HTMLCanvasElement>) => handleStart(e as unknown as React.MouseEvent<Element>);\n  const handleMouseMove = (e: React.MouseEvent<HTMLCanvasElement>) => handleMove(e as unknown as React.MouseEvent<Element>);\n  const handleMouseEnd = (_e: React.MouseEvent<HTMLCanvasElement>) => handleEnd();\n  const handleTouchStart = (e: React.TouchEvent<HTMLCanvasElement>) => handleStart(e as unknown as React.TouchEvent<Element>);\n  const handleTouchMove = (e: React.TouchEvent<HTMLCanvasElement>) => handleMove(e as unknown as React.TouchEvent<Element>);\n  const handleTouchEnd = (_e: React.TouchEvent<HTMLCanvasElement>) => handleEnd();\n\n\n  const handleEmailSubmit: React.FormEventHandler<HTMLFormElement> = useCallback(async (e) => {\n    e.preventDefault();\n\n    if (!validateEmail(email)) {\n      setEmailError('Please enter a valid email address');\n      return;\n    }\n\n    setEmailError('');\n\n    try {\n      if (!config.previewMode && onSubmit) {\n        await onSubmit(email);\n      }\n      setEmailSubmitted(true);\n    } catch (error) {\n      setEmailError('Something went wrong. Please try again.');\n    }\n  }, [email, config.previewMode, onSubmit]);\n\n  const handleCopyCode = useCallback(async () => {\n    if (wonPrize?.discountCode) {\n      const success = await copyToClipboard(wonPrize.discountCode);\n      if (success) {\n        setCopiedCode(true);\n        setTimeout(() => setCopiedCode(false), 2000);\n      }\n    }\n  }, [wonPrize]);\n\n  const inputStyles: React.CSSProperties = {\n    width: '100%',\n    padding: '12px 16px',\n    fontSize: '16px',\n    border: `1px solid ${config.inputBorderColor || '#D1D5DB'}`,\n    borderRadius: `${config.borderRadius ?? 8}px`,\n    backgroundColor: config.inputBackgroundColor || '#FFFFFF',\n    color: config.inputTextColor || '#1F2937',\n    outline: 'none',\n  };\n\n  const buttonStyles: React.CSSProperties = {\n    width: '100%',\n    padding: '14px 24px',\n    fontSize: '16px',\n    fontWeight: 600,\n    border: 'none',\n    borderRadius: `${config.borderRadius ?? 8}px`,\n    backgroundColor: config.buttonColor,\n    color: config.buttonTextColor,\n    cursor: 'pointer',\n  };\n\n  const showEmailForm = config.emailRequired && config.emailBeforeScratching && !emailSubmitted;\n  const showScratchCard = !showEmailForm;\n\n  return (\n    <BasePopup config={config} isVisible={isVisible} onClose={onClose}>\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '20px', alignItems: 'center' }}>\n        {/* Headline */}\n        <div style={{ textAlign: 'center' }}>\n          <h2 style={{ fontSize: '28px', fontWeight: 700, margin: '0 0 8px 0' }}>\n            {config.headline}\n          </h2>\n          {config.subheadline && (\n            <p style={{ fontSize: '16px', margin: 0, opacity: 0.8 }}>\n              {config.subheadline}\n            </p>\n          )}\n        </div>\n\n        {showEmailForm ? (\n          // Email form\n          <form onSubmit={handleEmailSubmit} style={{ width: '100%', maxWidth: '400px', display: 'flex', flexDirection: 'column', gap: '16px' }}>\n            <div>\n              {config.emailLabel && (\n                <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', fontWeight: 600 }}>\n                  {config.emailLabel}\n                </label>\n              )}\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder={config.emailPlaceholder || 'Enter your email'}\n                style={inputStyles}\n                required\n              />\n              {emailError && (\n                <p style={{ color: '#EF4444', fontSize: '14px', margin: '6px 0 0 0' }}>\n                  {emailError}\n                </p>\n              )}\n            </div>\n            <button type=\"submit\" style={buttonStyles}>\n              {config.buttonText || 'Continue'}\n            </button>\n          </form>\n        ) : showScratchCard && (\n          // Scratch card\n          <>\n            <div style={{ position: 'relative', width: cardWidth, height: cardHeight, borderRadius: '12px', overflow: 'hidden', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' }}>\n              {/* Prize canvas (hidden) */}\n              <canvas\n                ref={prizeCanvasRef}\n                width={cardWidth}\n                height={cardHeight}\n                style={{ position: 'absolute', top: 0, left: 0 }}\n              />\n\n              {/* Scratch overlay canvas */}\n              <canvas\n                ref={canvasRef}\n                width={cardWidth}\n                height={cardHeight}\n                onMouseDown={handleMouseStart}\n                onMouseMove={handleMouseMove}\n                onMouseUp={handleMouseEnd}\n                onMouseLeave={handleMouseEnd}\n                onTouchStart={handleTouchStart}\n                onTouchMove={handleTouchMove}\n                onTouchEnd={handleTouchEnd}\n                style={{\n                  position: 'absolute',\n                  top: 0,\n                  left: 0,\n                  cursor: isScratching ? 'grabbing' : 'grab',\n                  touchAction: 'none',\n                }}\n              />\n            </div>\n\n            {/* Progress indicator */}\n            {scratchPercentage > 0 && scratchPercentage < threshold && (\n              <div style={{ width: '100%', maxWidth: cardWidth }}>\n                <div style={{\n                  height: '8px',\n                  backgroundColor: '#E5E7EB',\n                  borderRadius: '4px',\n                  overflow: 'hidden'\n                }}>\n                  <div style={{\n                    height: '100%',\n                    width: `${scratchPercentage}%`,\n                    backgroundColor: config.accentColor || config.buttonColor,\n                    transition: 'width 0.3s',\n                  }} />\n                </div>\n                <p style={{ fontSize: '12px', textAlign: 'center', margin: '4px 0 0 0', opacity: 0.7 }}>\n                  {Math.round(scratchPercentage)}% scratched\n                </p>\n              </div>\n            )}\n\n            {/* Prize reveal */}\n            {isRevealed && wonPrize?.discountCode && (\n              <div style={{ marginTop: '16px', padding: '20px', backgroundColor: config.accentColor || '#F3F4F6', borderRadius: '12px', width: '100%', maxWidth: '400px' }}>\n                <p style={{ fontSize: '14px', margin: '0 0 12px 0', textAlign: 'center', opacity: 0.8 }}>\n                  {config.successMessage || 'Congratulations! Your discount code:'}\n                </p>\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '12px', flexWrap: 'wrap' }}>\n                  <code style={{\n                    fontSize: '24px',\n                    fontWeight: 700,\n                    padding: '10px 20px',\n                    backgroundColor: config.backgroundColor,\n                    borderRadius: '8px',\n                    letterSpacing: '2px'\n                  }}>\n                    {wonPrize.discountCode}\n                  </code>\n                  <button\n                    onClick={handleCopyCode}\n                    style={{\n                      padding: '10px 20px',\n                      fontSize: '14px',\n                      fontWeight: 600,\n                      border: 'none',\n                      borderRadius: '8px',\n                      backgroundColor: config.buttonColor,\n                      color: config.buttonTextColor,\n                      cursor: 'pointer',\n                    }}\n                  >\n                    {copiedCode ? '\u2713 Copied!' : 'Copy'}\n                  </button>\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </BasePopup>\n  );\n};\n\n", "/**\n * Scratch Card Popup Bundle\n */\n\nimport { ScratchCardPopup } from \"../../../app/domains/storefront/popups-new/ScratchCardPopup\";\n\n(function register() {\n  const g = window as unknown as { RevenueBoostComponents?: Record<string, unknown>; console?: Console };\n  g.RevenueBoostComponents = g.RevenueBoostComponents || {};\n  g.RevenueBoostComponents[\"SCRATCH_CARD\"] = ScratchCardPopup;\n\n  if (typeof g.console?.debug === \"function\") {\n    console.debug(\"[Revenue Boost] Scratch Card popup registered\");\n  }\n})();\n\n"],
  "mappings": "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",
  "names": ["h", "Fragment", "Fragment", "Fragment"]
}


> test:e2e
> playwright test tests/e2e/staging/storefront-ab-testing.spec.ts tests/e2e/staging/storefront-advanced-features.spec.ts tests/e2e/staging/storefront-analytics.spec.ts tests/e2e/staging/storefront-announcement.spec.ts tests/e2e/staging/storefront-cart-abandonment.spec.ts tests/e2e/staging/storefront-cart-triggers.spec.ts tests/e2e/staging/storefront-checkout-flow.spec.ts tests/e2e/staging/storefront-complete-flows.spec.ts tests/e2e/staging/storefront-countdown-timer.spec.ts tests/e2e/staging/storefront-design-variations.spec.ts tests/e2e/staging/storefront-discount-configs.spec.ts tests/e2e/staging/storefront-exit-intent.spec.ts tests/e2e/staging/storefront-flash-sale.spec.ts tests/e2e/staging/storefront-free-shipping.spec.ts tests/e2e/staging/storefront-interaction-patterns.spec.ts tests/e2e/staging/storefront-interactions.spec.ts tests/e2e/staging/storefront-minimal-test.spec.ts tests/e2e/staging/storefront-newsletter.spec.ts tests/e2e/staging/storefront-product-upsell.spec.ts tests/e2e/staging/storefront-scratch-card.spec.ts tests/e2e/staging/storefront-session-rules.spec.ts tests/e2e/staging/storefront-social-proof.spec.ts tests/e2e/staging/storefront-spin-to-win.spec.ts tests/e2e/staging/storefront-staging.spec.ts tests/e2e/staging/storefront-targeting.spec.ts tests/e2e/staging/storefront-triggers.spec.ts --workers=1

[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
[E2E] Loaded environment from .env.staging.env
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: âš™ï¸  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: âš™ï¸  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  suppress all logs with { quiet: true }
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: âš™ï¸  override existing env vars with { override: true }
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com

Running 153 tests using 1 worker

[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
[E2E] Loaded environment from .env.staging.env
ğŸ§ª Testing A/B experiment variant selection...
âœ… Created experiment: cmilushc00001ur3im0mnfh62 with 2 variants
Variant IDs: A: cmilushnw0003ur3i1p4dmd3z, B: cmilushtx0005ur3ij3h0sh1c
ğŸ“‹ Variant A config: {
  "id": "cmilushnw0003ur3i1p4dmd3z",
  "experimentId": "cmilushc00001ur3im0mnfh62",
  "variantKey": "A",
  "status": "ACTIVE",
  "priority": 99999
}
ğŸ“‹ Variant B config: {
  "id": "cmilushtx0005ur3ij3h0sh1c",
  "experimentId": "cmilushc00001ur3im0mnfh62",
  "variantKey": "B",
  "status": "ACTIVE",
  "priority": 99999
}
   [BROWSER ERROR] Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
   [BROWSER LOG] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
   [BROWSER LOG] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
   [BROWSER LOG] [Revenue Boost] â„¹ï¸ No preview parameters found
   [BROWSER LOG] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
   [BROWSER LOG] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
   [BROWSER LOG] [Revenue Boost] ğŸ” Challenge token store exposed globally
   [BROWSER LOG] [Revenue Boost] ğŸš€ Starting initialization...
   [BROWSER LOG] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
   [BROWSER LOG] [Revenue Boost] ğŸ”‘ Session ID: session_1764515206357_tg285pplm
   [BROWSER LOG] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515206357_svjk4w0ou
   [BROWSER LOG] [Revenue Boost] DOM ready
   [BROWSER LOG] [Revenue Boost] ğŸ›’ Cart tracking initialized
   [BROWSER LOG] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
   [BROWSER LOG] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515206357_tg285pplm&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515206357_svjk4w0ou&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
   [BROWSER LOG] [Revenue Boost API] Context: {sessionId: session_1764515206357_tg285pplm, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515206357_svjk4w0ou}
   [BROWSER ERROR] Failed to load resource: the server responded with a status of 400 ()
   [BROWSER LOG] [Revenue Boost] Page view tracked for social proof
ğŸ“¡ API returned 1 campaigns
  1. E2E-generic-AB-SingleVariant - Variant B (cmilushtx0005ur3ij3h0sh1c) {
  experimentId: [32m'cmilushc00001ur3im0mnfh62'[39m,
  variantKey: [32m'B'[39m,
  priority: [33m99999[39m
}
   [BROWSER LOG] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:06:47.148Z, showBranding: true}
   [BROWSER LOG] [Revenue Boost] âœ… Campaigns received: 1
   [BROWSER LOG] [Revenue Boost] Campaign details: [Object]
   [BROWSER LOG] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
   [BROWSER LOG] [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515206361
   [BROWSER LOG] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
   [BROWSER LOG] [Revenue Boost] Selected campaigns by surface: [E2E-generic-AB-SingleVariant - Variant B [modal]]
   [BROWSER LOG] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilushtx0005ur3ij3h0sh1c, name: E2E-generic-AB-SingleVariant - Variant B, templateType: NEWSLETTER}
   [BROWSER LOG] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilushtx0005ur3ij3h0sh1c, behavior: instant}
   [BROWSER LOG] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-generic-AB-SingleVariant - Variant B
   [BROWSER LOG] [Revenue Boost] ğŸ” Evaluating triggers...
   [BROWSER LOG] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilushtx0005ur3ij3h0sh1c
   [BROWSER LOG] [Revenue Boost] ğŸ”— Trigger logic operator: AND
   [BROWSER LOG] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
   [BROWSER LOG] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
   [BROWSER LOG] [Revenue Boost] âœ… page_load trigger delay completed
   [BROWSER LOG] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
   [BROWSER LOG] [Revenue Boost] âœ… Initialization complete!
   [BROWSER LOG] [Revenue Boost] âœ… page_load trigger passed
   [BROWSER LOG] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
   [BROWSER LOG] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilushtx0005ur3ij3h0sh1c
   [BROWSER LOG] [Revenue Boost] âœ… Triggers passed, showing campaign
   [BROWSER LOG] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-generic-AB-SingleVariant - Variant B
   [BROWSER DEBUG] [Revenue Boost] Newsletter popup registered
   [BROWSER LOG] [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
   [BROWSER LOG] [Revenue Boost Loader] Cache hit: NEWSLETTER
   [BROWSER LOG] [Revenue Boost] Popup shown: cmilushtx0005ur3ij3h0sh1c
Popup content length: 15518
Shows Variant A: false
Shows Variant B: false
âš ï¸ Experiment variants not shown - higher priority campaign may be active
  âœ“    1 [storefront] â€º tests/e2e/staging/storefront-ab-testing.spec.ts:58:3 â€º A/B Testing Experiments â€º visitor sees only ONE variant from an A/B experiment (9.2s)
ğŸ§ª Testing variant persistence across page reloads...
âœ… Created experiment: cmilusodx0007ur3i6er47ivl
ğŸ”’ Password page detected, logging in...
First visit: Variant B
âš ï¸ Popup not shown on reload (frequency capping active) - variant persistence verified by first visit
  âœ“    2 [storefront] â€º tests/e2e/staging/storefront-ab-testing.spec.ts:160:3 â€º A/B Testing Experiments â€º same visitor sees same variant after page reload (15.7s)
ğŸ§ª Testing different visitors get potentially different variants...
âœ… Created experiment: cmilut0i5000dur3iajx7zuwk
Variant IDs: A: cmilut0l4000fur3ibgl1ugrc, B: cmilut0o4000hur3id3ylk92f
ğŸ”’ Password page detected, logging in...
Visitor 1: Other campaign
ğŸ”’ Password page detected, logging in...
Visitor 2: Other campaign
ğŸ”’ Password page detected, logging in...
Visitor 3: Other campaign
âš ï¸ Only other campaigns shown - experiment may have lower priority
  âœ“    3 [storefront] â€º tests/e2e/staging/storefront-ab-testing.spec.ts:230:3 â€º A/B Testing Experiments â€º different visitors can see different variants (13.8s)
ğŸ§ª Testing 3-way split experiment...
âœ… Created 3-way experiment: cmilutb5v000jur3i9grim4a3 with 3 variants
Variant campaign IDs: cmilutb8y000lur3i8tlwpune, cmilutbcd000nur3ivn2gq2jd, cmilutbfg000pur3i544uqch3
ğŸ”’ Password page detected, logging in...
Popup content length: 15518
Shows A: false, B: false, C: false
âš ï¸ Another campaign is showing with higher priority
  âœ“    4 [storefront] â€º tests/e2e/staging/storefront-ab-testing.spec.ts:292:3 â€º A/B Testing Experiments â€º experiment with 3 variants distributes traffic correctly (8.5s)
ğŸ§ª Testing experiment metadata in popup...
âœ… Created experiment: cmiluthrv000rur3i1o8d4br1
ğŸ”’ Password page detected, logging in...
âœ… API returns experiment metadata: experimentId=cmiluthrv000rur3i1o8d4br1, variantKey=A
  âœ“    5 [storefront] â€º tests/e2e/staging/storefront-ab-testing.spec.ts:375:3 â€º A/B Testing Experiments â€º experiment popup includes experimentId and variantKey in data (6.3s)
ğŸ§ª Testing standalone campaign alongside experiment...
âœ… Created standalone campaign: cmilutmnf000xur3icl0ypnin
âœ… Created experiment with variants: cmilutmwf0011ur3ihoub5b0p, cmilutmzh0013ur3if2y428nn
ğŸ”’ Password page detected, logging in...
Popup content length: 15518
Standalone: false, Exp A: false, Exp B: false
âš ï¸ Another campaign is showing (higher priority)
  âœ“    6 [storefront] â€º tests/e2e/staging/storefront-ab-testing.spec.ts:425:3 â€º A/B Testing Experiments â€º non-experiment campaigns are not affected by variant selection (8.9s)
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: âš™ï¸  enable debug logging with { debug: true }
ğŸ§ª Testing geo targeting behavior (US visitor)...
âœ… Campaign created: cmilutv9u0015ur3ixu41uv2v
[BROWSER error] Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER log] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER log] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER log] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER log] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER log] [PreDisplayHook] Hook registry initialized
[BROWSER log] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER log] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER log] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER log] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER log] [Revenue Boost] ğŸ”‘ Session ID: session_1764515267760_6hm68r6yk
[BROWSER log] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515267760_bxejdvjvq
[BROWSER log] [Revenue Boost] DOM ready
[BROWSER log] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER log] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER error] Failed to load resource: the server responded with a status of 400 ()
[BROWSER log] [Revenue Boost] Page view tracked for social proof
[BROWSER log] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER log] [Revenue Boost] Campaign details: [Object]
[BROWSER log] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER log] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER log] [Revenue Boost] Selected campaigns by surface: [E2E-advanced-features-GeoTarget-USOnly [modal]]
[BROWSER log] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilutv9u0015ur3ixu41uv2v, name: E2E-advanced-features-GeoTarget-USOnly, templateType: NEWSLETTER}
[BROWSER log] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilutv9u0015ur3ixu41uv2v, behavior: instant}
[BROWSER log] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-advanced-features-GeoTarget-USOnly
[BROWSER log] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER log] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilutv9u0015ur3ixu41uv2v
[BROWSER log] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER log] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER log] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER log] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER log] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER log] [Revenue Boost] âœ… Initialization complete!
[BROWSER log] [Revenue Boost] âœ… page_load trigger passed
[BROWSER log] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER log] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilutv9u0015ur3ixu41uv2v
[BROWSER log] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER log] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-advanced-features-GeoTarget-USOnly
[BROWSER debug] [Revenue Boost] Newsletter popup registered
[BROWSER log] [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER log] [PreDisplayHook] Executing hooks for campaign cmilutv9u0015ur3ixu41uv2v (NEWSLETTER)
[BROWSER log] [ChallengeTokenHook] Requesting token for campaign cmilutv9u0015ur3ixu41uv2v
[BROWSER log] [BackgroundImageHook] No image URL found in designConfig
[BROWSER log] [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER log] [Revenue Boost] Popup shown: cmilutv9u0015ur3ixu41uv2v
âœ… Popup appeared for US visitor
âœ… Geo-targeted headline verified
  âœ“    7 [storefront] â€º tests/e2e/staging/storefront-advanced-features.spec.ts:73:5 â€º Advanced Features â€º Geographic Targeting â€º campaign shows for matching country (mocked US visitor) (6.1s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing geo targeting behavior (FR visitor, should be excluded)...
âœ… Campaign created: cmilutzps0017ur3iczdfmtnu
[BROWSER error] Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER log] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER log] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER log] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER log] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER log] [PreDisplayHook] Hook registry initialized
[BROWSER log] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER log] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER log] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER log] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER log] [Revenue Boost] ğŸ”‘ Session ID: session_1764515273365_7y6zjgi8h
[BROWSER log] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515273365_c3yihowoc
[BROWSER log] [Revenue Boost] DOM ready
[BROWSER log] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER log] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER error] Failed to load resource: the server responded with a status of 400 ()
[BROWSER log] [Revenue Boost] Page view tracked for social proof
[BROWSER log] [Revenue Boost] âœ… Campaigns received: 0
[BROWSER warning] [Revenue Boost] âš ï¸ No active campaigns returned from API
âœ… Geo-targeted campaign correctly hidden for FR visitor
  âœ“    8 [storefront] â€º tests/e2e/staging/storefront-advanced-features.spec.ts:117:5 â€º Advanced Features â€º Geographic Targeting â€º campaign hides for non-matching country (mocked FR visitor) (10.6s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing session rules - visit count threshold...
âœ… Campaign created: cmiluu7zw0019ur3ihgskw55c
[BROWSER error] Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER log] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER log] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER log] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER log] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER log] [PreDisplayHook] Hook registry initialized
[BROWSER log] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER log] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER log] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER log] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER log] [Revenue Boost] ğŸ”‘ Session ID: session_1764515284401_3pmbzeb2u
[BROWSER log] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515284401_d6g81u8wu
[BROWSER log] [Revenue Boost] DOM ready
[BROWSER log] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER log] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER error] Failed to load resource: the server responded with a status of 400 ()
[BROWSER log] [Revenue Boost] Page view tracked for social proof
[BROWSER log] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER log] [Revenue Boost] Campaign details: [Object]
[BROWSER log] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER log] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER log] [Revenue Boost] Selected campaigns by surface: [E2E-advanced-features-SessionRules-Visits [modal]]
[BROWSER log] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluu7zw0019ur3ihgskw55c, name: E2E-advanced-features-SessionRules-Visits, templateType: NEWSLETTER}
[BROWSER log] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluu7zw0019ur3ihgskw55c, behavior: instant}
[BROWSER log] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-advanced-features-SessionRules-Visits
[BROWSER log] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER log] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluu7zw0019ur3ihgskw55c
[BROWSER log] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER log] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER log] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER log] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER log] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER log] [Revenue Boost] âœ… Initialization complete!
[BROWSER log] [Revenue Boost] âœ… page_load trigger passed
[BROWSER log] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER log] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluu7zw0019ur3ihgskw55c
[BROWSER log] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER log] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-advanced-features-SessionRules-Visits
[BROWSER debug] [Revenue Boost] Newsletter popup registered
[BROWSER log] [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER log] [PreDisplayHook] Executing hooks for campaign cmiluu7zw0019ur3ihgskw55c (NEWSLETTER)
[BROWSER log] [ChallengeTokenHook] Requesting token for campaign cmiluu7zw0019ur3ihgskw55c
[BROWSER log] [BackgroundImageHook] No image URL found in designConfig
[BROWSER log] [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER log] [Revenue Boost] Popup shown: cmiluu7zw0019ur3ihgskw55c
âœ… Session rules test passed - popup displayed
  âœ“    9 [storefront] â€º tests/e2e/staging/storefront-advanced-features.spec.ts:160:5 â€º Advanced Features â€º Session Rules - Visit Count â€º popup shows after configured number of visits (6.2s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing discount code display...
âœ… Campaign created: cmiluucqh001bur3isopdd91r
[BROWSER error] Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER log] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER log] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER log] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER log] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER log] [PreDisplayHook] Hook registry initialized
[BROWSER log] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER log] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER log] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER log] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER log] [Revenue Boost] ğŸ”‘ Session ID: session_1764515290677_v6vs6iv2q
[BROWSER log] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515290677_b5i3zpgut
[BROWSER log] [Revenue Boost] DOM ready
[BROWSER log] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER log] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER error] Failed to load resource: the server responded with a status of 400 ()
[BROWSER log] [Revenue Boost] Page view tracked for social proof
[BROWSER log] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER log] [Revenue Boost] Campaign details: [Object]
[BROWSER log] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER log] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER log] [Revenue Boost] Selected campaigns by surface: [E2E-advanced-features-Discount-Display-Test [modal]]
[BROWSER log] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluucqh001bur3isopdd91r, name: E2E-advanced-features-Discount-Display-Test, templateType: NEWSLETTER}
[BROWSER log] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluucqh001bur3isopdd91r, behavior: instant}
[BROWSER log] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-advanced-features-Discount-Display-Test
[BROWSER log] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER log] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluucqh001bur3isopdd91r
[BROWSER log] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER log] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER log] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER log] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER log] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER log] [Revenue Boost] âœ… Initialization complete!
[BROWSER log] [Revenue Boost] âœ… page_load trigger passed
[BROWSER log] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER log] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluucqh001bur3isopdd91r
[BROWSER log] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER log] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-advanced-features-Discount-Display-Test
[BROWSER debug] [Revenue Boost] Newsletter popup registered
[BROWSER log] [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER log] [PreDisplayHook] Executing hooks for campaign cmiluucqh001bur3isopdd91r (NEWSLETTER)
[BROWSER log] [ChallengeTokenHook] Requesting token for campaign cmiluucqh001bur3isopdd91r
[BROWSER log] [BackgroundImageHook] No image URL found in designConfig
[BROWSER log] [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER log] [Revenue Boost] Popup shown: cmiluucqh001bur3isopdd91r
[BROWSER log] [PopupManager] Submitting lead: {email: test-1764515292044@example.com, name: undefined, gdprConsent: false}
[BROWSER error] Failed to load resource: the server responded with a status of 403 ()
[BROWSER error] [Revenue Boost API] Failed to submit lead: Error: Invalid token
    at we.submitLead (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:24204)
    at async w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48324)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515290680:292:2360
[BROWSER error] [PopupManager] Failed to submit lead: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515290680:292:2360
[BROWSER error] Form submission error: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515290680:292:2360
âœ… Success state verified after form submission
  âœ“   10 [storefront] â€º tests/e2e/staging/storefront-advanced-features.spec.ts:191:5 â€º Advanced Features â€º Discount Display â€º popup displays discount code after form submission (9.3s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing spin to win discount display...
âœ… Campaign created: cmiluuk1f001dur3iotujkicm
[BROWSER error] Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER log] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER log] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER log] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER log] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER log] [PreDisplayHook] Hook registry initialized
[BROWSER log] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER log] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER log] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER log] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER log] [Revenue Boost] ğŸ”‘ Session ID: session_1764515300075_2vhlzrw05
[BROWSER log] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515300075_i09uonhdq
[BROWSER log] [Revenue Boost] DOM ready
[BROWSER log] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER log] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER error] Failed to load resource: the server responded with a status of 400 ()
[BROWSER log] [Revenue Boost] Page view tracked for social proof
[BROWSER log] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER log] [Revenue Boost] Campaign details: [Object]
[BROWSER log] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [SPIN_TO_WIN]
[BROWSER log] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER log] [Revenue Boost] Selected campaigns by surface: [E2E-advanced-features-SpinToWin-Discount [modal]]
[BROWSER log] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluuk1f001dur3iotujkicm, name: E2E-advanced-features-SpinToWin-Discount, templateType: SPIN_TO_WIN}
[BROWSER log] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluuk1f001dur3iotujkicm, behavior: instant}
[BROWSER log] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-advanced-features-SpinToWin-Discount
[BROWSER log] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER log] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluuk1f001dur3iotujkicm
[BROWSER log] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER log] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER log] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER log] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER log] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER log] [Revenue Boost] âœ… Initialization complete!
[BROWSER log] [Revenue Boost] âœ… page_load trigger passed
[BROWSER log] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER log] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluuk1f001dur3iotujkicm
[BROWSER log] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER log] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-advanced-features-SpinToWin-Discount
[BROWSER debug] [Revenue Boost] Spin to Win popup registered
[BROWSER log] [PopupManager] Initializing popup for: SPIN_TO_WIN
[BROWSER log] [PreDisplayHook] Executing hooks for campaign cmiluuk1f001dur3iotujkicm (SPIN_TO_WIN)
[BROWSER log] [ChallengeTokenHook] Requesting token for campaign cmiluuk1f001dur3iotujkicm
[BROWSER log] [BackgroundImageHook] No image URL found in designConfig
[BROWSER log] [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER log] [Revenue Boost] Popup shown: cmiluuk1f001dur3iotujkicm
âœ… Spin to win wheel rendered with discount configuration
  âœ“   11 [storefront] â€º tests/e2e/staging/storefront-advanced-features.spec.ts:250:5 â€º Advanced Features â€º Discount Display â€º spin to win displays won discount code (6.9s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing product upsell bundle discount rendering...
âœ… Campaign created: cmiluupa3001fur3inr79xvt5
[BROWSER error] Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER log] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER log] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER log] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER log] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER log] [PreDisplayHook] Hook registry initialized
[BROWSER log] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER log] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER log] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER log] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER log] [Revenue Boost] ğŸ”‘ Session ID: session_1764515306928_2uccppxmz
[BROWSER log] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515306928_7r7zrm5za
[BROWSER log] [Revenue Boost] DOM ready
[BROWSER log] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER log] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER error] Failed to load resource: the server responded with a status of 400 ()
[BROWSER log] [Revenue Boost] Page view tracked for social proof
[BROWSER log] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER log] [Revenue Boost] Campaign details: [Object]
[BROWSER log] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [PRODUCT_UPSELL]
[BROWSER log] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER log] [Revenue Boost] Selected campaigns by surface: [E2E-advanced-features-Upsell-Bundle-Render [modal]]
[BROWSER log] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluupa3001fur3inr79xvt5, name: E2E-advanced-features-Upsell-Bundle-Render, templateType: PRODUCT_UPSELL}
[BROWSER log] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluupa3001fur3inr79xvt5, behavior: instant}
[BROWSER log] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-advanced-features-Upsell-Bundle-Render
[BROWSER log] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER log] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluupa3001fur3inr79xvt5
[BROWSER log] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER log] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER log] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER log] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER log] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER log] [Revenue Boost] âœ… Initialization complete!
[BROWSER log] [Revenue Boost] âœ… page_load trigger passed
[BROWSER log] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER log] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluupa3001fur3inr79xvt5
[BROWSER log] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER log] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-advanced-features-Upsell-Bundle-Render
[BROWSER debug] [Revenue Boost] Product Upsell popup registered
[BROWSER log] [PopupManager] Initializing popup for: PRODUCT_UPSELL
[BROWSER log] [PreDisplayHook] Executing hooks for campaign cmiluupa3001fur3inr79xvt5 (PRODUCT_UPSELL)
[BROWSER log] [ChallengeTokenHook] Requesting token for campaign cmiluupa3001fur3inr79xvt5
[BROWSER log] [ProductDataHook] Fetching products for PRODUCT_UPSELL
[BROWSER log] [BackgroundImageHook] No image URL found in designConfig
[BROWSER log] [ProductDataHook] Successfully loaded 3 products
[BROWSER log] [PreDisplayHook] Completed in 2ms. Success: 3/3
[BROWSER log] [Revenue Boost] Popup shown: cmiluupa3001fur3inr79xvt5
âœ… Bundle discount text verified in popup
âœ… Product upsell popup with bundle discount verified
  âœ“   12 [storefront] â€º tests/e2e/staging/storefront-advanced-features.spec.ts:283:5 â€º Advanced Features â€º Product Upsell Bundle Discount â€º product upsell popup renders with bundle discount banner (6.4s)
ğŸ§ª Testing VIEW event tracking...
ğŸ”’ Password page detected, logging in...
Captured 1 analytics requests
Frequency requests: 1
âœ… VIEW/frequency event sent with correct payload
  âœ“   13 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:52:5 â€º Analytics Event Tracking â€º Impression Tracking (VIEW events) â€º sends VIEW event when popup is displayed (8.1s)
ğŸ§ª Testing VIEW event includes visitor context...
ğŸ”’ Password page detected, logging in...
Captured payload: {
  "sessionId": "session_1764515321997_vnfy6qi0a",
  "campaignId": "cmiluv11h001jur3isj52zjjt",
  "trackingKey": "cmiluv11h001jur3isj52zjjt",
  "experimentId": null,
  "pageUrl": "https://revenue-boost-staging.myshopify.com/",
  "referrer": "",
  "timestamp": 1764515322692
}
âœ… VIEW event includes session and campaign context
  âœ“   14 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:111:5 â€º Analytics Event Tracking â€º Impression Tracking (VIEW events) â€º VIEW event includes visitor and session IDs (7.7s)
ğŸ§ª Testing CLICK event tracking...
ğŸ”’ Password page detected, logging in...
âš ï¸ No CLICK event captured - may be tracked differently
  âœ“   15 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:157:5 â€º Analytics Event Tracking â€º Click Tracking (CLICK events) â€º sends CLICK event when CTA button is clicked (6.5s)
ğŸ§ª Testing CLOSE event tracking...
ğŸ”’ Password page detected, logging in...
âœ… CLOSE event sent
  âœ“   16 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:217:5 â€º Analytics Event Tracking â€º Close Tracking (CLOSE events) â€º sends CLOSE event when popup is dismissed (6.5s)
ğŸ§ª Testing SUBMIT event tracking...
ğŸ”’ Password page detected, logging in...
âœ… Form submission tracked (lead created)
  âœ“   17 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:289:5 â€º Analytics Event Tracking â€º Form Submission Tracking (SUBMIT events) â€º sends SUBMIT event when form is submitted (7.7s)
ğŸ§ª Testing experiment tracking metadata...
ğŸ”’ Password page detected, logging in...
Experiment tracking found: {
  "sessionId": "session_1764515353310_2nywvk26l",
  "campaignId": "cmiluvnal001vur3isn0tqok5",
  "trackingKey": "cmiluvmyi001rur3iro5i30ef",
  "experimentId": "cmiluvmyi001rur3iro5i30ef",
  "pageUrl": "https://revenue-boost-staging.myshopify.com/",
  "referrer": "",
  "timestamp": 1764515353996
}
âœ… Experiment metadata included in analytics
  âœ“   18 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:356:5 â€º Analytics Event Tracking â€º Experiment Tracking â€º analytics events include experimentId and variantKey (10.8s)
ğŸ§ª Testing page context in analytics...
ğŸ”’ Password page detected, logging in...
Page context payload: {
  "sessionId": "session_1764515361126_ewjnmx4ia",
  "campaignId": "cmiluvv91001xur3i4wgp0wht",
  "trackingKey": "cmiluvv91001xur3i4wgp0wht",
  "experimentId": null,
  "pageUrl": "https://revenue-boost-staging.myshopify.com/",
  "referrer": "",
  "timestamp": 1764515361857
}
âœ… Page URL included in analytics
âœ… Referrer field present in analytics
  âœ“   19 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:408:5 â€º Analytics Event Tracking â€º Page Context Tracking â€º analytics events include page URL and referrer (7.7s)
ğŸ§ª Testing social proof page view tracking...
ğŸ”’ Password page detected, logging in...
âœ… Social proof page view tracked
  âœ“   20 [storefront] â€º tests/e2e/staging/storefront-analytics.spec.ts:459:5 â€º Analytics Event Tracking â€º Social Proof Tracking â€º tracks page view events for social proof (5.7s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops
Campaign created: cmiluw7so001zur3iiy9l85ar
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515377679_hfwaagg20
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515377679_lil6z9d2o
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515377679_hfwaagg20&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515377679_lil6z9d2o&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:09:38.387Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515373431 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluw7so001zur3iiy9l85ar, name: E2E-announcement-ANNOUNCEMENT-1764515373431, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluw7so001zur3iiy9l85ar, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515373431
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluw7so001zur3iiy9l85ar
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluw7so001zur3iiy9l85ar
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515373431
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluw7so001zur3iiy9l85ar (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluw7so001zur3iiy9l85ar
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluw7so001zur3iiy9l85ar, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… Headline displayed correctly
  âœ“   21 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:193:5 â€º Announcement Template â€º Content Fields â€º displays headline text correctly (7.0s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmiluwcxp0021ur3i5w9b1o2t
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515384082_sqqgmp5qr
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515384082_7pez5ubi9
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515384082_sqqgmp5qr&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515384082_7pez5ubi9&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:09:44.808Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515380092 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluwcxp0021ur3i5w9b1o2t, name: E2E-announcement-ANNOUNCEMENT-1764515380092, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluwcxp0021ur3i5w9b1o2t, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515380092
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluwcxp0021ur3i5w9b1o2t
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluwcxp0021ur3i5w9b1o2t
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515380092
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluwcxp0021ur3i5w9b1o2t (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluwcxp0021ur3i5w9b1o2t
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluwcxp0021ur3i5w9b1o2t, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… Subheadline displayed correctly
  âœ“   22 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:213:5 â€º Announcement Template â€º Content Fields â€º displays subheadline text correctly (6.4s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmiluwhyr0023ur3irer1rce4
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515390647_livk2k3wb
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515390647_0yw05g8f7
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515390647_livk2k3wb&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515390647_0yw05g8f7&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:09:51.347Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515386510 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluwhyr0023ur3irer1rce4, name: E2E-announcement-ANNOUNCEMENT-1764515386510, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluwhyr0023ur3irer1rce4, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515386510
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluwhyr0023ur3irer1rce4
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluwhyr0023ur3irer1rce4
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515386510
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluwhyr0023ur3irer1rce4 (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluwhyr0023ur3irer1rce4
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluwhyr0023ur3irer1rce4, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… Icon displayed correctly
  âœ“   23 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:231:5 â€º Announcement Template â€º Content Fields â€º displays icon when configured (6.6s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmiluwmyf0025ur3ipwtiwqam
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515397195_egkg6za11
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515397195_lw9ulhc64
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515397195_egkg6za11&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515397195_lw9ulhc64&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:09:57.962Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515393078 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluwmyf0025ur3ipwtiwqam, name: E2E-announcement-ANNOUNCEMENT-1764515393078, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluwmyf0025ur3ipwtiwqam, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515393078
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluwmyf0025ur3ipwtiwqam
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluwmyf0025ur3ipwtiwqam
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515393078
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluwmyf0025ur3ipwtiwqam (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluwmyf0025ur3ipwtiwqam
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluwmyf0025ur3ipwtiwqam, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… CTA button text displayed correctly
  âœ“   24 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:264:5 â€º Announcement Template â€º Content Fields â€º displays CTA button with correct text (6.6s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmiluws360027ur3ii35j4kv3
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515403793_syxqr4yz1
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515403793_7yghi2r9x
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515403793_syxqr4yz1&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515403793_7yghi2r9x&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:04.515Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515399729 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluws360027ur3ii35j4kv3, name: E2E-announcement-ANNOUNCEMENT-1764515399729, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluws360027ur3ii35j4kv3, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515399729
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluws360027ur3ii35j4kv3
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluws360027ur3ii35j4kv3
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515399729
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluws360027ur3ii35j4kv3 (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluws360027ur3ii35j4kv3
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluws360027ur3ii35j4kv3, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… Dismiss label displayed correctly
  âœ“   25 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:281:5 â€º Announcement Template â€º Content Fields â€º displays dismiss label when configured (6.6s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmiluwx9l0029ur3i6hgorib6
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515410472_p8o0qj4rs
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515410472_rj67gbvg8
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515410472_p8o0qj4rs&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515410472_rj67gbvg8&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:11.167Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515406441 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluwx9l0029ur3i6hgorib6, name: E2E-announcement-ANNOUNCEMENT-1764515406441, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluwx9l0029ur3i6hgorib6, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515406441
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluwx9l0029ur3i6hgorib6
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluwx9l0029ur3i6hgorib6
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515406441
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluwx9l0029ur3i6hgorib6 (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluwx9l0029ur3i6hgorib6
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluwx9l0029ur3i6hgorib6, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… CTA button displayed with correct text
  âœ“   26 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:300:5 â€º Announcement Template â€º CTA Button Behavior â€º CTA button displays with correct text (6.6s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmilux28s002bur3i5mq7a5hz
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515416950_zmndf7nw6
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515416950_k9n4v008s
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515416950_zmndf7nw6&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515416950_k9n4v008s&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:17.680Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515412892 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilux28s002bur3i5mq7a5hz, name: E2E-announcement-ANNOUNCEMENT-1764515412892, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilux28s002bur3i5mq7a5hz, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515412892
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilux28s002bur3i5mq7a5hz
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilux28s002bur3i5mq7a5hz
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515412892
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmilux28s002bur3i5mq7a5hz (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmilux28s002bur3i5mq7a5hz
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmilux28s002bur3i5mq7a5hz, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/collections/all
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515418551_x81wxhbqd
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515418551_pvbqw0k0y
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515418551_x81wxhbqd&pageUrl=%2Fcollections%2Fall&pageType=collection&deviceType=desktop&visitorId=visitor_1764515418551_pvbqw0k0y&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=collection&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:19.217Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515412892 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilux28s002bur3i5mq7a5hz, name: E2E-announcement-ANNOUNCEMENT-1764515412892, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilux28s002bur3i5mq7a5hz, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515412892
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilux28s002bur3i5mq7a5hz
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilux28s002bur3i5mq7a5hz
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515412892
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmilux28s002bur3i5mq7a5hz (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmilux28s002bur3i5mq7a5hz
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmilux28s002bur3i5mq7a5hz, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… CTA button clicked, current URL: https://revenue-boost-staging.myshopify.com/collections/all
  âœ“   27 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:318:5 â€º Announcement Template â€º CTA Button Behavior â€º CTA button navigates to correct URL on click (8.5s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmilux8um002dur3iozausq4k
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515425523_5l6aliqjj
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515425523_m3yngot0f
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515425523_5l6aliqjj&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515425523_m3yngot0f&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:26.236Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515421350 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilux8um002dur3iozausq4k, name: E2E-announcement-ANNOUNCEMENT-1764515421350, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilux8um002dur3iozausq4k, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515421350
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilux8um002dur3iozausq4k
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilux8um002dur3iozausq4k
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515421350
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmilux8um002dur3iozausq4k (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmilux8um002dur3iozausq4k
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmilux8um002dur3iozausq4k, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… New tab opened: https://example.com/
  âœ“   28 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:351:5 â€º Announcement Template â€º CTA Button Behavior â€º CTA button opens new tab when configured (7.0s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmiluxe73002fur3inltpe9hc
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515432330_97b8bkpi8
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515432330_m93rp400v
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515432330_97b8bkpi8&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515432330_m93rp400v&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:33.072Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515428383 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluxe73002fur3inltpe9hc, name: E2E-announcement-ANNOUNCEMENT-1764515428383, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluxe73002fur3inltpe9hc, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515428383
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluxe73002fur3inltpe9hc
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluxe73002fur3inltpe9hc
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515428383
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluxe73002fur3inltpe9hc (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluxe73002fur3inltpe9hc
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluxe73002fur3inltpe9hc, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
âœ… Sticky announcement remains visible after scroll
  âœ“   29 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:393:5 â€º Announcement Template â€º Sticky Behavior â€º sticky announcement remains visible after scroll (6.9s)
[Cleanup] Deleted 1 E2E test campaigns
Campaign created: cmiluxjhu002hur3ijicb30qo
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515440270_s2ogv5wdz
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515440270_pb09r80gu
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515440270_s2ogv5wdz&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515440270_pb09r80gu&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:40.983Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515435250 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluxjhu002hur3ijicb30qo, name: E2E-announcement-ANNOUNCEMENT-1764515435250, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluxjhu002hur3ijicb30qo, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515435250
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluxjhu002hur3ijicb30qo
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluxjhu002hur3ijicb30qo
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515435250
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluxjhu002hur3ijicb30qo (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluxjhu002hur3ijicb30qo
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluxjhu002hur3ijicb30qo, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
Banner not found, retry 1/3...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515448184_703rg087o
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515448184_0xv347aog
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515448184_703rg087o&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515448184_0xv347aog&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:49.026Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515435250 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluxjhu002hur3ijicb30qo, name: E2E-announcement-ANNOUNCEMENT-1764515435250, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluxjhu002hur3ijicb30qo, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515435250
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluxjhu002hur3ijicb30qo
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluxjhu002hur3ijicb30qo
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515435250
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluxjhu002hur3ijicb30qo (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluxjhu002hur3ijicb30qo
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluxjhu002hur3ijicb30qo, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
Banner not found, retry 2/3...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515457149_halnd2ukf
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515457149_ih1bdb94q
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515457149_halnd2ukf&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515457149_ih1bdb94q&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:10:57.880Z, showBranding: true}
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [ANNOUNCEMENT]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-announcement-ANNOUNCEMENT-1764515435250 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluxjhu002hur3ijicb30qo, name: E2E-announcement-ANNOUNCEMENT-1764515435250, templateType: ANNOUNCEMENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluxjhu002hur3ijicb30qo, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-announcement-ANNOUNCEMENT-1764515435250
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluxjhu002hur3ijicb30qo
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluxjhu002hur3ijicb30qo
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-announcement-ANNOUNCEMENT-1764515435250
[BROWSER] [Revenue Boost] Announcement popup registered
[BROWSER] [PreDisplayHook] Executing hooks for campaign cmiluxjhu002hur3ijicb30qo (ANNOUNCEMENT)
[BROWSER] [Revenue Boost] Popup shown: cmiluxjhu002hur3ijicb30qo
[BROWSER] [PopupManagerPreact] Rendering campaign {id: cmiluxjhu002hur3ijicb30qo, templateType: ANNOUNCEMENT, contentConfig: Object, designConfig: Object}
  âœ˜   30 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:418:5 â€º Announcement Template â€º Sticky Behavior â€º non-sticky announcement appears initially (31.9s)
  -   31 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:438:5 â€º Announcement Template â€º Color Schemes â€º urgent color scheme applies red/warning colors
  -   32 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:459:5 â€º Announcement Template â€º Color Schemes â€º success color scheme applies green colors
  -   33 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:475:5 â€º Announcement Template â€º Color Schemes â€º info color scheme applies blue colors
  -   34 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:493:5 â€º Announcement Template â€º Close Button Behavior â€º close button exists and is clickable
  -   35 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:526:5 â€º Announcement Template â€º Close Button Behavior â€º clicking close button hides announcement
  -   36 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:577:5 â€º Announcement Template â€º Position â€º top position renders at top of viewport
  -   37 [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:597:5 â€º Announcement Template â€º Position â€º bottom position renders at bottom of viewport
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[E2E] Loaded environment from .env.staging.env
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  override existing env vars with { override: true }
âœ… Campaign created: cmiluy9030001uru7q7mscumd
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515469967_ubeykj06u
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515469967_72d9crv78
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515469967_ubeykj06u&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515469967_72d9crv78&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515469967_ubeykj06u, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515469967_72d9crv78}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:11:10.687Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [CART_ABANDONMENT]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/cart-abandonment.bundle.js?v=1764515469970
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-cart-abandonment-CART_ABANDONMENT-1764515468306 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluy9030001uru7q7mscumd, name: E2E-cart-abandonment-CART_ABANDONMENT-1764515468306, templateType: CART_ABANDONMENT}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluy9030001uru7q7mscumd, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-abandonment-CART_ABANDONMENT-1764515468306
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluy9030001uru7q7mscumd
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluy9030001uru7q7mscumd
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-cart-abandonment-CART_ABANDONMENT-1764515468306
[BROWSER] debug: [Revenue Boost] Cart Abandonment popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: CART_ABANDONMENT
[BROWSER] log: [PopupManager] Initializing popup for: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmiluy9030001uru7q7mscumd (CART_ABANDONMENT)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmiluy9030001uru7q7mscumd
[BROWSER] log: [CartDataHook] Fetching cart data
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Completed in 89ms. Success: 3/3
[BROWSER] log: [Revenue Boost] Popup shown: cmiluy9030001uru7q7mscumd
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmiluy9030001uru7q7mscumd, templateType: CART_ABANDONMENT, contentConfig: Object, designConfig: Object}
âœ… Cart Abandonment popup rendered successfully
  âœ“   38 [storefront] â€º tests/e2e/staging/storefront-cart-abandonment.spec.ts:82:3 â€º Cart Abandonment Template - E2E â€º renders cart abandonment popup with default configuration (3.6s)
âœ… Campaign created: cmiluybj20003uru7hprhevub
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515473171_bzwmb5jgc
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515473171_s51qi1evf
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515473171_bzwmb5jgc&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515473171_s51qi1evf&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515473171_bzwmb5jgc, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515473171_s51qi1evf}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:11:13.888Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [CART_ABANDONMENT]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/cart-abandonment.bundle.js?v=1764515473175
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-cart-abandonment-CART_ABANDONMENT-1764515471582 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluybj20003uru7hprhevub, name: E2E-cart-abandonment-CART_ABANDONMENT-1764515471582, templateType: CART_ABANDONMENT}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluybj20003uru7hprhevub, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-abandonment-CART_ABANDONMENT-1764515471582
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluybj20003uru7hprhevub
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluybj20003uru7hprhevub
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-cart-abandonment-CART_ABANDONMENT-1764515471582
[BROWSER] debug: [Revenue Boost] Cart Abandonment popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: CART_ABANDONMENT
[BROWSER] log: [PopupManager] Initializing popup for: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmiluybj20003uru7hprhevub (CART_ABANDONMENT)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmiluybj20003uru7hprhevub
[BROWSER] log: [CartDataHook] Fetching cart data
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Completed in 98ms. Success: 3/3
[BROWSER] log: [Revenue Boost] Popup shown: cmiluybj20003uru7hprhevub
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmiluybj20003uru7hprhevub, templateType: CART_ABANDONMENT, contentConfig: Object, designConfig: Object}
âœ… Email recovery popup rendered
  âœ“   39 [storefront] â€º tests/e2e/staging/storefront-cart-abandonment.spec.ts:108:3 â€º Cart Abandonment Template - E2E â€º renders with email recovery enabled (3.2s)
âœ… Campaign created: cmiluye0l0005uru7jgoaxsku
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515476385_120bvx0gy
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515476385_cawq8cs59
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515476385_120bvx0gy&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515476385_cawq8cs59&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515476385_120bvx0gy, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515476385_cawq8cs59}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:11:17.147Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [CART_ABANDONMENT]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/cart-abandonment.bundle.js?v=1764515476389
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-cart-abandonment-CART_ABANDONMENT-1764515474805 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluye0l0005uru7jgoaxsku, name: E2E-cart-abandonment-CART_ABANDONMENT-1764515474805, templateType: CART_ABANDONMENT}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluye0l0005uru7jgoaxsku, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-abandonment-CART_ABANDONMENT-1764515474805
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluye0l0005uru7jgoaxsku
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluye0l0005uru7jgoaxsku
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-cart-abandonment-CART_ABANDONMENT-1764515474805
[BROWSER] debug: [Revenue Boost] Cart Abandonment popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: CART_ABANDONMENT
[BROWSER] log: [PopupManager] Initializing popup for: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmiluye0l0005uru7jgoaxsku (CART_ABANDONMENT)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmiluye0l0005uru7jgoaxsku
[BROWSER] log: [CartDataHook] Fetching cart data
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Completed in 87ms. Success: 3/3
[BROWSER] log: [Revenue Boost] Popup shown: cmiluye0l0005uru7jgoaxsku
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmiluye0l0005uru7jgoaxsku, templateType: CART_ABANDONMENT, contentConfig: Object, designConfig: Object}
âœ… Urgency timer popup rendered
  âœ“   40 [storefront] â€º tests/e2e/staging/storefront-cart-abandonment.spec.ts:126:3 â€º Cart Abandonment Template - E2E â€º displays urgency timer (3.2s)
ğŸ§ª Testing cart items display...
âœ… Campaign created: cmiluyghl0007uru7oaccct6f
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515479724_8w2gnir39
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515479724_zn5vrkk7g
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515479724_8w2gnir39&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515479724_zn5vrkk7g&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515479724_8w2gnir39, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515479724_zn5vrkk7g}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:11:20.393Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [CART_ABANDONMENT]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/cart-abandonment.bundle.js?v=1764515479728
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-cart-abandonment-CART_ABANDONMENT-1764515478008 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluyghl0007uru7oaccct6f, name: E2E-cart-abandonment-CART_ABANDONMENT-1764515478008, templateType: CART_ABANDONMENT}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluyghl0007uru7oaccct6f, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-abandonment-CART_ABANDONMENT-1764515478008
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluyghl0007uru7oaccct6f
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluyghl0007uru7oaccct6f
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-cart-abandonment-CART_ABANDONMENT-1764515478008
[BROWSER] debug: [Revenue Boost] Cart Abandonment popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: CART_ABANDONMENT
[BROWSER] log: [PopupManager] Initializing popup for: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmiluyghl0007uru7oaccct6f (CART_ABANDONMENT)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmiluyghl0007uru7oaccct6f
[BROWSER] log: [CartDataHook] Fetching cart data
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Completed in 82ms. Success: 3/3
[BROWSER] log: [Revenue Boost] Popup shown: cmiluyghl0007uru7oaccct6f
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmiluyghl0007uru7oaccct6f, templateType: CART_ABANDONMENT, contentConfig: Object, designConfig: Object}
Cart content present: true
âœ… Cart abandonment with items display rendered
  âœ“   41 [storefront] â€º tests/e2e/staging/storefront-cart-abandonment.spec.ts:144:3 â€º Cart Abandonment Template - E2E â€º displays cart items when showCartItems is enabled (3.3s)
ğŸ§ª Testing checkout CTA...
âœ… Campaign created: cmiluyj220009uru7le7igjri
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515482807_wrjkngqds
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515482807_xnlnfl5id
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515482807_wrjkngqds&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515482807_xnlnfl5id&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515482807_wrjkngqds, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515482807_xnlnfl5id}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:11:23.510Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [CART_ABANDONMENT]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/cart-abandonment.bundle.js?v=1764515482811
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-cart-abandonment-CART_ABANDONMENT-1764515481338 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluyj220009uru7le7igjri, name: E2E-cart-abandonment-CART_ABANDONMENT-1764515481338, templateType: CART_ABANDONMENT}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluyj220009uru7le7igjri, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-abandonment-CART_ABANDONMENT-1764515481338
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluyj220009uru7le7igjri
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluyj220009uru7le7igjri
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-cart-abandonment-CART_ABANDONMENT-1764515481338
[BROWSER] debug: [Revenue Boost] Cart Abandonment popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: CART_ABANDONMENT
[BROWSER] log: [PopupManager] Initializing popup for: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmiluyj220009uru7le7igjri (CART_ABANDONMENT)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmiluyj220009uru7le7igjri
[BROWSER] log: [CartDataHook] Fetching cart data
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: CART_ABANDONMENT
[BROWSER] log: [PreDisplayHook] Completed in 90ms. Success: 3/3
[BROWSER] log: [Revenue Boost] Popup shown: cmiluyj220009uru7le7igjri
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmiluyj220009uru7le7igjri, templateType: CART_ABANDONMENT, contentConfig: Object, designConfig: Object}
âœ… CTA button present
  âœ“   42 [storefront] â€º tests/e2e/staging/storefront-cart-abandonment.spec.ts:167:3 â€º Cart Abandonment Template - E2E â€º shows checkout CTA button (3.1s)
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
ğŸ§ª Testing add-to-cart trigger...
âœ… Campaign created: cmiluyn3m000buru7s7v4y3em
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515490686_wecgqsv9x
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515490686_bon5ujy9h
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [NEWSLETTER]
[BROWSER] [Revenue Boost] Newsletter popup registered
[BROWSER] [Revenue Boost] âœ… High priority components ready
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-cart-triggers-AddToCart-Test [modal]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluyn3m000buru7s7v4y3em, name: E2E-cart-triggers-AddToCart-Test, templateType: NEWSLETTER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluyn3m000buru7s7v4y3em, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-triggers-AddToCart-Test
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluyn3m000buru7s7v4y3em
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] [Revenue Boost] ğŸ›’ Checking add_to_cart trigger: {enabled: true}
[BROWSER] [Revenue Boost] ğŸ›’ add_to_cart trigger listening for add-to-cart events (delay=0s, immediate=false)
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
âœ… Popup correctly hidden before add-to-cart event
[BROWSER] [Revenue Boost] âœ… add_to_cart trigger conditions met
[BROWSER] [Revenue Boost] âœ… add_to_cart trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluyn3m000buru7s7v4y3em
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-cart-triggers-AddToCart-Test
[BROWSER] [Revenue Boost] Popup shown: cmiluyn3m000buru7s7v4y3em
âœ… Popup shown after add-to-cart event
  âœ“   43 [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:73:5 â€º Cart & Product Triggers â€º Add to Cart Trigger â€º popup shows when add-to-cart event is dispatched (10.2s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing add-to-cart trigger with delay...
âœ… Campaign created: cmiluyuqj000duru77g8maq73
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515500465_1a5jt6a92
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515500465_1wybtz2wk
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [NEWSLETTER]
[BROWSER] [Revenue Boost] Newsletter popup registered
[BROWSER] [Revenue Boost] âœ… High priority components ready
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-cart-triggers-AddToCart-Delay [modal]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluyuqj000duru77g8maq73, name: E2E-cart-triggers-AddToCart-Delay, templateType: NEWSLETTER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluyuqj000duru77g8maq73, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-triggers-AddToCart-Delay
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluyuqj000duru77g8maq73
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] [Revenue Boost] ğŸ›’ Checking add_to_cart trigger: {enabled: true, immediate: false}
[BROWSER] [Revenue Boost] ğŸ›’ add_to_cart trigger listening for add-to-cart events (delay=0s, immediate=false)
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… add_to_cart trigger conditions met
[BROWSER] [Revenue Boost] âœ… add_to_cart trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmiluyuqj000duru77g8maq73
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-cart-triggers-AddToCart-Delay
âœ… Popup correctly delayed (not visible at 0.5s)
[BROWSER] [Revenue Boost] Popup shown: cmiluyuqj000duru77g8maq73
âœ… Popup appeared after configured delay
  âœ“   44 [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:127:5 â€º Cart & Product Triggers â€º Add to Cart Trigger â€º add-to-cart trigger respects delay config (10.8s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing cart value trigger behavior...
âœ… Campaign created: cmiluz35r000furu7src2h8rk
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515511398_4d9bzfdxa
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515511398_ijwihrubm
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-cart-triggers-CartValue-Behavior [modal]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmiluz35r000furu7src2h8rk, name: E2E-cart-triggers-CartValue-Behavior, templateType: NEWSLETTER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmiluz35r000furu7src2h8rk, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-cart-triggers-CartValue-Behavior
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmiluz35r000furu7src2h8rk
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] [Revenue Boost] ğŸ’° Checking cart_value trigger: {enabled: true, min_value: 10}
[BROWSER] [Revenue Boost] ğŸ’° Checking cart_value trigger: cart total must be between 10 and Infinity
[BROWSER] [Revenue Boost] ğŸ’° Current cart value: 0
[BROWSER] [Revenue Boost] ğŸ’° cart_value trigger waiting for cart update events (current value 0 is outside range)
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] Newsletter popup registered
âœ… Popup correctly hidden before cart exceeds threshold
  âœ˜   45 [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:173:5 â€º Cart & Product Triggers â€º Cart Value Trigger â€º popup shows when cart value exceeds min threshold (20.2s)
  -   46 [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:227:5 â€º Cart & Product Triggers â€º Product View Trigger â€º popup shows on product page after time delay
  -   47 [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:272:5 â€º Cart & Product Triggers â€º Idle Timer Trigger â€º popup shows after user inactivity
  -   48 [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:316:5 â€º Cart & Product Triggers â€º Custom Event Trigger â€º popup shows when custom event is dispatched
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
[E2E] Loaded environment from .env.staging.env
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
ğŸ§ª Testing product page navigation...
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515530746_m1imfbyqk
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515530746_1hvhmol3b
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 0
[BROWSER] [Revenue Boost] âš ï¸ No active campaigns returned from API
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/products/the-multi-managed-snowboard
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515530746_m1imfbyqk
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515530746_1hvhmol3b
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 0
[BROWSER] [Revenue Boost] âš ï¸ No active campaigns returned from API
âœ… Found product page: https://revenue-boost-staging.myshopify.com/products/the-multi-managed-snowboard
  âœ“   49 [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:226:5 â€º Checkout Flow â€º Cart Operations â€º can navigate to product page (5.9s)
ğŸ§ª Testing add to cart...
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515536422_y84wsojr7
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515536422_p5pyslow3
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 0
[BROWSER] [Revenue Boost] âš ï¸ No active campaigns returned from API
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/products/the-multi-managed-snowboard
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515536422_y84wsojr7
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515536422_p5pyslow3
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 0
[BROWSER] [Revenue Boost] âš ï¸ No active campaigns returned from API
[BROWSER] [Revenue Boost] ğŸ›’ Tracked add-to-cart: gid://shopify/Product/47991451025658
[BROWSER] [Revenue Boost] ğŸ›’ Tracked add-to-cart: gid://shopify/Product/9008096280826
âœ… Product added to cart
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/cart
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515536422_y84wsojr7
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515536422_p5pyslow3
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 0
[BROWSER] [Revenue Boost] âš ï¸ No active campaigns returned from API
Cart info: 0 items, total: 0
  âœ˜   50 [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:237:5 â€º Checkout Flow â€º Cart Operations â€º can add product to cart (9.5s)
  -   51 [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:253:5 â€º Checkout Flow â€º Cart Operations â€º can navigate to checkout
  -   52 [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:271:5 â€º Checkout Flow â€º Discount Auto-Apply â€º popup with auto-apply discount shows discount code
  -   53 [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:306:5 â€º Checkout Flow â€º Discount Auto-Apply â€º discount code persists to checkout URL
  -   54 [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:340:5 â€º Checkout Flow â€º Cart Value Triggers at Checkout â€º cart value trigger activates when cart exceeds threshold
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  enable debug logging with { debug: true }
[E2E] Loaded environment from .env.staging.env
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  enable debug logging with { debug: true }
âœ… Campaign created: cmiluzx7m0001urwkiymn2k3c
ğŸ”’ Password page detected, logging in...
âœ… Newsletter popup appeared
âœ… Email input verified
âœ… Email "flow-test-1764515551778@example.com" entered
âœ… Form submitted
âœ… COMPLETE: Newsletter signup flow successful!
  âœ“   55 [storefront] â€º tests/e2e/staging/storefront-complete-flows.spec.ts:73:3 â€º Complete User Flows â€º Newsletter: complete signup flow (6.0s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv01p10003urwkfu4ikj5f
ğŸ”’ Password page detected, logging in...
âœ… Spin-to-Win popup appeared
âœ… Spin button verified
âœ… Wheel content verified
âœ… COMPLETE: Spin-to-Win popup rendered with wheel
  âœ“   56 [storefront] â€º tests/e2e/staging/storefront-complete-flows.spec.ts:111:3 â€º Complete User Flows â€º Spin-to-Win: complete flow (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv063e0005urwkq7cw5vw8
ğŸ”’ Password page detected, logging in...
âœ… Scratch Card popup appeared
âœ… Scratch content verified
âœ… COMPLETE: Scratch Card popup rendered
  âœ“   57 [storefront] â€º tests/e2e/staging/storefront-complete-flows.spec.ts:142:3 â€º Complete User Flows â€º Scratch Card: complete flow (5.5s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv0aeq0007urwkr614liqd
ğŸ”’ Password page detected, logging in...
âœ… Flash Sale popup appeared
âœ… Countdown timer verified
âœ… Discount content verified
âœ… COMPLETE: Flash Sale popup rendered with urgency elements
  âœ“   58 [storefront] â€º tests/e2e/staging/storefront-complete-flows.spec.ts:167:3 â€º Complete User Flows â€º Flash Sale: complete flow (5.9s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Low priority campaign: cmilv0ert0009urwkcmqu0t5r
âœ… High priority campaign: cmilv0eus000burwkb9gaq8m5
ğŸ”’ Password page detected, logging in...
âœ… COMPLETE: High priority Spin-to-Win campaign displayed over Newsletter
  âœ“   59 [storefront] â€º tests/e2e/staging/storefront-complete-flows.spec.ts:199:3 â€º Complete User Flows â€º Multi-template priority: highest priority wins (5.8s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
âœ… Campaign created: cmilv0kis000durwkhu49pf5k
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515580623_wjheix2ud
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515580623_7zrv4km4y
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [COUNTDOWN_TIMER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-countdown-timer-COUNTDOWN_TIMER-1764515576548 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv0kis000durwkhu49pf5k, name: E2E-countdown-timer-COUNTDOWN_TIMER-1764515576548, templateType: COUNTDOWN_TIMER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv0kis000durwkhu49pf5k, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-countdown-timer-COUNTDOWN_TIMER-1764515576548
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv0kis000durwkhu49pf5k
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv0kis000durwkhu49pf5k
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-countdown-timer-COUNTDOWN_TIMER-1764515576548
[BROWSER] [Revenue Boost] Countdown Timer popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv0kis000durwkhu49pf5k
DOM Debug: [
  [32m'DIV#revenue-boost-embed. - \n'[39m +
    [32m'    \n'[39m +
    [32m'      (function() {\n'[39m +
    [32m'        var debug = true'[39m,
  [32m'DIV#revenue-boost-popup-cmilv0kis000durwkhu49pf5k. - '[39m,
  [32m'DIV#. - Shop NowÃ—'[39m
]
âœ… Countdown timer displayed with content
  âœ“   60 [storefront] â€º tests/e2e/staging/storefront-countdown-timer.spec.ts:76:3 â€º Countdown Timer Template â€º displays countdown timer with digits (8.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv0qzg000furwkwe7jybdv
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515589015_do24nx8wq
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515589015_h9t4vsem8
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [COUNTDOWN_TIMER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-countdown-timer-COUNTDOWN_TIMER-1764515584924 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv0qzg000furwkwe7jybdv, name: E2E-countdown-timer-COUNTDOWN_TIMER-1764515584924, templateType: COUNTDOWN_TIMER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv0qzg000furwkwe7jybdv, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-countdown-timer-COUNTDOWN_TIMER-1764515584924
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv0qzg000furwkwe7jybdv
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv0qzg000furwkwe7jybdv
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-countdown-timer-COUNTDOWN_TIMER-1764515584924
[BROWSER] [Revenue Boost] Countdown Timer popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv0qzg000furwkwe7jybdv
âš ï¸ Timer value unchanged - may be static display
  âœ“   61 [storefront] â€º tests/e2e/staging/storefront-countdown-timer.spec.ts:134:3 â€º Countdown Timer Template â€º timer counts down over time (8.8s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv0xtz000hurwksacxj3x2
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515597954_2ff6m59nm
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515597954_20zik9i2f
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [COUNTDOWN_TIMER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-countdown-timer-COUNTDOWN_TIMER-1764515593799 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv0xtz000hurwksacxj3x2, name: E2E-countdown-timer-COUNTDOWN_TIMER-1764515593799, templateType: COUNTDOWN_TIMER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv0xtz000hurwksacxj3x2, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-countdown-timer-COUNTDOWN_TIMER-1764515593799
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv0xtz000hurwksacxj3x2
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv0xtz000hurwksacxj3x2
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-countdown-timer-COUNTDOWN_TIMER-1764515593799
[BROWSER] [Revenue Boost] Countdown Timer popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv0xtz000hurwksacxj3x2
âœ… Timer visible before scroll
âœ… Sticky timer remains visible after scroll
  âœ“   62 [storefront] â€º tests/e2e/staging/storefront-countdown-timer.spec.ts:176:3 â€º Countdown Timer Template â€º sticky timer remains visible after scroll (6.8s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv1317000jurwkek2khy68
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515604522_xrr2vwo8t
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515604522_g3hwtl2ca
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [COUNTDOWN_TIMER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-countdown-timer-COUNTDOWN_TIMER-1764515600539 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv1317000jurwkek2khy68, name: E2E-countdown-timer-COUNTDOWN_TIMER-1764515600539, templateType: COUNTDOWN_TIMER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv1317000jurwkek2khy68, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-countdown-timer-COUNTDOWN_TIMER-1764515600539
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv1317000jurwkek2khy68
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv1317000jurwkek2khy68
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-countdown-timer-COUNTDOWN_TIMER-1764515600539
[BROWSER] [Revenue Boost] Countdown Timer popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv1317000jurwkek2khy68
âš ï¸ Headline not found - content displayed
âœ… Countdown timer displayed
  âœ“   63 [storefront] â€º tests/e2e/staging/storefront-countdown-timer.spec.ts:198:3 â€º Countdown Timer Template â€º displays custom headline with timer (5.6s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing real-time countdown...
âœ… Campaign created: cmilv17bt000lurwkjcrcav4u
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515610131_8rok4hbrq
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515610131_4bdsmejx8
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [COUNTDOWN_TIMER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-countdown-timer-COUNTDOWN_TIMER-1764515606104 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv17bt000lurwkjcrcav4u, name: E2E-countdown-timer-COUNTDOWN_TIMER-1764515606104, templateType: COUNTDOWN_TIMER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv17bt000lurwkjcrcav4u, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-countdown-timer-COUNTDOWN_TIMER-1764515606104
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv17bt000lurwkjcrcav4u
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv17bt000lurwkjcrcav4u
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-countdown-timer-COUNTDOWN_TIMER-1764515606104
[BROWSER] [Revenue Boost] Countdown Timer popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv17bt000lurwkjcrcav4u
Initial timer: Shop NowÃ—
After 3s: Shop NowÃ—
âš ï¸ Timer may not be actively counting (or same second captured)
  âœ“   64 [storefront] â€º tests/e2e/staging/storefront-countdown-timer.spec.ts:227:3 â€º Countdown Timer Template â€º timer counts down in real-time (8.7s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing custom colors...
âœ… Campaign created: cmilv1e4k000nurwkfaxfx9rm
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515618926_4vml6cyc5
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515618926_rluev8n9r
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [COUNTDOWN_TIMER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-countdown-timer-COUNTDOWN_TIMER-1764515614916 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv1e4k000nurwkfaxfx9rm, name: E2E-countdown-timer-COUNTDOWN_TIMER-1764515614916, templateType: COUNTDOWN_TIMER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv1e4k000nurwkfaxfx9rm, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-countdown-timer-COUNTDOWN_TIMER-1764515614916
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv1e4k000nurwkfaxfx9rm
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv1e4k000nurwkfaxfx9rm
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-countdown-timer-COUNTDOWN_TIMER-1764515614916
[BROWSER] [Revenue Boost] Countdown Timer popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv1e4k000nurwkfaxfx9rm
âœ… Countdown timer with color scheme rendered
  âœ“   65 [storefront] â€º tests/e2e/staging/storefront-countdown-timer.spec.ts:270:3 â€º Countdown Timer Template â€º applies custom color scheme (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing CTA button...
âœ… Campaign created: cmilv1ig6000purwkmeyq7dm7
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515624577_snsr6jv05
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515624577_qxgikawxo
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [COUNTDOWN_TIMER]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-countdown-timer-COUNTDOWN_TIMER-1764515620517 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv1ig6000purwkmeyq7dm7, name: E2E-countdown-timer-COUNTDOWN_TIMER-1764515620517, templateType: COUNTDOWN_TIMER}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv1ig6000purwkmeyq7dm7, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-countdown-timer-COUNTDOWN_TIMER-1764515620517
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv1ig6000purwkmeyq7dm7
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv1ig6000purwkmeyq7dm7
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-countdown-timer-COUNTDOWN_TIMER-1764515620517
[BROWSER] [Revenue Boost] Countdown Timer popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv1ig6000purwkmeyq7dm7
âœ… CTA button "Claim Your Discount Now" displayed
âœ… Countdown timer rendered
  âœ“   66 [storefront] â€º tests/e2e/staging/storefront-countdown-timer.spec.ts:286:3 â€º Countdown Timer Template â€º shows CTA button with custom text (5.6s)
ğŸ§ª Testing SMALL popup size...
ğŸ”’ Password page detected, logging in...
SMALL popup: width=1280, hasSmallClass=false
âœ… SMALL popup rendered
  âœ“   67 [storefront] â€º tests/e2e/staging/storefront-design-variations.spec.ts:51:5 â€º Popup Design Variations â€º Popup Sizes â€º renders SMALL popup with appropriate dimensions (6.1s)
ğŸ§ª Testing LARGE popup size...
ğŸ”’ Password page detected, logging in...
LARGE popup: hasLargeClass=true
âœ… LARGE popup rendered
  âœ“   68 [storefront] â€º tests/e2e/staging/storefront-design-variations.spec.ts:111:5 â€º Popup Design Variations â€º Popup Sizes â€º renders LARGE popup with appropriate dimensions (6.2s)
ğŸ§ª Testing CENTER position...
ğŸ”’ Password page detected, logging in...
âœ… CENTER position popup rendered
  âœ“   69 [storefront] â€º tests/e2e/staging/storefront-design-variations.spec.ts:153:5 â€º Popup Design Variations â€º Popup Positions â€º renders popup in CENTER position (5.6s)
ğŸ§ª Testing BOTTOM_RIGHT position...
ğŸ”’ Password page detected, logging in...
Position check: right=true, bottom=true
âœ… BOTTOM_RIGHT position popup rendered
  âœ“   70 [storefront] â€º tests/e2e/staging/storefront-design-variations.spec.ts:178:5 â€º Popup Design Variations â€º Popup Positions â€º renders popup in BOTTOM_RIGHT corner (5.6s)
ğŸ§ª Testing custom primary color...
ğŸ”’ Password page detected, logging in...
âš ï¸ Custom color not detected - may be using CSS variables
  âœ“   71 [storefront] â€º tests/e2e/staging/storefront-design-variations.spec.ts:225:5 â€º Popup Design Variations â€º Custom Colors â€º applies custom primary color (5.6s)
ğŸ§ª Testing background image rendering...
ğŸ”’ Password page detected, logging in...
âš ï¸ No background image detected
  âœ“   72 [storefront] â€º tests/e2e/staging/storefront-design-variations.spec.ts:280:5 â€º Popup Design Variations â€º Background Images â€º renders newsletter with background image (5.4s)
ğŸ§ª Testing corner radius...
ğŸ”’ Password page detected, logging in...
âš ï¸ Corner radius not detected
  âœ“   73 [storefront] â€º tests/e2e/staging/storefront-design-variations.spec.ts:326:5 â€º Popup Design Variations â€º Corner Radius â€º applies custom corner radius (5.7s)
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: ğŸ“¡ add observability to secrets: https://dotenvx.com/ops
âœ… Campaign created: cmilv2k7f0015urwkqk3wg8q0
ğŸ”’ Password page detected, logging in...
âœ… Newsletter popup with email form displayed
âœ… Email filled in form
âœ… Form submitted
âœ… Form submission successful
âš ï¸ Discount code not found in popup - may need different success state check
  âœ“   74 [storefront] â€º tests/e2e/staging/storefront-discount-configs.spec.ts:80:3 â€º Discount Configurations â€º displays discount code after email submission (6.2s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv2orp0017urwk5tl5jbgj
ğŸ”’ Password page detected, logging in...
âœ… 25% discount value displayed in popup
  âœ“   75 [storefront] â€º tests/e2e/staging/storefront-discount-configs.spec.ts:136:3 â€º Discount Configurations â€º shows percentage discount value in popup content (5.6s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv2t350019urwkhocgkhn7
ğŸ”’ Password page detected, logging in...
âœ… $10 fixed discount displayed in popup
  âœ“   76 [storefront] â€º tests/e2e/staging/storefront-discount-configs.spec.ts:165:3 â€º Discount Configurations â€º shows fixed amount discount in popup (5.4s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv2xbo001burwkej357ock
ğŸ”’ Password page detected, logging in...
âœ… Free shipping messaging displayed in popup
  âœ“   77 [storefront] â€º tests/e2e/staging/storefront-discount-configs.spec.ts:190:3 â€º Discount Configurations â€º shows free shipping messaging (5.5s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv31if001durwk70is5hgd
ğŸ”’ Password page detected, logging in...
âš ï¸ Copy button not found or not clickable
  âœ“   78 [storefront] â€º tests/e2e/staging/storefront-discount-configs.spec.ts:216:3 â€º Discount Configurations â€º copy button copies discount code to clipboard (5.3s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
âœ… Campaign created: cmilv36zo001furwk7jhuelw3
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515703106_m22nonmmb
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515703106_imf8n3ql8
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [EXIT_INTENT]
[BROWSER] [Revenue Boost] Exit Intent popup registered
[BROWSER] [Revenue Boost] âœ… High priority components ready
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-exit-intent-EXIT_INTENT-1764515698980 [modal]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv36zo001furwk7jhuelw3, name: E2E-exit-intent-EXIT_INTENT-1764515698980, templateType: EXIT_INTENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv36zo001furwk7jhuelw3, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-exit-intent-EXIT_INTENT-1764515698980
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv36zo001furwk7jhuelw3
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] [Revenue Boost] ğŸšª Checking exit_intent trigger: {enabled: true, sensitivity: medium}
[BROWSER] [Revenue Boost] ğŸšª exit_intent trigger waiting for exit intent (sensitivity: medium, delay: 1000ms, mobileEnabled=false)
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… exit_intent trigger detected: User showed exit intent
[BROWSER] [Revenue Boost] âœ… exit_intent trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv36zo001furwk7jhuelw3
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-exit-intent-EXIT_INTENT-1764515698980
[BROWSER] [Revenue Boost] Popup shown: cmilv36zo001furwk7jhuelw3
âœ… Exit Intent popup with email input rendered
  âœ“   79 [storefront] â€º tests/e2e/staging/storefront-exit-intent.spec.ts:115:3 â€º Exit Intent Template â€º renders popup with email input on exit intent (9.1s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv3dqc001hurwkmai2pycs
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515711807_tsgqn9osm
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515711807_ybyflnuol
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [EXIT_INTENT]
[BROWSER] [Revenue Boost] Exit Intent popup registered
[BROWSER] [Revenue Boost] âœ… High priority components ready
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-exit-intent-EXIT_INTENT-1764515707716 [modal]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv3dqc001hurwkmai2pycs, name: E2E-exit-intent-EXIT_INTENT-1764515707716, templateType: EXIT_INTENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv3dqc001hurwkmai2pycs, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-exit-intent-EXIT_INTENT-1764515707716
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv3dqc001hurwkmai2pycs
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] [Revenue Boost] ğŸšª Checking exit_intent trigger: {enabled: true, sensitivity: medium}
[BROWSER] [Revenue Boost] ğŸšª exit_intent trigger waiting for exit intent (sensitivity: medium, delay: 1000ms, mobileEnabled=false)
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… exit_intent trigger detected: User showed exit intent
[BROWSER] [Revenue Boost] âœ… exit_intent trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv3dqc001hurwkmai2pycs
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-exit-intent-EXIT_INTENT-1764515707716
[BROWSER] [Revenue Boost] Popup shown: cmilv3dqc001hurwkmai2pycs
âœ… Custom headline "Wait! Before you go..." displayed
  âœ“   80 [storefront] â€º tests/e2e/staging/storefront-exit-intent.spec.ts:153:3 â€º Exit Intent Template â€º displays custom headline (8.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv3kj9001jurwkfc8egfxk
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515720653_ii7q3k482
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515720653_99iny3q5v
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [EXIT_INTENT]
[BROWSER] [Revenue Boost] Exit Intent popup registered
[BROWSER] [Revenue Boost] âœ… High priority components ready
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-exit-intent-EXIT_INTENT-1764515716533 [modal]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv3kj9001jurwkfc8egfxk, name: E2E-exit-intent-EXIT_INTENT-1764515716533, templateType: EXIT_INTENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv3kj9001jurwkfc8egfxk, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-exit-intent-EXIT_INTENT-1764515716533
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv3kj9001jurwkfc8egfxk
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] [Revenue Boost] ğŸšª Checking exit_intent trigger: {enabled: true, sensitivity: medium}
[BROWSER] [Revenue Boost] ğŸšª exit_intent trigger waiting for exit intent (sensitivity: medium, delay: 1000ms, mobileEnabled=false)
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… exit_intent trigger detected: User showed exit intent
[BROWSER] [Revenue Boost] âœ… exit_intent trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv3kj9001jurwkfc8egfxk
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-exit-intent-EXIT_INTENT-1764515716533
[BROWSER] [Revenue Boost] Popup shown: cmilv3kj9001jurwkfc8egfxk
âœ… GDPR checkbox rendered
âœ… GDPR text content verified
  âœ“   81 [storefront] â€º tests/e2e/staging/storefront-exit-intent.spec.ts:185:3 â€º Exit Intent Template â€º shows GDPR checkbox when enabled (8.8s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv3ra5001lurwkhu6kdhjp
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515729395_a2riml5wt
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515729395_an5a4i44g
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [EXIT_INTENT]
[BROWSER] [Revenue Boost] Exit Intent popup registered
[BROWSER] [Revenue Boost] âœ… High priority components ready
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-exit-intent-EXIT_INTENT-1764515725277 [modal]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv3ra5001lurwkhu6kdhjp, name: E2E-exit-intent-EXIT_INTENT-1764515725277, templateType: EXIT_INTENT}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv3ra5001lurwkhu6kdhjp, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-exit-intent-EXIT_INTENT-1764515725277
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv3ra5001lurwkhu6kdhjp
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] [Revenue Boost] ğŸšª Checking exit_intent trigger: {enabled: true, sensitivity: medium}
[BROWSER] [Revenue Boost] ğŸšª exit_intent trigger waiting for exit intent (sensitivity: medium, delay: 1000ms, mobileEnabled=false)
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… exit_intent trigger detected: User showed exit intent
[BROWSER] [Revenue Boost] âœ… exit_intent trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv3ra5001lurwkhu6kdhjp
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-exit-intent-EXIT_INTENT-1764515725277
[BROWSER] [Revenue Boost] Popup shown: cmilv3ra5001lurwkhu6kdhjp
âœ… Email "exit-test-1764515733779@example.com" filled successfully
  âœ“   82 [storefront] â€º tests/e2e/staging/storefront-exit-intent.spec.ts:217:3 â€º Exit Intent Template â€º email input is functional (8.7s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
âœ… Campaign created: cmilv3zgu001nurwktqkq4pd6
ğŸ”’ Password page detected, logging in...
âœ… Flash Sale popup with countdown timer rendered
  âœ“   83 [storefront] â€º tests/e2e/staging/storefront-flash-sale.spec.ts:72:3 â€º Flash Sale Template â€º renders flash sale popup with countdown timer (5.9s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv43rd001purwk1vu8rzjk
ğŸ”’ Password page detected, logging in...
âœ… Urgency message "Only 2 hours left!" displayed
  âœ“   84 [storefront] â€º tests/e2e/staging/storefront-flash-sale.spec.ts:107:3 â€º Flash Sale Template â€º displays custom urgency message (5.6s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv4833001rurwksrowqex1
ğŸ”’ Password page detected, logging in...
âœ… 30% discount displayed
  âœ“   85 [storefront] â€º tests/e2e/staging/storefront-flash-sale.spec.ts:141:3 â€º Flash Sale Template â€º displays discount percentage prominently (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv4ck1001turwkokkx8t8d
ğŸ”’ Password page detected, logging in...
âœ… Stock counter message displayed
  âœ“   86 [storefront] â€º tests/e2e/staging/storefront-flash-sale.spec.ts:176:3 â€º Flash Sale Template â€º shows stock counter message (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv4gw6001vurwkan4lj036
ğŸ”’ Password page detected, logging in...
âœ… CTA button found and clickable
  âœ“   87 [storefront] â€º tests/e2e/staging/storefront-flash-sale.spec.ts:203:3 â€º Flash Sale Template â€º CTA button is clickable (5.8s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
âœ… Campaign created: cmilv4mpr001xurwk1sscc941
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515770079_vcagxbur8
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515770080_xwxrexy2a
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [FREE_SHIPPING]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-free-shipping-FREE_SHIPPING-1764515766015 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv4mpr001xurwk1sscc941, name: E2E-free-shipping-FREE_SHIPPING-1764515766015, templateType: FREE_SHIPPING}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv4mpr001xurwk1sscc941, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-free-shipping-FREE_SHIPPING-1764515766015
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv4mpr001xurwk1sscc941
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv4mpr001xurwk1sscc941
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-free-shipping-FREE_SHIPPING-1764515766015
[BROWSER] [Revenue Boost] Free Shipping popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv4mpr001xurwk1sscc941
âœ… Free shipping message with threshold displayed
  âœ“   88 [storefront] â€º tests/e2e/staging/storefront-free-shipping.spec.ts:76:3 â€º Free Shipping Template â€º displays free shipping message with threshold (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv4qw2001zurwkt0ffrkl6
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515775482_xl1qk40na
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515775482_vh8tkhsft
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [FREE_SHIPPING]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-free-shipping-FREE_SHIPPING-1764515771426 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv4qw2001zurwkt0ffrkl6, name: E2E-free-shipping-FREE_SHIPPING-1764515771426, templateType: FREE_SHIPPING}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv4qw2001zurwkt0ffrkl6, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-free-shipping-FREE_SHIPPING-1764515771426
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv4qw2001zurwkt0ffrkl6
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv4qw2001zurwkt0ffrkl6
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-free-shipping-FREE_SHIPPING-1764515771426
[BROWSER] [Revenue Boost] Free Shipping popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv4qw2001zurwkt0ffrkl6
âš ï¸ Progress bar not found - may use different styling
  âœ“   89 [storefront] â€º tests/e2e/staging/storefront-free-shipping.spec.ts:104:3 â€º Free Shipping Template â€º shows progress bar element (5.4s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv4v230021urwkykwls3lh
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515780928_sjz29gjyf
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515780928_9pknyyroa
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [FREE_SHIPPING]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-free-shipping-FREE_SHIPPING-1764515776827 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv4v230021urwkykwls3lh, name: E2E-free-shipping-FREE_SHIPPING-1764515776827, templateType: FREE_SHIPPING}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv4v230021urwkykwls3lh, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-free-shipping-FREE_SHIPPING-1764515776827
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv4v230021urwkykwls3lh
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv4v230021urwkykwls3lh
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-free-shipping-FREE_SHIPPING-1764515776827
[BROWSER] [Revenue Boost] Free Shipping popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv4v230021urwkykwls3lh
âš ï¸ Currency symbol not found - may use default
  âœ“   90 [storefront] â€º tests/e2e/staging/storefront-free-shipping.spec.ts:128:3 â€º Free Shipping Template â€º displays custom currency symbol (5.4s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv4zc70023urwk7yc4e3rw
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515786363_tgrwpt1n8
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515786363_zdjri94ql
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [FREE_SHIPPING]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-free-shipping-FREE_SHIPPING-1764515782374 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv4zc70023urwk7yc4e3rw, name: E2E-free-shipping-FREE_SHIPPING-1764515782374, templateType: FREE_SHIPPING}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv4zc70023urwk7yc4e3rw, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-free-shipping-FREE_SHIPPING-1764515782374
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv4zc70023urwk7yc4e3rw
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv4zc70023urwk7yc4e3rw
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-free-shipping-FREE_SHIPPING-1764515782374
[BROWSER] [Revenue Boost] Free Shipping popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv4zc70023urwk7yc4e3rw
âœ… Bottom position styling detected
  âœ“   91 [storefront] â€º tests/e2e/staging/storefront-free-shipping.spec.ts:154:3 â€º Free Shipping Template â€º bar appears at specified position (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing free shipping state messages...
âœ… Campaign created: cmilv53nb0025urwkefp03gfo
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515792022_dahfj7rlw
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515792022_6pgf7yy32
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [FREE_SHIPPING]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-free-shipping-FREE_SHIPPING-1764515787958 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv53nb0025urwkefp03gfo, name: E2E-free-shipping-FREE_SHIPPING-1764515787958, templateType: FREE_SHIPPING}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv53nb0025urwkefp03gfo, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-free-shipping-FREE_SHIPPING-1764515787958
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv53nb0025urwkefp03gfo
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv53nb0025urwkefp03gfo
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-free-shipping-FREE_SHIPPING-1764515787958
[BROWSER] [Revenue Boost] Free Shipping popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv53nb0025urwkefp03gfo
State messages: empty=true, progress=false, nearMiss=false, unlocked=false
âœ… State-based messaging configured
  âœ“   92 [storefront] â€º tests/e2e/staging/storefront-free-shipping.spec.ts:178:3 â€º Free Shipping Template â€º displays appropriate message based on cart state (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing unlock celebration...
âœ… Campaign created: cmilv580q0027urwk74es670v
ğŸ”’ Password page detected, logging in...
[BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515797929_12gowqfnx
[BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515797929_uc9um3wyv
[BROWSER] [Revenue Boost] DOM ready
[BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] [Revenue Boost] Page view tracked for social proof
[BROWSER] [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] [Revenue Boost] Campaign details: [Object]
[BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [FREE_SHIPPING]
[BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-free-shipping-FREE_SHIPPING-1764515793626 [banner]]
[BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv580q0027urwk74es670v, name: E2E-free-shipping-FREE_SHIPPING-1764515793626, templateType: FREE_SHIPPING}
[BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv580q0027urwk74es670v, behavior: instant}
[BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-free-shipping-FREE_SHIPPING-1764515793626
[BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv580q0027urwk74es670v
[BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] [Revenue Boost] âœ… Initialization complete!
[BROWSER] [Revenue Boost] âœ… page_load trigger passed
[BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv580q0027urwk74es670v
[BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-free-shipping-FREE_SHIPPING-1764515793626
[BROWSER] [Revenue Boost] Free Shipping popup registered
[BROWSER] [Revenue Boost] Popup shown: cmilv580q0027urwk74es670v
Celebration elements: false
âœ… Free shipping bar with celebration option rendered
  âœ“   93 [storefront] â€º tests/e2e/staging/storefront-free-shipping.spec.ts:228:3 â€º Free Shipping Template â€º shows unlock animation/celebration when threshold reached (5.7s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
âœ… Campaign created: cmilv5dy80029urwknx4y0c0b
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515805361_n9cpko8o9
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515805361_9rt6pyplb
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515805361_n9cpko8o9&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515805361_9rt6pyplb&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515805361_n9cpko8o9, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515805361_9rt6pyplb}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:16:45.975Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515805365
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-interaction-patterns-NEWSLETTER-1764515801311 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv5dy80029urwknx4y0c0b, name: E2E-interaction-patterns-NEWSLETTER-1764515801311, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv5dy80029urwknx4y0c0b, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-interaction-patterns-NEWSLETTER-1764515801311
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv5dy80029urwknx4y0c0b
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv5dy80029urwknx4y0c0b
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-interaction-patterns-NEWSLETTER-1764515801311
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilv5dy80029urwknx4y0c0b (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilv5dy80029urwknx4y0c0b
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilv5dy80029urwknx4y0c0b
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilv5dy80029urwknx4y0c0b, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Email validation working - invalid email prevented submission
  âœ“   94 [storefront] â€º tests/e2e/staging/storefront-interaction-patterns.spec.ts:76:5 â€º Interaction Patterns - Cross-Template Tests â€º Email Validation â€º validates email format in Newsletter form (9.3s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv5kv5002burwkclyy3mxf
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515814286_ppkydlrwh
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515814286_4oykvlv9t
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515814286_ppkydlrwh&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515814286_4oykvlv9t&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515814286_ppkydlrwh, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515814286_4oykvlv9t}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:16:54.974Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515814290
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-interaction-patterns-NEWSLETTER-1764515810273 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv5kv5002burwkclyy3mxf, name: E2E-interaction-patterns-NEWSLETTER-1764515810273, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv5kv5002burwkclyy3mxf, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-interaction-patterns-NEWSLETTER-1764515810273
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv5kv5002burwkclyy3mxf
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv5kv5002burwkclyy3mxf
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-interaction-patterns-NEWSLETTER-1764515810273
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilv5kv5002burwkclyy3mxf (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilv5kv5002burwkclyy3mxf
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilv5kv5002burwkclyy3mxf
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilv5kv5002burwkclyy3mxf, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
[BROWSER] log: [PopupManager] Submitting lead: {email: test-1764515815652@example.com, name: undefined, gdprConsent: false}
[BROWSER] error: Failed to load resource: the server responded with a status of 403 ()
[BROWSER] error: [Revenue Boost API] Failed to submit lead: Error: Invalid token
    at we.submitLead (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:24204)
    at async w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48324)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515814290:292:2360
[BROWSER] error: [PopupManager] Failed to submit lead: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515814290:292:2360
[BROWSER] error: Form submission error: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515814290:292:2360
âœ… Valid email accepted, success state verified
  âœ“   95 [storefront] â€º tests/e2e/staging/storefront-interaction-patterns.spec.ts:119:5 â€º Interaction Patterns - Cross-Template Tests â€º Email Validation â€º accepts valid email format and submits form (9.1s)
[Cleanup] Deleted 1 E2E test campaigns
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515821145_5ijr77023
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515821145_qr0zf2vwc
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515821145_5ijr77023&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515821145_qr0zf2vwc&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515821145_5ijr77023, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515821145_qr0zf2vwc}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:17:01.999Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515821149
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-interaction-patterns-NEWSLETTER-1764515819494 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv5rza002durwk4ifzonk1, name: E2E-interaction-patterns-NEWSLETTER-1764515819494, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv5rza002durwk4ifzonk1, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-interaction-patterns-NEWSLETTER-1764515819494
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv5rza002durwk4ifzonk1
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv5rza002durwk4ifzonk1
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-interaction-patterns-NEWSLETTER-1764515819494
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilv5rza002durwk4ifzonk1 (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilv5rza002durwk4ifzonk1
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilv5rza002durwk4ifzonk1
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilv5rza002durwk4ifzonk1, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
[BROWSER] log: [PopupManager] Submitting lead: {email: test@example.com, name: undefined, gdprConsent: false}
[BROWSER] error: Failed to load resource: the server responded with a status of 403 ()
[BROWSER] error: [Revenue Boost API] Failed to submit lead: Error: Invalid token
    at we.submitLead (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:24204)
    at async w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48324)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515821149:292:2360
[BROWSER] error: [PopupManager] Failed to submit lead: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515821149:292:2360
[BROWSER] error: Form submission error: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515821149:292:2360
âœ… GDPR consent required - submission blocked without checkbox
  âœ“   96 [storefront] â€º tests/e2e/staging/storefront-interaction-patterns.spec.ts:155:5 â€º Interaction Patterns - Cross-Template Tests â€º GDPR Consent â€º requires GDPR consent when enabled (6.9s)
[Cleanup] Deleted 1 E2E test campaigns
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515830324_whrpure9o
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515830324_4erc9395r
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515830324_whrpure9o&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515830324_4erc9395r&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515830324_whrpure9o, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515830324_4erc9395r}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:17:10.976Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515830328
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-interaction-patterns-NEWSLETTER-1764515826240 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv5x6p002furwkddgj20vl, name: E2E-interaction-patterns-NEWSLETTER-1764515826240, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv5x6p002furwkddgj20vl, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-interaction-patterns-NEWSLETTER-1764515826240
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv5x6p002furwkddgj20vl
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv5x6p002furwkddgj20vl
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-interaction-patterns-NEWSLETTER-1764515826240
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilv5x6p002furwkddgj20vl (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilv5x6p002furwkddgj20vl
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilv5x6p002furwkddgj20vl
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilv5x6p002furwkddgj20vl, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
[BROWSER] log: [PopupManager] Submitting lead: {email: gdpr-test-1764515831691@example.com, name: undefined, gdprConsent: true}
[BROWSER] error: Failed to load resource: the server responded with a status of 403 ()
[BROWSER] error: [Revenue Boost API] Failed to submit lead: Error: Invalid token
    at we.submitLead (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:24204)
    at async w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48324)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515830328:292:2360
[BROWSER] error: [PopupManager] Failed to submit lead: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515830328:292:2360
[BROWSER] error: Form submission error: Error: Invalid token
    at w (https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js:1:48506)
    at async https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515830328:292:2360
âœ… GDPR consent form submitted successfully
  âœ“   97 [storefront] â€º tests/e2e/staging/storefront-interaction-patterns.spec.ts:184:5 â€º Interaction Patterns - Cross-Template Tests â€º GDPR Consent â€º allows submission when GDPR consent is checked (8.2s)
[Cleanup] Deleted 1 E2E test campaigns
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515836099_pnbte9xwz
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515836099_6szjpzdcx
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515836099_pnbte9xwz&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515836099_6szjpzdcx&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515836099_pnbte9xwz, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515836099_6szjpzdcx}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:17:16.753Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [SPIN_TO_WIN]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/spin-to-win.bundle.js?v=1764515836103
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-interaction-patterns-SPIN_TO_WIN-1764515834657 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv63oi002hurwkguex0o3m, name: E2E-interaction-patterns-SPIN_TO_WIN-1764515834657, templateType: SPIN_TO_WIN}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv63oi002hurwkguex0o3m, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-interaction-patterns-SPIN_TO_WIN-1764515834657
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv63oi002hurwkguex0o3m
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv63oi002hurwkguex0o3m
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-interaction-patterns-SPIN_TO_WIN-1764515834657
[BROWSER] debug: [Revenue Boost] Spin to Win popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: SPIN_TO_WIN
[BROWSER] log: [PopupManager] Initializing popup for: SPIN_TO_WIN
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilv63oi002hurwkguex0o3m (SPIN_TO_WIN)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilv63oi002hurwkguex0o3m
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: SPIN_TO_WIN
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilv63oi002hurwkguex0o3m
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilv63oi002hurwkguex0o3m, templateType: SPIN_TO_WIN, contentConfig: Object, designConfig: Object}
âœ… Spin to Win popup rendered with spin elements
  âœ“   98 [storefront] â€º tests/e2e/staging/storefront-interaction-patterns.spec.ts:210:5 â€º Interaction Patterns - Cross-Template Tests â€º Discount Code Generation â€º spin button becomes available for interaction (3.8s)
[Cleanup] Deleted 1 E2E test campaigns
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515839944_oxy2syc7k
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515839944_doop3n6b5
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515839944_oxy2syc7k&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515839944_doop3n6b5&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515839944_oxy2syc7k, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515839944_doop3n6b5}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:17:20.591Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515839947
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-interaction-patterns-NEWSLETTER-1764515838234 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv66fu002jurwkqqprl4cp, name: E2E-interaction-patterns-NEWSLETTER-1764515838234, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv66fu002jurwkqqprl4cp, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-interaction-patterns-NEWSLETTER-1764515838234
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv66fu002jurwkqqprl4cp
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv66fu002jurwkqqprl4cp
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-interaction-patterns-NEWSLETTER-1764515838234
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilv66fu002jurwkqqprl4cp (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilv66fu002jurwkqqprl4cp
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilv66fu002jurwkqqprl4cp
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilv66fu002jurwkqqprl4cp, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Multi-step workflow popup rendered
  âœ“   99 [storefront] â€º tests/e2e/staging/storefront-interaction-patterns.spec.ts:234:5 â€º Interaction Patterns - Cross-Template Tests â€º Multi-Step Workflows â€º completes email-then-action workflow (3.8s)
[Cleanup] Deleted 1 E2E test campaigns
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764515843713_2d07e2h7l
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515843713_18irpmcye
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515843713_2d07e2h7l&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515843713_18irpmcye&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764515843713_2d07e2h7l, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764515843713_18irpmcye}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:17:24.356Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764515843716
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-interaction-patterns-NEWSLETTER-1764515842056 [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv69e0002lurwk5rlf6t3k, name: E2E-interaction-patterns-NEWSLETTER-1764515842056, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv69e0002lurwk5rlf6t3k, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-interaction-patterns-NEWSLETTER-1764515842056
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv69e0002lurwk5rlf6t3k
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv69e0002lurwk5rlf6t3k
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-interaction-patterns-NEWSLETTER-1764515842056
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilv69e0002lurwk5rlf6t3k (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilv69e0002lurwk5rlf6t3k
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 1ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilv69e0002lurwk5rlf6t3k
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilv69e0002lurwk5rlf6t3k, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Form field validation popup rendered
  âœ“  100 [storefront] â€º tests/e2e/staging/storefront-interaction-patterns.spec.ts:258:5 â€º Interaction Patterns - Cross-Template Tests â€º Form Field Validation â€º shows required field error for empty email (3.5s)
ğŸ§ª Testing close button functionality...
ğŸ”’ Password page detected, logging in...
âœ… Popup appeared
âœ… Close button clicked
Popup hidden after close: true
  âœ“  101 [storefront] â€º tests/e2e/staging/storefront-interactions.spec.ts:51:5 â€º Popup Interactions â€º Close Button â€º close button dismisses popup (7.2s)
ğŸ§ª Testing ESC key dismissal...
ğŸ”’ Password page detected, logging in...
âœ… Popup appeared
âœ… ESC key pressed
âœ… Popup dismissed with ESC key
  âœ“  102 [storefront] â€º tests/e2e/staging/storefront-interactions.spec.ts:119:5 â€º Popup Interactions â€º Keyboard Navigation â€º ESC key dismisses popup (6.0s)
ğŸ§ª Testing Tab key navigation (accessibility)...
ğŸ”’ Password page detected, logging in...
Found 4 focusable elements
âš ï¸ Focus escaped popup - focus trapping may not be implemented
  âœ“  103 [storefront] â€º tests/e2e/staging/storefront-interactions.spec.ts:162:5 â€º Popup Interactions â€º Keyboard Navigation â€º Tab key navigates through focusable elements (6.4s)
ğŸ§ª Testing overlay click dismissal...
ğŸ”’ Password page detected, logging in...
âœ… Popup appeared
âœ… Clicked on overlay
âš ï¸ Popup still visible - overlay dismiss may not be enabled
  âœ“  104 [storefront] â€º tests/e2e/staging/storefront-interactions.spec.ts:213:5 â€º Popup Interactions â€º Overlay Click â€º clicking overlay dismisses popup (6.2s)
ğŸ§ª Testing invalid email validation...
ğŸ”’ Password page detected, logging in...
âœ… Invalid email error shown
  âœ“  105 [storefront] â€º tests/e2e/staging/storefront-interactions.spec.ts:295:3 â€º Form Validation â€º shows error for invalid email format (6.5s)
ğŸ§ª Testing empty email validation...
ğŸ”’ Password page detected, logging in...
âœ… Email field has required validation
  âœ“  106 [storefront] â€º tests/e2e/staging/storefront-interactions.spec.ts:369:3 â€º Form Validation â€º shows error for empty required email (6.1s)
ğŸ§ª Testing GDPR checkbox requirement...
ğŸ”’ Password page detected, logging in...
GDPR checkbox: required=false, checked=false
  âœ“  107 [storefront] â€º tests/e2e/staging/storefront-interactions.spec.ts:418:3 â€º Form Validation â€º GDPR checkbox must be checked before submission (6.1s)
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
ğŸ§¹ Cleaned up old test campaigns

ğŸ§ª MINIMAL REPRODUCTION TEST

===============================


Step 1: Creating minimal campaign (Name + Priority)...
âœ… Campaign created: cmilv7dek0031urwkakeobp3f
   Name: E2E-minimal-test-E2E-Test-MINIMAL-TEST
   Priority: 999
   Status: ACTIVE
   Template: NEWSLETTER

ğŸ“‹ Full campaign config:
   targetRules: {
  "pageTargeting": {
    "pages": [],
    "enabled": false,
    "collections": [],
    "productTags": [],
    "excludePages": [],
    "customPatterns": []
  },
  "enhancedTriggers": {
    "enabled": true,
    "page_load": {
      "delay": 0,
      "enabled": true
    },
    "device_targeting": {
      "enabled": true,
      "device_types": [
        "desktop",
        "tablet",
        "mobile"
      ]
    },
    "frequency_capping": {
      "max_triggers_per_day": 999,
      "max_triggers_per_session": 999,
      "cooldown_between_triggers": 0
    }
  },
  "audienceTargeting": {
    "enabled": false,
    "sessionRules": {
      "enabled": false,
      "conditions": [],
      "logicOperator": "AND"
    },
    "shopifySegmentIds": []
  }
}
   discountConfig: {}

Step 2: Setting up API monitoring...

Step 3: Visiting storefront...
ğŸ”’ Password page detected, logging in...
   [BROWSER] [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
   [BROWSER] [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
   [BROWSER] [Revenue Boost] â„¹ï¸ No preview parameters found
   [BROWSER] [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
   [BROWSER] [Revenue Boost] âš›ï¸ Preact runtime exposed globally
   [BROWSER] [Revenue Boost] ğŸ” Challenge token store exposed globally
   [BROWSER] [Revenue Boost] ğŸš€ Starting initialization...
   [BROWSER] [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
   [BROWSER] [Revenue Boost] ğŸ”‘ Session ID: session_1764515896832_u6eqw4lti
   [BROWSER] [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764515896832_yt9m7pwvt
   [BROWSER] [Revenue Boost] DOM ready
   [BROWSER] [Revenue Boost] ğŸ›’ Cart tracking initialized
   [BROWSER] [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
   [BROWSER] [Revenue Boost] Page view tracked for social proof

ğŸ“¡ API Call URL: https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764515896832_u6eqw4lti&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764515896832_yt9m7pwvt&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
   Status: 200
   [BROWSER] [Revenue Boost] âœ… Campaigns received: 1
   [BROWSER] [Revenue Boost] Campaign details: [Object]
   [BROWSER] [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
   [BROWSER] [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
   [BROWSER] [Revenue Boost] Selected campaigns by surface: [E2E-minimal-test-E2E-Test-MINIMAL-TEST [modal]]
   [BROWSER] [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilv7dek0031urwkakeobp3f, name: E2E-minimal-test-E2E-Test-MINIMAL-TEST, templateType: NEWSLETTER}
   [BROWSER] [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilv7dek0031urwkakeobp3f, behavior: instant}
   [BROWSER] [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-minimal-test-E2E-Test-MINIMAL-TEST
   [BROWSER] [Revenue Boost] ğŸ” Evaluating triggers...
   [BROWSER] [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilv7dek0031urwkakeobp3f
   [BROWSER] [Revenue Boost] ğŸ”— Trigger logic operator: AND
   [BROWSER] [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
   [BROWSER] [Revenue Boost] â³ page_load trigger waiting 0ms before showing
   [BROWSER] [Revenue Boost] âœ… page_load trigger delay completed
   [BROWSER] [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
   [BROWSER] [Revenue Boost] âœ… Initialization complete!
   [BROWSER] [Revenue Boost] âœ… page_load trigger passed
   [BROWSER] [Revenue Boost] âœ… AND logic satisfied: All triggers passed
   [BROWSER] [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilv7dek0031urwkakeobp3f
   [BROWSER] [Revenue Boost] âœ… Triggers passed, showing campaign
   [BROWSER] [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-minimal-test-E2E-Test-MINIMAL-TEST
   Total campaigns: 1
   1. E2E-minimal-test-E2E-Test-MINIMAL-TEST (priority: 999, id: cmilv7dek0031urwkakeobp3f)
   [BROWSER] [Revenue Boost] Newsletter popup registered
   [BROWSER] [Revenue Boost] Popup shown: cmilv7dek0031urwkakeobp3f

Step 4: Checking API results...
   Our campaign ID: cmilv7dek0031urwkakeobp3f
   Campaigns returned by API: 1
   1. E2E-minimal-test-E2E-Test-MINIMAL-TEST (cmilv7dek0031urwkakeobp3f) - priority: 999

âœ… SUCCESS: Campaign cmilv7dek0031urwkakeobp3f was returned by API

Step 5: Checking if popup appears...
âœ… Popup appeared on storefront!

ğŸ‰ MINIMAL TEST PASSED - Campaign is working correctly


âš ï¸  Leaving campaign cmilv7dek0031urwkakeobp3f in DB for inspection
   Run cleanup script to remove: npx tsx scripts/cleanup-e2e-campaigns.ts

  âœ“  108 [storefront] â€º tests/e2e/staging/storefront-minimal-test.spec.ts:61:3 â€º Minimal Reproduction â€º minimal campaign appears in API and on storefront (8.0s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ“¡ add observability to secrets: https://dotenvx.com/ops
âœ… Campaign created: cmilv7l990033urwkqfw9hny3
ğŸ”’ Password page detected, logging in...
âœ… Newsletter popup with email input rendered
âœ… Submit button present
  âœ“  109 [storefront] â€º tests/e2e/staging/storefront-newsletter.spec.ts:75:3 â€º Newsletter Template â€º renders with email input and submit button (6.5s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv7q0o0035urwkwu7g2fra
ğŸ”’ Password page detected, logging in...
âœ… GDPR checkbox rendered
âœ… GDPR text content verified
  âœ“  110 [storefront] â€º tests/e2e/staging/storefront-newsletter.spec.ts:105:3 â€º Newsletter Template â€º displays GDPR checkbox with custom text (6.2s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv7utb0037urwko1hw2kyg
ğŸ”’ Password page detected, logging in...
âœ… Custom headline "Join the VIP Club Today!" displayed
  âœ“  111 [storefront] â€º tests/e2e/staging/storefront-newsletter.spec.ts:149:3 â€º Newsletter Template â€º displays custom headline (6.3s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv7zr20039urwk24mfw1yl
ğŸ”’ Password page detected, logging in...
âœ… Popup visible
âœ… Email "test-1764515928380@example.com" filled successfully
âœ… Form submitted
âœ… Form submission success state detected
âœ… Success message displayed
  âœ“  112 [storefront] â€º tests/e2e/staging/storefront-newsletter.spec.ts:191:3 â€º Newsletter Template â€º email input accepts valid email and submits form (6.4s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv84l7003burwkokju6rmm
ğŸ”’ Password page detected, logging in...
âœ… Button text "Get My Discount" displayed
  âœ“  113 [storefront] â€º tests/e2e/staging/storefront-newsletter.spec.ts:229:3 â€º Newsletter Template â€º custom button text is displayed (6.5s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv89lr003durwk8eem74fe
ğŸ”’ Password page detected, logging in...
âœ… Email placeholder "Enter your best email" displayed
  âœ“  114 [storefront] â€º tests/e2e/staging/storefront-newsletter.spec.ts:263:3 â€º Newsletter Template â€º custom email placeholder is displayed (5.7s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  override existing env vars with { override: true }
âœ… Campaign created: cmilv8ezt003furwkk1hcjz63
ğŸ”’ Password page detected, logging in...
Shadow content length: 23195
âœ… Product images displayed
âœ… Product prices displayed
  âœ“  115 [storefront] â€º tests/e2e/staging/storefront-product-upsell.spec.ts:73:3 â€º Product Upsell Template â€º displays products with images and prices (7.3s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv8kdl003hurwktgc74vqi
ğŸ”’ Password page detected, logging in...
âœ… Add to cart buttons present
  âœ“  116 [storefront] â€º tests/e2e/staging/storefront-product-upsell.spec.ts:117:3 â€º Product Upsell Template â€º shows add to cart buttons (6.5s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv8pf7003jurwk7x9l4xp2
ğŸ”’ Password page detected, logging in...
âœ… Bundle discount 20% displayed
  âœ“  117 [storefront] â€º tests/e2e/staging/storefront-product-upsell.spec.ts:141:3 â€º Product Upsell Template â€º displays bundle discount percentage (7.0s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing add to cart interaction...
âœ… Campaign created: cmilv8uve003lurwkemkw3ww9
ğŸ”’ Password page detected, logging in...
Product selection attempted: true
âœ… Add to cart button clicked
âœ… Add to cart triggered API request
  âœ“  118 [storefront] â€º tests/e2e/staging/storefront-product-upsell.spec.ts:166:3 â€º Product Upsell Template â€º add to cart button interaction works (8.2s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing product information display...
âœ… Campaign created: cmilv9145003nurwk1ddfgygp
ğŸ”’ Password page detected, logging in...
âœ… Product information displayed
  âœ“  119 [storefront] â€º tests/e2e/staging/storefront-product-upsell.spec.ts:247:3 â€º Product Upsell Template â€º displays product titles and descriptions (6.1s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing frequently bought together...
âœ… Campaign created: cmilv95uu003purwkm7rk2m39
ğŸ”’ Password page detected, logging in...
âœ… Frequently bought together popup rendered
  âœ“  120 [storefront] â€º tests/e2e/staging/storefront-product-upsell.spec.ts:276:3 â€º Product Upsell Template â€º frequently bought together layout (6.9s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
âœ… Campaign created: cmilv9cjd003rurwkixe64rvz
ğŸ”’ Password page detected, logging in...
âœ… Scratch card canvas rendered
  âœ“  121 [storefront] â€º tests/e2e/staging/storefront-scratch-card.spec.ts:68:3 â€º Scratch Card Template â€º renders with scratch canvas element (6.3s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv9h63003turwkv3otvmol
ğŸ”’ Password page detected, logging in...
âœ… Headline "Scratch to Win a Prize!" displayed
  âœ“  122 [storefront] â€º tests/e2e/staging/storefront-scratch-card.spec.ts:102:3 â€º Scratch Card Template â€º displays custom headline (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilv9ll7003vurwkcsx2cz11
ğŸ”’ Password page detected, logging in...
Email verification: Scratch canvas not found
  âœ“  123 [storefront] â€º tests/e2e/staging/storefront-scratch-card.spec.ts:133:3 â€º Scratch Card Template â€º shows email input when required before scratching (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing scratch interaction...
âœ… Campaign created: cmilv9q29003xurwkixz7vpi7
ğŸ”’ Password page detected, logging in...
âœ… Scratch canvas present
âœ… Scratch gesture simulated
  âœ“  124 [storefront] â€º tests/e2e/staging/storefront-scratch-card.spec.ts:162:3 â€º Scratch Card Template â€º scratch interaction reveals prize (5.8s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing GDPR checkbox in scratch-card...
âœ… Campaign created: cmilv9uh9003zurwkbzekfv7q
ğŸ”’ Password page detected, logging in...
GDPR: checkbox=false, consentText=false
  âœ“  125 [storefront] â€º tests/e2e/staging/storefront-scratch-card.spec.ts:220:3 â€º Scratch Card Template â€º displays GDPR checkbox when enabled (5.2s)
[dotenv@17.2.3] injecting env (0) from .env.staging.env -- tip: âš™ï¸  override existing env vars with { override: true }
âœ… Campaign created: cmilv9zsc0041urwk16txjha1
ğŸ”’ Password page detected, logging in...
âœ… First impression: Popup appeared
âœ… Popup closed
âœ… Second visit: Popup correctly NOT shown (frequency cap enforced)
  âœ“  126 [storefront] â€º tests/e2e/staging/storefront-session-rules.spec.ts:66:3 â€º Session Rules & Frequency Capping â€º max impressions per session enforces limit in browser (14.9s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvab3h0043urwknrwrzi88
ğŸ”’ Password page detected, logging in...
âœ… Session 1: Popup appeared
Popup close result: true
âœ… Session 1: Popup not shown after reload (limit may be enforced)
âœ… Cleared cookies and storage for new session
ğŸ”’ Password page detected, logging in...
âœ… New session: Popup appeared again (session reset worked)
  âœ“  127 [storefront] â€º tests/e2e/staging/storefront-session-rules.spec.ts:126:3 â€º Session Rules & Frequency Capping â€º session limit resets with new session (16.3s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvanop0045urwk25x5d334
ğŸ”’ Password page detected, logging in...
âœ… Impression 1/3: Popup appeared
  âœ˜  128 [storefront] â€º tests/e2e/staging/storefront-session-rules.spec.ts:190:3 â€º Session Rules & Frequency Capping â€º multiple impressions allowed when configured (21.6s)
  -  129 [storefront] â€º tests/e2e/staging/storefront-session-rules.spec.ts:237:3 â€º Session Rules & Frequency Capping â€º session persistence survives page navigation
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  override existing env vars with { override: true }
[E2E] Loaded environment from .env.staging.env
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
âœ… Campaign created: cmilvb62o0001urbbvvjqo71b
ğŸ”’ Password page detected, logging in...
âœ… Social proof purchase notification content displayed
  âœ“  130 [storefront] â€º tests/e2e/staging/storefront-social-proof.spec.ts:71:3 â€º Social Proof Template â€º renders notification with purchase content (6.9s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvbb470003urbba8qzu1bc
ğŸ”’ Password page detected, logging in...
Position styles: {"position":"fixed","bottom":"20px","right":"940px"}
âœ… Social proof notification rendered
  âœ“  131 [storefront] â€º tests/e2e/staging/storefront-social-proof.spec.ts:97:3 â€º Social Proof Template â€º notification appears in corner position (6.3s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvbfyr0005urbb7r8nwzj2
ğŸ”’ Password page detected, logging in...
âœ… Notification appeared
âœ… Notification auto-hidden after duration
  âœ“  132 [storefront] â€º tests/e2e/staging/storefront-social-proof.spec.ts:122:3 â€º Social Proof Template â€º notification auto-hides after display duration (11.2s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing purchase notification content...
âœ… Campaign created: cmilvboox0007urbbr4r9ua9z
ğŸ”’ Password page detected, logging in...
Purchase notification: text=true, image=false
âœ… Purchase notification rendered
  âœ“  133 [storefront] â€º tests/e2e/staging/storefront-social-proof.spec.ts:149:3 â€º Social Proof Template â€º shows purchase notification with product info (7.5s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing max notifications limit...
âœ… Campaign created: cmilvbudm0009urbb9v0r60cz
ğŸ”’ Password page detected, logging in...
Notifications seen: 1
âœ… Max notifications limit configured
  âœ“  134 [storefront] â€º tests/e2e/staging/storefront-social-proof.spec.ts:175:3 â€º Social Proof Template â€º respects max notifications per session (26.1s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing visitor notification...
âœ… Campaign created: cmilvcemg000burbbvsl86ni3
ğŸ”’ Password page detected, logging in...
Visitor content detected: true
âœ… Social proof with visitor notifications rendered
  âœ“  135 [storefront] â€º tests/e2e/staging/storefront-social-proof.spec.ts:200:3 â€º Social Proof Template â€º displays visitor count notification (7.2s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
âœ… Campaign created: cmilvcll7000durbbq2f16ltn
ğŸ”’ Password page detected, logging in...
âœ… Spin to Win wheel content rendered
  âœ“  136 [storefront] â€º tests/e2e/staging/storefront-spin-to-win.spec.ts:72:3 â€º Spin to Win Template â€º renders wheel with default segments (6.2s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvcq35000furbb7encannm
ğŸ”’ Password page detected, logging in...
Segment check: Wheel segment "10% Off" not found, Wheel segment "20% Off" not found, Wheel segment "Free Shipping" not found
  âœ“  137 [storefront] â€º tests/e2e/staging/storefront-spin-to-win.spec.ts:104:3 â€º Spin to Win Template â€º displays custom wheel segments (5.7s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvcuhn000hurbb2hk53zr3
ğŸ”’ Password page detected, logging in...
âœ… Email input displayed when required
âœ… Email input is functional
  âœ“  138 [storefront] â€º tests/e2e/staging/storefront-spin-to-win.spec.ts:151:3 â€º Spin to Win Template â€º shows email input when required (5.4s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvcyq3000jurbb4p2sostj
ğŸ”’ Password page detected, logging in...
âœ… Custom headline "Spin to Win Amazing Prizes!" displayed
  âœ“  139 [storefront] â€º tests/e2e/staging/storefront-spin-to-win.spec.ts:178:3 â€º Spin to Win Template â€º displays custom headline (5.9s)
[Cleanup] Deleted 1 E2E test campaigns
âœ… Campaign created: cmilvd36c000lurbb20gfxm8e
ğŸ”’ Password page detected, logging in...
âœ… Spin button clicked
âœ… Wheel animation or result state detected
  âœ“  140 [storefront] â€º tests/e2e/staging/storefront-spin-to-win.spec.ts:212:3 â€º Spin to Win Template â€º spin button triggers wheel animation (7.6s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing prize display after spin...
âœ… Campaign created: cmilvd91a000nurbb57qw7qxv
ğŸ”’ Password page detected, logging in...
Prize display: hasPrize=false, hasCode=false, hasWonMessage=undefined
  âœ“  141 [storefront] â€º tests/e2e/staging/storefront-spin-to-win.spec.ts:289:3 â€º Spin to Win Template â€º displays prize and discount code after successful spin (11.7s)
[Cleanup] Deleted 1 E2E test campaigns
ğŸ§ª Testing GDPR checkbox in spin-to-win...
âœ… Campaign created: cmilvdi6t000purbb6r0lvimh
ğŸ”’ Password page detected, logging in...
GDPR: exists=true, hasText=true
âœ… GDPR consent checkbox displayed
  âœ“  142 [storefront] â€º tests/e2e/staging/storefront-spin-to-win.spec.ts:340:3 â€º Spin to Win Template â€º respects GDPR checkbox when enabled (5.7s)
âœ… Found/Created store ID: cmihnznk5000029j0w9ax6vrk
ğŸŒ± Seeding campaign...
âœ… Campaign created: cmilvdo4w000surbbtaqlipqb
ğŸŒ Navigating to storefront...
>> GET https://revenue-boost-staging.myshopify.com/
<< 302 https://revenue-boost-staging.myshopify.com/
>> GET https://revenue-boost-staging.myshopify.com/password
<< 200 https://revenue-boost-staging.myshopify.com/password
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/storefront/storefronts.specrules-dd5621a1.json
>> GET https://cdn.shopify.com/shopify-marketing_assets/static/ShopifySans--regular.woff
>> GET https://cdn.shopify.com/shopify-marketing_assets/static/ShopifySans--bold.woff2
>> GET https://cdn.shopify.com/shopify-marketing_assets/static/ShopifySans--light.woff2
<< 404 https://cdn.shopify.com/shopify-marketing_assets/static/ShopifySans--regular.woff
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
<< 200 https://cdn.shopify.com/shopify-marketing_assets/static/ShopifySans--bold.woff2
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/storefront/storefronts.specrules-dd5621a1.json
<< 200 https://cdn.shopify.com/shopify-marketing_assets/static/ShopifySans--light.woff2
ğŸ”’ Password page detected, logging in...
>> POST https://revenue-boost-staging.myshopify.com/password
<< 302 https://revenue-boost-staging.myshopify.com/password
>> GET https://revenue-boost-staging.myshopify.com/
<< 200 https://revenue-boost-staging.myshopify.com/
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/storefront/storefronts.specrules-dd5621a1.json
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/constants.js?v=95358004781563950421763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/shop-js/modules/v2/client.init-shop-cart-sync_D0dqhulL.en.esm.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/shop-js/modules/v2/chunk.common_CpVO7qML.esm.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/base.css?v=140624990073879848751763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart-drawer.css?v=35930391193938886121763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart.css?v=61086454150987525971763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-totals.css?v=86168756436424464851763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-price.css?v=65402837579211014041763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-discounts.css?v=152760482443307489271763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-loading-overlay.css?v=167310470843593579841763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/section-image-banner.css?v=157711996801846961761763644811
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-card.css?v=120027167547816435861763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-slider.css?v=111384418465749404671763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/template-collection.css?v=145944865380958730931763644811
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-rating.css?v=24573085263941240431763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-image-with-text.css?v=137828147691215233621763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/section-collection-list.css?v=70863279319435850561763644811
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/section-footer.css?v=171161867995400310821763644811
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-newsletter.css?v=103472482056003053551763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-list-menu.css?v=151968516119678728991763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-list-payment.css?v=69253961410771838501763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-list-social.css?v=52211663153726659061763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-localization-form.css?v=173603692892863148811763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/storefront/storefronts.specrules-dd5621a1.json
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/constants.js?v=95358004781563950421763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/base.css?v=140624990073879848751763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart-drawer.css?v=35930391193938886121763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart.css?v=61086454150987525971763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-totals.css?v=86168756436424464851763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/section-image-banner.css?v=157711996801846961761763644811
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-rating.css?v=24573085263941240431763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/pubsub.js?v=2921868252632587581763644811
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/global.js?v=127210358271191040921763644810
>> GET https://revenue-boost-staging.myshopify.com/checkouts/internal/preloads.js?locale=en-US
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/storefront/load_feature-81c60534.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/compiled_assets/scripts.js?24
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/perf-kit/shopify-perf-kit-2.1.2.min.js
>> POST https://monorail-edge.shopifysvc.com/unstable/produce_batch
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/cart.js?v=21876159511507192261763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/details-disclosure.js?v=153497636716254413831763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/details-modal.js?v=4511761896672669691763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/cart-notification.js?v=160453272920806432391763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/search-form.js?v=113639710312857635801763644811
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/cart-drawer.js?v=44260131999403604181763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/localization-form.js?v=131562513936691783521763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/predictive-search.js?v=16985596534672189881763644810
>> GET https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/wpm/bae1676cfwd2530674p4253c800m34e853cbm.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/s/trekkie.storefront.3c703df509f0f96f3237c9daa54e2777acf1a1dd.min.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/shop_events_listener-3da45d37.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-predictive-search.css?v=85913294783299393391763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-search.css?v=184225813856820874251763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-menu-drawer.css?v=94074963897493609391763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart-notification.css?v=108833082844665799571763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart-items.css?v=29412722223528841861763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-price.css?v=65402837579211014041763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-loading-overlay.css?v=167310470843593579841763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-discounts.css?v=152760482443307489271763644810
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1763644809&width=1500
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-card.css?v=120027167547816435861763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-slider.css?v=111384418465749404671763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/template-collection.css?v=145944865380958730931763644811
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-image-with-text.css?v=137828147691215233621763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/section-footer.css?v=171161867995400310821763644811
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-newsletter.css?v=103472482056003053551763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-list-menu.css?v=151968516119678728991763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/shop-js/modules/v2/client.init-shop-cart-sync_D0dqhulL.en.esm.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/theme_cover_image.jpg?v=1763644808&width=1500
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-list-payment.css?v=69253961410771838501763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-list-social.css?v=52211663153726659061763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-localization-form.css?v=173603692892863148811763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/section-collection-list.css?v=70863279319435850561763644811
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/shop-js/modules/v2/chunk.common_CpVO7qML.esm.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_9129b69a-0c7b-4f66-b6cf-c4222f18028a.jpg?v=1763644809&width=360
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1763644809&width=360
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_0a4e9096-021a-4c1e-8750-24b233166a12.jpg?v=1763644808&width=360
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_0a40b01b-5021-48c1-80d1-aa8ab4876d3d.jpg?v=1763644808&width=360
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/snowboard_sky.png?v=1763644808&width=360
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_589fc064-24a2-4236-9eaf-13b2bd35d21d.jpg?v=1763644808&width=360
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/theme_cover_image.jpg?v=1763644808&width=750
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1763644809&width=750
>> GET https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_9129b69a-0c7b-4f66-b6cf-c4222f18028a.jpg?v=1763644809&width=750
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/pubsub.js?v=2921868252632587581763644811
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/global.js?v=127210358271191040921763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/compiled_assets/scripts.js?24
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/storefront/load_feature-81c60534.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/predictive-search.js?v=16985596534672189881763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/cart.js?v=21876159511507192261763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/details-modal.js?v=4511761896672669691763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/cart-notification.js?v=160453272920806432391763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/search-form.js?v=113639710312857635801763644811
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/cart-drawer.js?v=44260131999403604181763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/localization-form.js?v=131562513936691783521763644810
<< 200 https://revenue-boost-staging.myshopify.com/checkouts/internal/preloads.js?locale=en-US
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/perf-kit/shopify-perf-kit-2.1.2.min.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1763644809&width=1500
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/theme_cover_image.jpg?v=1763644808&width=1500
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_9129b69a-0c7b-4f66-b6cf-c4222f18028a.jpg?v=1763644809&width=360
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_0a40b01b-5021-48c1-80d1-aa8ab4876d3d.jpg?v=1763644808&width=360
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/snowboard_sky.png?v=1763644808&width=360
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1763644809&width=750
<< 200 https://revenue-boost-staging.myshopify.com/cdn/wpm/bae1676cfwd2530674p4253c800m34e853cbm.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/storefront/assets/shop_events_listener-3da45d37.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/s/trekkie.storefront.3c703df509f0f96f3237c9daa54e2777acf1a1dd.min.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/details-disclosure.js?v=153497636716254413831763644810
>> POST https://revenue-boost-staging.myshopify.com/api/collect
>> GET https://revenue-boost-staging.myshopify.com/web-pixels@ae1676cfwd2530674p4253c800m34e853cb/web-pixel-shopify-app-pixel@0450/sandbox/worker.modern.js
>> GET https://revenue-boost-staging.myshopify.com/web-pixels@ae1676cfwd2530674p4253c800m34e853cb/custom/web-pixel-shopify-custom-pixel@0450/sandbox/modern/
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1763644809&width=360
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_589fc064-24a2-4236-9eaf-13b2bd35d21d.jpg?v=1763644808&width=360
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/theme_cover_image.jpg?v=1763644808&width=750
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_9129b69a-0c7b-4f66-b6cf-c4222f18028a.jpg?v=1763644809&width=750
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/files/Main_0a4e9096-021a-4c1e-8750-24b233166a12.jpg?v=1763644808&width=360
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-predictive-search.css?v=85913294783299393391763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-search.css?v=184225813856820874251763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-menu-drawer.css?v=94074963897493609391763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart-notification.css?v=108833082844665799571763644810
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shop/t/2/assets/component-cart-items.css?v=29412722223528841861763644810
>> POST https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
>> POST https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
>> POST https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
>> POST https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
<< 200 https://revenue-boost-staging.myshopify.com/web-pixels@ae1676cfwd2530674p4253c800m34e853cb/web-pixel-shopify-app-pixel@0450/sandbox/worker.modern.js
<< 200 https://revenue-boost-staging.myshopify.com/web-pixels@ae1676cfwd2530674p4253c800m34e853cb/custom/web-pixel-shopify-custom-pixel@0450/sandbox/modern/
>> GET https://revenue-boost-staging.myshopify.com/web-pixels/strict/app/web-pixel-shopify-app-pixel@0450.js
<< 200 https://cdn.shopify.com/extensions/019ad260-08d3-75bc-821e-54faeaec5733/revenue-boost-staging-29/assets/popup-loader.bundle.js
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516189507_voqxrsaqv
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516189507_6vdzc6v51
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
>> POST https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/social-proof/track
>> GET https://revenue-boost-staging.myshopify.com/cart.js
<< 200 https://revenue-boost-staging.myshopify.com/api/collect
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/polyfills.Ba0kryUm.js
<< 200 https://revenue-boost-staging.myshopify.com/web-pixels/strict/app/web-pixel-shopify-app-pixel@0450.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/polyfills.Ba0kryUm.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/app.BLArQDYv.js
<< 200 https://revenue-boost-staging.myshopify.com/cart.js
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516189507_voqxrsaqv&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516189507_6vdzc6v51&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516189507_voqxrsaqv, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516189507_6vdzc6v51}
>> GET https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516189507_voqxrsaqv&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516189507_6vdzc6v51&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
<< 200 https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
<< 200 https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
<< 200 https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
<< 200 https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/app.BLArQDYv.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/locale-en.UXHC-FjC.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/locale-en.UXHC-FjC.js
>> GET https://shop.app/pay/hop?analytics_trace_id=9a571e3e-2471-4b99-aaba-aeb53d4e434a&target_origin=https%3A%2F%2Frevenue-boost-staging.myshopify.com&client_handle=revenue-boost-staging.myshopify.com
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/page-OnePage.CoBnjGd8.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/page-OnePage.CoBnjGd8.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/LocalizationExtensionField.D5nf2z1H.js
<< 400 https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/social-proof/track
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/LocalizationExtensionField.D5nf2z1H.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/RememberMeDescriptionText.1nNNmo0r.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/RememberMeDescriptionText.1nNNmo0r.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/ShopPayOptInDisclaimer.BfnDmL6R.js
<< 200 https://monorail-edge.shopifysvc.com/unstable/produce_batch
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/ShopPayOptInDisclaimer.BfnDmL6R.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/PaymentButtons.OFe690M_.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/PaymentButtons.OFe690M_.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/StockProblemsLineItemList.ChAiPLLo.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/StockProblemsLineItemList.ChAiPLLo.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/DeliveryMethodSelectorSection.x-XTbwH-.js
<< 200 https://shop.app/pay/hop?analytics_trace_id=9a571e3e-2471-4b99-aaba-aeb53d4e434a&target_origin=https%3A%2F%2Frevenue-boost-staging.myshopify.com&client_handle=revenue-boost-staging.myshopify.com
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/DeliveryMethodSelectorSection.x-XTbwH-.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/useEditorShopPayNavigation.-ELK4PNN.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/useEditorShopPayNavigation.-ELK4PNN.js
>> POST https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/VaultedPayment.B5q5rI4Q.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/VaultedPayment.B5q5rI4Q.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/SeparatePaymentsNotice.CeyXWaun.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/SeparatePaymentsNotice.CeyXWaun.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/ShipmentBreakdown.DmWG3DTh.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/ShipmentBreakdown.DmWG3DTh.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/MerchandiseModal.D4kvkWHk.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/MerchandiseModal.D4kvkWHk.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/StackedMerchandisePreview.D08SRaqf.js
<< 200 https://revenue-boost-staging.myshopify.com/.well-known/shopify/monorail/unstable/produce_batch
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/StackedMerchandisePreview.D08SRaqf.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/component-ShopPayVerificationSwitch.AGvlt7bE.js
<< 200 https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516189507_voqxrsaqv&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516189507_6vdzc6v51&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:23:10.125Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [SPIN_TO_WIN]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/spin-to-win.bundle.js?v=1764516189511
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
>> GET https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/spin-to-win.bundle.js?v=1764516189511
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-Staging-Test-SpinWin [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilvdo4w000surbbtaqlipqb, name: E2E-Staging-Test-SpinWin, templateType: SPIN_TO_WIN}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilvdo4w000surbbtaqlipqb, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-Staging-Test-SpinWin
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilvdo4w000surbbtaqlipqb
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilvdo4w000surbbtaqlipqb
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-Staging-Test-SpinWin
>> POST https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/analytics/frequency?shop=revenue-boost-staging.myshopify.com
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/component-ShopPayVerificationSwitch.AGvlt7bE.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/useSubscribeMessenger.CquQKfwG.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/useSubscribeMessenger.CquQKfwG.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/index.DReDgNMq.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/index.DReDgNMq.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/PayButtonSection.BIXN04gI.js
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/PayButtonSection.BIXN04gI.js
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/app.Du6SSCMk.css
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/app.Du6SSCMk.css
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/OnePage.Dx_lrSVd.css
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/OnePage.Dx_lrSVd.css
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/DeliveryMethodSelectorSection.BvrdqG-K.css
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/DeliveryMethodSelectorSection.BvrdqG-K.css
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/ShopPayVerificationSwitch.WW3cs_z5.css
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/ShopPayVerificationSwitch.WW3cs_z5.css
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/useEditorShopPayNavigation.CBpWLJzT.css
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/useEditorShopPayNavigation.CBpWLJzT.css
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/VaultedPayment.OxMVm7u-.css
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/VaultedPayment.OxMVm7u-.css
>> GET https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/StackedMerchandisePreview.CKAakmU8.css
<< 200 https://revenue-boost-staging.myshopify.com/apps/revenue-boost/bundles/spin-to-win.bundle.js?v=1764516189511
[BROWSER] debug: [Revenue Boost] Spin to Win popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: SPIN_TO_WIN
<< 200 https://revenue-boost-staging.myshopify.com/cdn/shopifycloud/checkout-web/assets/c1/assets/StackedMerchandisePreview.CKAakmU8.css
<< 200 https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/analytics/frequency?shop=revenue-boost-staging.myshopify.com
[BROWSER] log: [PopupManager] Initializing popup for: SPIN_TO_WIN
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilvdo4w000surbbtaqlipqb (SPIN_TO_WIN)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilvdo4w000surbbtaqlipqb
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: SPIN_TO_WIN
>> POST https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/challenge/request
<< 200 https://revenue-boost-staging.myshopify.com/apps/revenue-boost/api/challenge/request
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilvdo4w000surbbtaqlipqb
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilvdo4w000surbbtaqlipqb, templateType: SPIN_TO_WIN, contentConfig: Object, designConfig: Object}
ğŸ‘€ Waiting for popup...
[TEST] SplitPop Debug Logs: No debug logs found
[TEST] Popup Manager initialized: [33mfalse[39m
[TEST] SplitPop-related elements: [
  {
    tag: [32m'DIV'[39m,
    class: [32m''[39m,
    id: [32m'revenue-boost-popup-cmilvdo4w000surbbtaqlipqb'[39m,
    visible: [33mfalse[39m,
    display: [32m'none'[39m
  },
  {
    tag: [32m'DIV'[39m,
    class: [32m''[39m,
    id: [32m'revenue-boost-popup-shadow-host'[39m,
    visible: [33mtrue[39m,
    display: [32m'block'[39m
  }
]
âœ… Popup is visible!
  âœ“  143 [storefront] â€º tests/e2e/staging/storefront-staging.spec.ts:51:3 â€º Staging Storefront E2E â€º Should display Spin to Win popup on storefront (9.0s)
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
[Cleanup] Deleted 1 E2E test campaigns
Created campaign: E2E-targeting-FreqCap-Once with priority 99999
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516201867_9ic06qlmu
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516201867_bgpuabvzy
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516201867_9ic06qlmu&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516201867_bgpuabvzy&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516201867_9ic06qlmu, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516201867_bgpuabvzy}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:23:22.522Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764516201870
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-targeting-FreqCap-Once [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilvdvtp000uurbb4wwmz4zv, name: E2E-targeting-FreqCap-Once, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilvdvtp000uurbb4wwmz4zv, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-targeting-FreqCap-Once
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilvdvtp000uurbb4wwmz4zv
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 0}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 0ms before showing
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilvdvtp000uurbb4wwmz4zv
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-targeting-FreqCap-Once
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilvdvtp000uurbb4wwmz4zv (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilvdvtp000uurbb4wwmz4zv
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilvdvtp000uurbb4wwmz4zv
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilvdvtp000uurbb4wwmz4zv, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… First impression: Popup appeared
âœ… Verified: Our frequency-capped campaign is showing
[BROWSER] log: [Revenue Boost] Popup closed
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516201867_9ic06qlmu
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516201867_bgpuabvzy
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516201867_9ic06qlmu&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516201867_bgpuabvzy&visitCount=2&isReturningVisitor=true&timeOnSite=2&pageViews=2&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516201867_9ic06qlmu, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516201867_bgpuabvzy}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:23:24.858Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764516204207
[BROWSER] log: [Revenue Boost] Campaign dismissed by user: cmilvdvtp000uurbb4wwmz4zv (tracking key: cmilvdvtp000uurbb4wwmz4zv)
[BROWSER] warning: [Revenue Boost] âš ï¸ No campaigns available after filtering
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] debug: [Revenue Boost] Newsletter popup registered
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
âœ… Frequency cap working: Campaign did not appear on second visit
  âœ“  144 [storefront] â€º tests/e2e/staging/storefront-targeting.spec.ts:74:3 â€º Targeting Combinations â€º frequency capping limits popup display in browser (12.2s)
[Cleanup] Deleted 1 E2E test campaigns
Created campaign: E2E-targeting-NewVisitor-Only with priority 99999
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516213723_wrfcw4fp3
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516213723_xjg7d4vd9
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516213723_wrfcw4fp3&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516213723_xjg7d4vd9&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516213723_wrfcw4fp3, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516213723_xjg7d4vd9}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(0), timestamp: 2025-11-30T15:23:34.288Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 0
[BROWSER] warning: [Revenue Boost] âš ï¸ No active campaigns returned from API
  âœ˜  145 [storefront] â€º tests/e2e/staging/storefront-targeting.spec.ts:131:3 â€º Targeting Combinations â€º new visitor targeting shows popup only to first-time visitors (20.7s)
  -  146 [storefront] â€º tests/e2e/staging/storefront-targeting.spec.ts:175:3 â€º Targeting Combinations â€º shows only on specific pages
  -  147 [storefront] â€º tests/e2e/staging/storefront-targeting.spec.ts:196:3 â€º Targeting Combinations â€º targets mobile devices only
  -  148 [storefront] â€º tests/e2e/staging/storefront-targeting.spec.ts:223:3 â€º Targeting Combinations â€º targets desktop devices only
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
[E2E] Loaded environment from .env.staging.env
[dotenv@17.2.3] injecting env (10) from .env.staging.env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
Created campaign: E2E-triggers-Page-Load-Delay with priority 99999
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516236680_rz8zlmq83
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516236680_t5kosb2kn
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516236680_rz8zlmq83&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516236680_t5kosb2kn&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516236680_rz8zlmq83, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516236680_t5kosb2kn}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:23:57.360Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764516236683
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-triggers-Page-Load-Delay [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilvemmu0001urunw3spjluk, name: E2E-triggers-Page-Load-Delay, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilvemmu0001urunw3spjluk, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-triggers-Page-Load-Delay
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilvemmu0001urunw3spjluk
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] ğŸ“„ Checking page_load trigger: {enabled: true, delay: 2000}
[BROWSER] log: [Revenue Boost] â³ page_load trigger waiting 2000ms before showing
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
Popup visible early (expected false): false
[BROWSER] log: [Revenue Boost] âœ… page_load trigger delay completed
[BROWSER] log: [Revenue Boost] âœ… page_load trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilvemmu0001urunw3spjluk
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-triggers-Page-Load-Delay
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilvemmu0001urunw3spjluk (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilvemmu0001urunw3spjluk
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 3ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilvemmu0001urunw3spjluk
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilvemmu0001urunw3spjluk, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Popup shown after delay
  âœ“  149 [storefront] â€º tests/e2e/staging/storefront-triggers.spec.ts:62:3 â€º Trigger Combinations â€º shows popup after page load delay (8.2s)
[Cleanup] Deleted 1 E2E test campaigns
Created campaign: E2E-triggers-Scroll-Depth-Trigger with priority 99999
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516244447_2fo6owmis
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516244447_foy3ttxa4
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516244447_2fo6owmis&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516244447_foy3ttxa4&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516244447_2fo6owmis, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516244447_foy3ttxa4}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:24:05.113Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764516244451
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [Revenue Boost] âœ… High priority components ready
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-triggers-Scroll-Depth-Trigger [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilvesoe0003urunnuaag63x, name: E2E-triggers-Scroll-Depth-Trigger, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilvesoe0003urunnuaag63x, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-triggers-Scroll-Depth-Trigger
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilvesoe0003urunnuaag63x
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] log: [Revenue Boost] ğŸ“œ Checking scroll_depth trigger: {enabled: true, depth_percentage: 50, direction: down, debounce_time: 100}
[BROWSER] log: [Revenue Boost] ğŸ“ scroll_depth trigger waiting for 50% scroll down (debounce=100ms)
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
Popup visible before scroll (expected false): false
[BROWSER] log: [Revenue Boost] âœ… scroll_depth trigger detected: User scrolled 50% down
[BROWSER] log: [Revenue Boost] âœ… scroll_depth trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilvesoe0003urunnuaag63x
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-triggers-Scroll-Depth-Trigger
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilvesoe0003urunnuaag63x (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilvesoe0003urunnuaag63x
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilvesoe0003urunnuaag63x
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilvesoe0003urunnuaag63x, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Popup shown after scroll
  âœ“  150 [storefront] â€º tests/e2e/staging/storefront-triggers.spec.ts:88:3 â€º Trigger Combinations â€º shows popup when user scrolls to depth (10.4s)
[Cleanup] Deleted 1 E2E test campaigns
Created campaign: E2E-triggers-Time-Delay-Trigger with priority 99999
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516254806_8h52trxzc
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516254806_jymw5iv8a
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516254806_8h52trxzc&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516254806_jymw5iv8a&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516254806_8h52trxzc, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516254806_jymw5iv8a}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:24:15.466Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] ğŸ“¦ Preloading LOW priority components (background): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764516254810
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-triggers-Time-Delay-Trigger [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilvf0ta0005urun02vcjse0, name: E2E-triggers-Time-Delay-Trigger, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilvf0ta0005urun02vcjse0, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-triggers-Time-Delay-Trigger
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilvf0ta0005urun02vcjse0
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] log: [Revenue Boost] â³ Checking time_delay trigger: {enabled: true, delay: 3, immediate: false}
[BROWSER] log: [Revenue Boost] â³ time_delay trigger waiting 3s (3000ms) before showing
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
Popup visible early (expected false): false
[BROWSER] log: [Revenue Boost] âœ… time_delay trigger delay completed
[BROWSER] log: [Revenue Boost] âœ… time_delay trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilvf0ta0005urun02vcjse0
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-triggers-Time-Delay-Trigger
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilvf0ta0005urun02vcjse0 (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilvf0ta0005urun02vcjse0
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilvf0ta0005urun02vcjse0
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilvf0ta0005urun02vcjse0, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Popup shown after time delay
  âœ“  151 [storefront] â€º tests/e2e/staging/storefront-triggers.spec.ts:130:3 â€º Trigger Combinations â€º shows popup after time delay (8.7s)
[Cleanup] Deleted 1 E2E test campaigns
Created campaign: E2E-triggers-AND-Logic-Trigger with priority 99999
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516263317_wz408sz6r
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516263317_4qxz6h6px
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516263317_wz408sz6r&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516263317_4qxz6h6px&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516263317_wz408sz6r, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516263317_4qxz6h6px}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:24:23.940Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764516263321
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [Revenue Boost] âœ… High priority components ready
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-triggers-AND-Logic-Trigger [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilvf7g90007urunarfasdrb, name: E2E-triggers-AND-Logic-Trigger, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilvf7g90007urunarfasdrb, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-triggers-AND-Logic-Trigger
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilvf7g90007urunarfasdrb
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: AND
[BROWSER] log: [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] log: [Revenue Boost] â³ Checking time_delay trigger: {enabled: true, delay: 3, immediate: false}
[BROWSER] log: [Revenue Boost] â³ time_delay trigger waiting 3s (3000ms) before showing
[BROWSER] log: [Revenue Boost] ğŸ“œ Checking scroll_depth trigger: {enabled: true, depth_percentage: 30, direction: down, debounce_time: 100}
[BROWSER] log: [Revenue Boost] ğŸ“ scroll_depth trigger waiting for 30% scroll down (debounce=100ms)
[BROWSER] log: [Revenue Boost] ğŸ”— AND logic: Waiting for ALL triggers to pass...
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
[BROWSER] log: [Revenue Boost] âœ… scroll_depth trigger detected: User scrolled 30% down
[BROWSER] log: [Revenue Boost] âœ… scroll_depth trigger passed
Popup visible after scroll only (expected false): false
[BROWSER] log: [Revenue Boost] âœ… time_delay trigger delay completed
[BROWSER] log: [Revenue Boost] âœ… time_delay trigger passed
[BROWSER] log: [Revenue Boost] âœ… AND logic satisfied: All triggers passed
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilvf7g90007urunarfasdrb
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-triggers-AND-Logic-Trigger
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilvf7g90007urunarfasdrb (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilvf7g90007urunarfasdrb
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilvf7g90007urunarfasdrb
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilvf7g90007urunarfasdrb, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Popup shown after AND conditions met
  âœ“  152 [storefront] â€º tests/e2e/staging/storefront-triggers.spec.ts:156:3 â€º Trigger Combinations â€º shows popup when all triggers pass (AND logic) (10.6s)
[Cleanup] Deleted 1 E2E test campaigns
Created campaign: E2E-triggers-OR-Logic-Trigger with priority 99999
[BROWSER] error: Failed to load resource: the server responded with a status of 404 ()
ğŸ”’ Password page detected, logging in...
[BROWSER] log: [Revenue Boost] URL: https://revenue-boost-staging.myshopify.com/
[BROWSER] log: [Revenue Boost] Preview params: {previewToken: null, previewBehavior: instant}
[BROWSER] log: [Revenue Boost] â„¹ï¸ No preview parameters found
[BROWSER] log: [Revenue Boost] Final config: {previewMode: undefined, previewToken: undefined, previewBehavior: undefined}
[BROWSER] log: [PreDisplayHook] Hook registry initialized
[BROWSER] log: [Revenue Boost] âš›ï¸ Preact runtime exposed globally
[BROWSER] log: [Revenue Boost] ğŸ” Challenge token store exposed globally
[BROWSER] log: [Revenue Boost] ğŸš€ Starting initialization...
[BROWSER] log: [Revenue Boost] ğŸ“‹ Config: {apiUrl: , shopDomain: revenue-boost-staging.myshopify.com, debug: true, previewMode: false, previewToken: undefined}
[BROWSER] log: [Revenue Boost] ğŸ”‘ Session ID: session_1764516274130_3zo271n86
[BROWSER] log: [Revenue Boost] ğŸ‘¤ Visitor ID: visitor_1764516274130_7dypmqprt
[BROWSER] log: [Revenue Boost] DOM ready
[BROWSER] log: [Revenue Boost] ğŸ›’ Cart tracking initialized
[BROWSER] log: [Revenue Boost] ğŸ“¡ Fetching campaigns from API...
[BROWSER] log: [Revenue Boost API] Fetching campaigns from: /apps/revenue-boost/api/campaigns/active?shop=revenue-boost-staging.myshopify.com&sessionId=session_1764516274130_3zo271n86&pageUrl=%2F&pageType=home&deviceType=desktop&visitorId=visitor_1764516274130_7dypmqprt&visitCount=1&isReturningVisitor=false&pageViews=1&currentPageType=home&cartValue=0&cartItemCount=0
[BROWSER] log: [Revenue Boost API] Context: {sessionId: session_1764516274130_3zo271n86, pageUrl: /, pageType: home, deviceType: desktop, visitorId: visitor_1764516274130_7dypmqprt}
[BROWSER] error: Failed to load resource: the server responded with a status of 400 ()
[BROWSER] log: [Revenue Boost] Page view tracked for social proof
[BROWSER] log: [Revenue Boost API] Campaigns received: {campaigns: Array(1), timestamp: 2025-11-30T15:24:34.836Z, showBranding: true}
[BROWSER] log: [Revenue Boost] âœ… Campaigns received: 1
[BROWSER] log: [Revenue Boost] Campaign details: [Object]
[BROWSER] log: [Revenue Boost] âš¡ Preloading HIGH priority components (instant triggers): [NEWSLETTER]
[BROWSER] log: [Revenue Boost Loader] Loading script: /apps/revenue-boost/bundles/newsletter.bundle.js?v=1764516274134
[BROWSER] log: [Revenue Boost Loader] Loaded from global registry: NEWSLETTER
[BROWSER] log: [Revenue Boost] âœ… High priority components ready
[BROWSER] log: [Revenue Boost] ğŸ“‹ 1 campaign(s) available after filtering
[BROWSER] log: [Revenue Boost] Selected campaigns by surface: [E2E-triggers-OR-Logic-Trigger [modal]]
[BROWSER] log: [Revenue Boost] ğŸ¬ showCampaign called for: {id: cmilvffto0009urun54uk2sqt, name: E2E-triggers-OR-Logic-Trigger, templateType: NEWSLETTER}
[BROWSER] log: [Revenue Boost] Preview check: {isPreview: false, previewMode: false, previewToken: undefined, campaignId: cmilvffto0009urun54uk2sqt, behavior: instant}
[BROWSER] log: [Revenue Boost] ğŸ¯ Normal mode: evaluating triggers for campaign: E2E-triggers-OR-Logic-Trigger
[BROWSER] log: [Revenue Boost] ğŸ” Evaluating triggers...
[BROWSER] log: [Revenue Boost] ğŸ¯ Evaluating triggers for campaign: cmilvffto0009urun54uk2sqt
[BROWSER] log: [Revenue Boost] ğŸ”— Trigger logic operator: OR
[BROWSER] log: [Revenue Boost] â­ï¸ page_load trigger is disabled
[BROWSER] log: [Revenue Boost] â³ Checking time_delay trigger: {enabled: true, delay: 3, immediate: false}
[BROWSER] log: [Revenue Boost] â³ time_delay trigger waiting 3s (3000ms) before showing
[BROWSER] log: [Revenue Boost] ğŸ“œ Checking scroll_depth trigger: {enabled: true, depth_percentage: 80, direction: down, debounce_time: 100}
[BROWSER] log: [Revenue Boost] ğŸ“ scroll_depth trigger waiting for 80% scroll down (debounce=100ms)
[BROWSER] log: [Revenue Boost] ğŸ”€ OR logic: Waiting for ANY trigger to pass...
[BROWSER] log: [Revenue Boost] Promise.any defined: function
[BROWSER] log: [Revenue Boost] âœ… Initialization complete!
Popup visible early (expected false): false
[BROWSER] log: [Revenue Boost] âœ… time_delay trigger delay completed
[BROWSER] log: [Revenue Boost] âœ… time_delay trigger passed
[BROWSER] log: [Revenue Boost] Task time_delay resolved with true
[BROWSER] log: [Revenue Boost] âœ… OR logic satisfied by: time_delay
[BROWSER] log: [Revenue Boost] âœ… CAMPAIGN WILL SHOW - Final result: triggers + session rules passed for cmilvffto0009urun54uk2sqt
[BROWSER] log: [Revenue Boost] âœ… Triggers passed, showing campaign
[BROWSER] log: [Revenue Boost] ğŸ¨ renderCampaign called for: E2E-triggers-OR-Logic-Trigger
[BROWSER] log: [PopupManager] Initializing popup for: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Executing hooks for campaign cmilvffto0009urun54uk2sqt (NEWSLETTER)
[BROWSER] log: [ChallengeTokenHook] Requesting token for campaign cmilvffto0009urun54uk2sqt
[BROWSER] log: [BackgroundImageHook] No image URL found in designConfig
[BROWSER] log: [Revenue Boost Loader] Cache hit: NEWSLETTER
[BROWSER] log: [PreDisplayHook] Completed in 2ms. Success: 2/2
[BROWSER] log: [Revenue Boost] Popup shown: cmilvffto0009urun54uk2sqt
[BROWSER] log: [PopupManagerPreact] Rendering campaign {id: cmilvffto0009urun54uk2sqt, templateType: NEWSLETTER, contentConfig: Object, designConfig: Object}
âœ… Popup shown after OR time trigger met
  âœ“  153 [storefront] â€º tests/e2e/staging/storefront-triggers.spec.ts:198:3 â€º Trigger Combinations â€º shows popup when any trigger passes (OR logic) (9.1s)


  1) [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:418:5 â€º Announcement Template â€º Sticky Behavior â€º non-sticky announcement appears initially 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      475 |
      476 |             const bannerAppeared = await waitForBanner(page, 20000);
    > 477 |             expect(bannerAppeared).toBe(true);
          |                                    ^
      478 |
      479 |             // Verify content
      480 |             const banner = await getAnnouncementBanner(page);
        at /Users/bokzor/WebstormProjects/split-pop-rework/revenue-boost/tests/e2e/staging/storefront-announcement.spec.ts:477:36

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-announc-d7cad-ouncement-appears-initially-storefront/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-announc-d7cad-ouncement-appears-initially-storefront/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/artifacts/staging-storefront-announc-d7cad-ouncement-appears-initially-storefront/error-context.md

  2) [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:173:5 â€º Cart & Product Triggers â€º Cart Value Trigger â€º popup shows when cart value exceeds min threshold 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      225 |             // Popup MUST appear after cart value exceeds threshold - hard assertion
      226 |             const popupVisible = await waitForPopupWithRetry(page, { timeout: 5000, retries: 2, reloadOnRetry: false });
    > 227 |             expect(popupVisible).toBe(true);
          |                                  ^
      228 |             console.log('âœ… Popup shown after cart value exceeded threshold');
      229 |         });
      230 |     });
        at /Users/bokzor/WebstormProjects/split-pop-rework/revenue-boost/tests/e2e/staging/storefront-cart-triggers.spec.ts:227:34

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-cart-tr-8f506-value-exceeds-min-threshold-storefront/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-cart-tr-8f506-value-exceeds-min-threshold-storefront/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/artifacts/staging-storefront-cart-tr-8f506-value-exceeds-min-threshold-storefront/error-context.md

  3) [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:237:5 â€º Checkout Flow â€º Cart Operations â€º can add product to cart 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeGreaterThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: > [32m0[39m
    Received:   [31m0[39m

      259 |             console.log(`Cart info: ${cartInfo.itemCount} items, total: ${cartInfo.total}`);
      260 |
    > 261 |             expect(cartInfo.itemCount).toBeGreaterThan(0);
          |                                        ^
      262 |             console.log('âœ… Cart contains items');
      263 |         });
      264 |
        at /Users/bokzor/WebstormProjects/split-pop-rework/revenue-boost/tests/e2e/staging/storefront-checkout-flow.spec.ts:261:40

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-checkou-8c99b-ons-can-add-product-to-cart-storefront/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-checkou-8c99b-ons-can-add-product-to-cart-storefront/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/artifacts/staging-storefront-checkou-8c99b-ons-can-add-product-to-cart-storefront/error-context.md

  4) [storefront] â€º tests/e2e/staging/storefront-session-rules.spec.ts:190:3 â€º Session Rules & Frequency Capping â€º multiple impressions allowed when configured 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('#revenue-boost-popup-shadow-host')
    Expected: visible
    Timeout: 15000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 15000ms[22m
    [2m  - waiting for locator('#revenue-boost-popup-shadow-host')[22m


      218 |         await page.reload();
      219 |         await handlePasswordPage(page);
    > 220 |         await expect(popup).toBeVisible({ timeout: 15000 });
          |                             ^
      221 |         console.log('âœ… Impression 2/3: Popup appeared');
      222 |         await closePopupInShadowDOM(page);
      223 |         await page.waitForTimeout(500);
        at /Users/bokzor/WebstormProjects/split-pop-rework/revenue-boost/tests/e2e/staging/storefront-session-rules.spec.ts:220:29

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-session-7e37b-ons-allowed-when-configured-storefront/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-session-7e37b-ons-allowed-when-configured-storefront/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/artifacts/staging-storefront-session-7e37b-ons-allowed-when-configured-storefront/error-context.md

  5) [storefront] â€º tests/e2e/staging/storefront-targeting.spec.ts:131:3 â€º Targeting Combinations â€º new visitor targeting shows popup only to first-time visitors 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('#revenue-boost-popup-shadow-host')
    Expected: visible
    Timeout: 15000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 15000ms[22m
    [2m  - waiting for locator('#revenue-boost-popup-shadow-host')[22m


      168 |
      169 |         const popup = page.locator('#revenue-boost-popup-shadow-host');
    > 170 |         await expect(popup).toBeVisible({ timeout: 15000 });
          |                             ^
      171 |
      172 |         // Verify it's our new visitor campaign
      173 |         const isNewVisitorCampaign = await page.evaluate(() => {
        at /Users/bokzor/WebstormProjects/split-pop-rework/revenue-boost/tests/e2e/staging/storefront-targeting.spec.ts:170:29

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-targeti-e663b-only-to-first-time-visitors-storefront/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/artifacts/staging-storefront-targeti-e663b-only-to-first-time-visitors-storefront/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/artifacts/staging-storefront-targeti-e663b-only-to-first-time-visitors-storefront/error-context.md

  5 failed
    [storefront] â€º tests/e2e/staging/storefront-announcement.spec.ts:418:5 â€º Announcement Template â€º Sticky Behavior â€º non-sticky announcement appears initially 
    [storefront] â€º tests/e2e/staging/storefront-cart-triggers.spec.ts:173:5 â€º Cart & Product Triggers â€º Cart Value Trigger â€º popup shows when cart value exceeds min threshold 
    [storefront] â€º tests/e2e/staging/storefront-checkout-flow.spec.ts:237:5 â€º Checkout Flow â€º Cart Operations â€º can add product to cart 
    [storefront] â€º tests/e2e/staging/storefront-session-rules.spec.ts:190:3 â€º Session Rules & Frequency Capping â€º multiple impressions allowed when configured 
    [storefront] â€º tests/e2e/staging/storefront-targeting.spec.ts:131:3 â€º Targeting Combinations â€º new visitor targeting shows popup only to first-time visitors 
  18 did not run
  130 passed (18.0m)

To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
